<div id="pf6c" class="pf w0 h0" data-page-no="6c"><div class="pc pc6c w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg6c.png"/><div class="t m0 x9 hd y150 ff1 fs7 fc0 sc0 ls0 ws0">4.6<span class="_ _b"> </span>Peripheral bridge (AIPS-Lite) memory map</div><div class="t m0 x9 hf y151 ff3 fs5 fc0 sc0 ls0 ws0">The peripheral memory map is accessible via one slave port on the crossbar in the</div><div class="t m0 x9 hf y152 ff3 fs5 fc0 sc0 ls0 ws0">0x4000_0000–0x400F_FFFF region. The device implements one peripheral bridge that</div><div class="t m0 x9 hf y825 ff3 fs5 fc0 sc0 ls0 ws0">defines a 1024 KB address space.</div><div class="t m0 x9 hf y826 ff3 fs5 fc0 sc0 ls0 ws0">The three regions associated with this space are:</div><div class="t m0 x33 hf y827 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>A 128 KB region, partitioned as 32 spaces, each 4 KB in size and reserved for on-</div><div class="t m0 x34 hf y828 ff3 fs5 fc0 sc0 ls0 ws0">platform peripheral devices. The AIPS controller generates unique module enables</div><div class="t m0 x34 hf y829 ff3 fs5 fc0 sc0 ls0 ws0">for all 32 spaces.</div><div class="t m0 x33 hf y82a ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>A 384 KB region, partitioned as 96 spaces, each 4 KB in size and reserved for off-</div><div class="t m0 x34 hf y82b ff3 fs5 fc0 sc0 ls0 ws0">platform modules. The AIPS controller generates unique module enables for all 96</div><div class="t m0 x34 hf y82c ff3 fs5 fc0 sc0 ls0">spaces.</div><div class="t m0 x33 hf y82d ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>The last slot is a 4 KB region beginning at 0x400F_F000 for accessing the GPIO</div><div class="t m0 x34 hf y82e ff3 fs5 fc0 sc0 ls0 ws0">module. The GPIO slot (slot 128) is an alias of slot 15. This block is also directly</div><div class="t m0 x34 hf y82f ff3 fs5 fc0 sc0 ls0 ws0">interfaced to the core and provides direct access without incurring wait states</div><div class="t m0 x34 hf y830 ff3 fs5 fc0 sc0 ls0 ws0">associated with accesses via the AIPS controller.</div><div class="t m0 x9 hf y831 ff3 fs5 fc0 sc0 ls0 ws0">Modules that are disabled via their clock gate control bits in the SIM registers disable the</div><div class="t m0 x9 hf y832 ff3 fs5 fc0 sc0 ls0 ws0">associated AIPS slots. Access to any address within an unimplemented or disabled</div><div class="t m0 x9 hf y833 ff3 fs5 fc0 sc0 ls0 ws0">peripheral bridge slot results in a transfer error termination.</div><div class="t m0 x9 hf y834 ff3 fs5 fc0 sc0 ls0 ws0">For programming model accesses via the peripheral bridges, there is generally only a</div><div class="t m0 x9 hf y835 ff3 fs5 fc0 sc0 ls0 ws0">small range within the 4 KB slots that is implemented. Accessing an address that is not</div><div class="t m0 x9 hf y836 ff3 fs5 fc0 sc0 ls0 ws0">implemented in the peripheral results in a transfer error termination.</div><div class="t m0 x9 he y837 ff1 fs1 fc0 sc0 ls0 ws0">4.6.1<span class="_ _b"> </span>Read-after-write sequence and required serialization of</div><div class="t m0 x41 he y838 ff1 fs1 fc0 sc0 ls0 ws0">memory operations</div><div class="t m0 x9 hf y839 ff3 fs5 fc0 sc0 ls0 ws0">In some situations, a write to a peripheral must be completed fully before a subsequent</div><div class="t m0 x9 hf y83a ff3 fs5 fc0 sc0 ls0 ws0">action can occur. Examples of such situations include:</div><div class="t m0 x33 hf y83b ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Exiting an interrupt service routine (ISR)</div><div class="t m0 x33 hf y83c ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Changing a mode</div><div class="t m0 x33 hf y83d ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Configuring a function</div><div class="t m0 x9 hf y83e ff3 fs5 fc0 sc0 ls0 ws0">In these situations, application software must perform a read-after-write sequence to</div><div class="t m0 x9 hf y83f ff3 fs5 fc0 sc0 ls0 ws0">guarantee the required serialization of the memory operations:</div><div class="t m0 xf6 hf y840 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Write the peripheral register.</div><div class="t m0 xf6 hf y841 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Read the written peripheral register to verify the write.</div><div class="t m0 xf6 hf y842 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Continue with subsequent operations.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Peripheral bridge (AIPS-Lite) memory map</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">108<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
