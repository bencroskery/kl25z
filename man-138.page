<div id="pf8a" class="pf w0 h0" data-page-no="8a"><div class="pc pc8a w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg8a.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">When configured for PSTOP1, both the system clock and bus clock are gated. All bus</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">masters and bus slaves enter Stop mode, but the clock generators in the MCG and the on-</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">chip regulator in the PMC remain in Run (or VLP Run) mode. Exit from PSTOP1 can be</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">initiated by a reset or an asynchronous interrupt from a bus master or bus slave. If</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">configured, an asynchronous DMA request can also be used to exit Partial Stop for the</div><div class="t m0 x9 hf yfb ff3 fs5 fc0 sc0 ls0 ws0">duration of a DMA transfer before the device is transitioned back into PSTOP1.</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">PSTOP1 is functionally similar to STOP mode, but offers faster wakeup at the expense of</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">higher power consumption. Another benefit is that it keeps all of the MCG clocks</div><div class="t m0 x9 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">enabled, which can be useful for some of the asynchronous peripherals that can remain</div><div class="t m0 x9 hf y646 ff3 fs5 fc0 sc0 ls0 ws0">functional in Stop modes.</div><div class="t m0 x9 he yabe ff1 fs1 fc0 sc0 ls0 ws0">7.2.2<span class="_ _b"> </span>DMA Wakeup</div><div class="t m0 x9 hf y952 ff3 fs5 fc0 sc0 ls0 ws0">The DMA can be configured to wakeup the device on a DMA request whenever it is</div><div class="t m0 x9 hf yabf ff3 fs5 fc0 sc0 ls0 ws0">placed in stop mode. The wakeup is configured per DMA channel and is supported in</div><div class="t m0 x9 hf yac0 ff3 fs5 fc0 sc0 ls0 ws0">Compute Operation, PSTOP, STOP and VLPS low power modes.</div><div class="t m0 x9 hf yac1 ff3 fs5 fc0 sc0 ls0 ws0">When a DMA wakeup is detected in PSTOP, STOP or VLPS then the device will initiate</div><div class="t m0 x9 hf yac2 ff3 fs5 fc0 sc0 ls0 ws0">a normal exit from the low power mode. This can include restoring the on-chip regulator</div><div class="t m0 x9 hf yac3 ff3 fs5 fc0 sc0 ls0 ws0">and internal power switches, enabling the clock generators in the MCG, enabling the</div><div class="t m0 x9 hf yac4 ff3 fs5 fc0 sc0 ls0 ws0">system and bus clocks (but not the core clock) and negating the stop mode signal to the</div><div class="t m0 x9 hf yac5 ff3 fs5 fc0 sc0 ls0 ws0">bus masters and bus slaves. The only difference is that the CPU will remain in the low</div><div class="t m0 x9 hf yac6 ff3 fs5 fc0 sc0 ls0 ws0">power mode with the CPU clock disabled.</div><div class="t m0 x9 hf yac7 ff3 fs5 fc0 sc0 ls0 ws0">During Compute Operation, a DMA wakeup will initiate a normal exit from Compute</div><div class="t m0 x9 hf yac8 ff3 fs5 fc0 sc0 ls0 ws0">Operation. This includes enabling the clocks and negating the stop mode signal to the bus</div><div class="t m0 x9 hf yac9 ff3 fs5 fc0 sc0 ls0 ws0">masters and bus slaves. The core clock always remains enabled during Compute</div><div class="t m0 x9 hf yaca ff3 fs5 fc0 sc0 ls0">Operation.</div><div class="t m0 x9 hf yacb ff3 fs5 fc0 sc0 ls0 ws0">Since the DMA wakeup will enable the clocks and negate the stop mode signals to all bus</div><div class="t m0 x9 hf yacc ff3 fs5 fc0 sc0 ls0 ws0">masters and slaves, software needs to ensure that bus masters and slaves that are not</div><div class="t m0 x9 hf yacd ff3 fs5 fc0 sc0 ls0 ws0">involved with the DMA wakeup and transfer remain in a known state. That can be</div><div class="t m0 x9 hf yace ff3 fs5 fc0 sc0 ls0 ws0">accomplished by disabling the modules before entry into the low power mode or by</div><div class="t m0 x9 hf yacf ff3 fs5 fc0 sc0 ls0 ws0">setting the Doze enable bit in selected modules.</div><div class="t m0 x9 hf yad0 ff3 fs5 fc0 sc0 ls0 ws0">Once the DMA request that initiated the wakeup negates and the DMA completes the</div><div class="t m0 x9 hf yad1 ff3 fs5 fc0 sc0 ls0 ws0">current transfer, the device will transition back into the original low power mode. This</div><div class="t m0 x9 hf yad2 ff3 fs5 fc0 sc0 ls0 ws0">includes requesting all non-CPU bus masters to enter Stop mode and then requesting bus</div><div class="t m0 x9 hf yad3 ff3 fs5 fc0 sc0 ls0 ws0">slaves to enter Stop mode. In STOP and VLPS modes the MCG and PMC would then</div><div class="t m0 x9 hf yad4 ff3 fs5 fc0 sc0 ls0 ws0">also enter their appropriate modes.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Clocking Modes</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">138<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
