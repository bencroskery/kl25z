<div id="pf9d" class="pf w0 h0" data-page-no="9d"><div class="pc pc9d w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg9d.png"/><div class="t m0 x9 hd y150 ff1 fs7 fc0 sc0 ls0 ws0">9.5<span class="_ _b"> </span>Micro Trace Buffer (MTB)</div><div class="t m0 x9 hf y151 ff3 fs5 fc0 sc0 ls0 ws0">The Micro Trace Buffer (MTB) provides a simple execution trace capability for the</div><div class="t m0 x9 hf y152 ff3 fs5 fc0 sc0 ls0 ws0">Cortex-M0+ processor. When enabled, the MTB records changes in program flow</div><div class="t m0 x9 hf y825 ff3 fs5 fc0 sc0 ls0 ws0">reported by the Cortex-M0+ processor, via the execution trace interface, into a</div><div class="t m0 x9 hf y94e ff3 fs5 fc0 sc0 ls0 ws0">configurable region of the SRAM. Subsequently an off-chip debugger may extract the</div><div class="t m0 x9 hf y94f ff3 fs5 fc0 sc0 ls0 ws0">trace information, which would allow reconstruction of an instruction flow trace. The</div><div class="t m0 x9 hf ybe3 ff3 fs5 fc0 sc0 ls0 ws0">MTB does not include any form of load/store data trace capability or tracing of any other</div><div class="t m0 x9 hf yc84 ff3 fs5 fc0 sc0 ls0">information.</div><div class="t m0 x9 hf ybe5 ff3 fs5 fc0 sc0 ls0 ws0">In addition to providing the trace capability, the MTB also operates as a simple AHB-Lite</div><div class="t m0 x9 hf ybe6 ff3 fs5 fc0 sc0 ls0 ws0">SRAM controller. The system bus masters, including the processor, have read/write</div><div class="t m0 x9 hf ybe7 ff3 fs5 fc0 sc0 ls0 ws0">access to all of the SRAM via the AHB-Lite interface, allowing the memory to also be</div><div class="t m0 x9 hf yc85 ff3 fs5 fc0 sc0 ls0 ws0">used to store program and data information. The MTB simultaneously stores the trace</div><div class="t m0 x9 hf yc86 ff3 fs5 fc0 sc0 ls0 ws0">information into an attached SRAM and allows bus masters to access the memory. The</div><div class="t m0 x9 hf yc87 ff3 fs5 fc0 sc0 ls0 ws0">MTB ensures that trace information write accesses to the SRAM take priority over</div><div class="t m0 x9 hf yc88 ff3 fs5 fc0 sc0 ls0 ws0">accesses from the AHB-Lite interface.</div><div class="t m0 x9 hf yc89 ff3 fs5 fc0 sc0 ls0 ws0">The MTB includes trace control registers for configuring and triggering the MTB</div><div class="t m0 x9 hf yc8a ff3 fs5 fc0 sc0 ls0 ws0">functions. The MTB also supports triggering via TSTART and TSTOP control functions</div><div class="t m0 x9 hf yc8b ff3 fs5 fc0 sc0 ls0 ws0">in the MTB DWT module.</div><div class="t m0 x9 hd yc8c ff1 fs7 fc0 sc0 ls0 ws0">9.6<span class="_ _b"> </span>Debug in Low Power Modes</div><div class="t m0 x9 hf yc8d ff3 fs5 fc0 sc0 ls0 ws0">In low power modes in which the debug modules are kept static or powered off, the</div><div class="t m0 x9 hf yc8e ff3 fs5 fc0 sc0 ls0 ws0">debugger cannot gather any debug data for the duration of the low power mode. In the</div><div class="t m0 x9 hf yc8f ff3 fs5 fc0 sc0 ls0 ws0">case that the debugger is held static, the debug port returns to full functionality as soon as</div><div class="t m0 x9 hf yc90 ff3 fs5 fc0 sc0 ls0 ws0">the low power mode exits and the system returns to a state with active debug. In the case</div><div class="t m0 x9 hf yc91 ff3 fs5 fc0 sc0 ls0 ws0">that the debugger logic is powered off, the debugger is reset on recovery and must be</div><div class="t m0 x9 hf yc92 ff3 fs5 fc0 sc0 ls0 ws0">reconfigured once the low power mode is exited.</div><div class="t m0 x9 hd yc93 ff1 fs7 fc0 sc0 ls0 ws0">9.7<span class="_ _b"> </span>Debug &amp; Security</div><div class="t m0 x9 hf yc94 ff3 fs5 fc0 sc0 ls0 ws0">When flash security is enabled, the debug port capabilities are limited in order to prevent</div><div class="t m0 x9 hf yc95 ff3 fs5 fc0 sc0 ls0 ws0">exploitation of secure data. In the secure state the debugger still has access to the status</div><div class="t m0 x9 hf yc96 ff3 fs5 fc0 sc0 ls0 ws0">register and can determine the current security state of the device. In the case of a secure</div><div class="t m0 x9 hf yc97 ff3 fs5 fc0 sc0 ls0 ws0">device, the debugger only has the capability of performing a mass erase operation.</div><div class="t m0 x113 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 9 Debug</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>157</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
