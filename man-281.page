<div id="pf119" class="pf w0 h0" data-page-no="119"><div class="pc pc119 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg119.png"/><div class="t m0 x9 he y17c ff1 fs1 fc0 sc0 ls0 ws0">17.4.2<span class="_ _b"> </span>BME Decorated Loads</div><div class="t m0 x9 hf y17d ff3 fs5 fc0 sc0 ls0 ws0">The functions supported by the BME&apos;s decorated loads include two single-bit load-and-</div><div class="t m0 x9 hf y80d ff3 fs5 fc0 sc0 ls0 ws0">{set, clear} operators plus unsigned bit field extracts. For the two load-and-{set, clear}</div><div class="t m0 x9 hf y80e ff3 fs5 fc0 sc0 ls0 ws0">operations, BME converts a single decorated AHB load transaction into a 2-cycle atomic</div><div class="t m0 x9 hf y80f ff3 fs5 fc0 sc0 ls0 ws0">read-modify-write sequence, where the combined read-modify operations are performed</div><div class="t m0 x9 hf y1919 ff3 fs5 fc0 sc0 ls0 ws0">in the first AHB data phase, and then the write is performed in the second AHB data</div><div class="t m0 x9 hf y191a ff3 fs5 fc0 sc0 ls0 ws0">phase as the original read data is returned to the processor core. For an unsigned bit field</div><div class="t m0 x9 hf y191b ff3 fs5 fc0 sc0 ls0 ws0">extract, the decorated load transaction is stalled for one cycle in the BME as the data field</div><div class="t m0 x9 hf y191c ff3 fs5 fc0 sc0 ls0 ws0">is extracted, then aligned and returned to the processor in the 2nd AHB data phase. This</div><div class="t m0 x9 hf y191d ff3 fs5 fc0 sc0 ls0 ws0">is the only decorated transaction that is not an atomic read-modify-write, as it is a simple</div><div class="t m0 x9 hf y191e ff3 fs5 fc0 sc0 ls0 ws0">data read.</div><div class="t m0 x9 hf y191f ff3 fs5 fc0 sc0 ls0 ws0">A generic timing diagram of a decorated load showing a load-and-set 1-bit operation is</div><div class="t m0 x9 hf y1920 ff3 fs5 fc0 sc0 ls0 ws0">shown as follows.</div><div class="c x97 y1921 w29 hab"><div class="t m17 x67 h9d y1922 ff2 fs4f fc0 sc0 ls0 ws2c5">x<span class="_ _6f"> </span>x+1<span class="_ _1a3"> </span>x+2 x+3</div><div class="t m1c xd h9e y1923 ff2 fs4 fc0 sc0 ls0 ws190">next<span class="ff3 fs50 ws0"> </span></div><div class="t m1c x83 h9e y1924 ff2 fs4 fc0 sc0 ls110 ws2d9">4c.v_wxyz<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m1c xd h9e y1925 ff2 fs4 fc0 sc0 ls0 ws190">next<span class="ff3 fs50 ws0"> </span></div><div class="t m1c xd h9e y1926 ff2 fs4 fc0 sc0 ls0 ws190">next<span class="ff3 fs50 ws0"> </span></div><div class="t m1c x10b h9e y1927 ff2 fs4 fc0 sc0 ls0 ws2da">400v_wxyz 400v_wxyz<span class="ff3 fs50 ls1cf ws0"> </span><span class="ws190 v1b">next<span class="ff3 fs50 ws0"> </span></span></div><div class="t m1c xa0 h9e y1928 ff2 fs4 fc0 sc0 ls0 ws190">next<span class="ff3 fs50 ws0"> </span></div><div class="t m1c xd8 h9e y1929 ff2 fs4 fc0 sc0 ls0 ws190">4c.v_wxyz<span class="ff3 fs50 ws0"> </span></div><div class="t m1c xa3 h9e y192a ff2 fs4 fc0 sc0 ls0 ws0">rdata + 1bit<span class="ff3 fs50"> </span></div><div class="t m1c xa3 h9e y1929 ff2 fs4 fc0 sc0 ls0 ws0">rdata + 1bit<span class="ff3 fs50"> </span></div><div class="t m1c xa0 h9e y192b ff2 fs4 fc0 sc0 ls0 ws190">next<span class="ff3 fs50 ws0"> </span></div><div class="t m1c x1e h9e y192c ff2 fs4 fc0 sc0 ls0 ws190">rdata<span class="ff3 fs50 ws0"> </span></div><div class="t m1c xe9 h7 y192d ff2 fs4 fc0 sc0 ls0 ws190">orig_1bit</div><div class="t m17 xb5 h9e y192e ff2 fs4f fc0 sc0 ls182 ws0">CYCLE RULER<span class="ff3 fs50 ls0"> </span></div><div class="t m17 x3a h9e y192f ff2 fs4f fc0 sc0 ls0 ws2c7">hclk<span class="ff3 fs50 ws0"> </span></div><div class="t m17 xc0 h9e y1930 ff2 fs4f fc0 sc0 ls1cc ws0">BME AHB Input Bus<span class="ff3 fs50 ls0"> </span></div><div class="t m17 x2c h9e y1931 ff2 fs4f fc0 sc0 ls1cc ws2c8">mx_haddr<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 xf6 h9e y1932 ff2 fs4f fc0 sc0 ls1cc ws2c8">mx_hattr<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x2c h9e y1933 ff2 fs4f fc0 sc0 ls182 ws2c9">mx_hwrite<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x11d h9e y1934 ff2 fs4f fc0 sc0 ls1cc ws2c8">mx_hwdata<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x9 h9e y1935 ff2 fs4f fc0 sc0 ls1cc ws2c8">mx_hrdata<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 xd2 h9e y1936 ff2 fs4f fc0 sc0 ls1cc ws2c8">mx_hready<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 xf9 h9e y1937 ff2 fs4f fc0 sc0 ls1cc ws0">BME AHB Output Bus<span class="ff3 fs50 ls0"> </span></div><div class="t m17 x118 h9e y1938 ff2 fs4f fc0 sc0 ls1cc ws2c8">sx_haddr<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x88 h9e y1939 ff2 fs4f fc0 sc0 ls182 ws2c9">sx_hattr<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x118 h9e y193a ff2 fs4f fc0 sc0 ls182 ws2c9">sx_hwrite<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x120 h9e y193b ff2 fs4f fc0 sc0 ls0 ws2c7">sx_hwdata<span class="ff3 fs50 ws0"> </span></div><div class="t m17 x2c h9e y193c ff2 fs4f fc0 sc0 ls0 ws2c7">sx_hrdata<span class="ff3 fs50 ws0"> </span></div><div class="t m17 x9 h9e y193d ff2 fs4f fc0 sc0 ls1cc ws2c8">sx_hready<span class="ff3 fs50 ls0 ws0"> </span></div><div class="t m17 x0 h9e y193e ff2 fs4f fc0 sc0 ls182 ws0">BME States + Datapath<span class="ff3 fs50 ls0"> </span></div><div class="t m17 xcf h9e y193f ff2 fs4f fc0 sc0 ls0 ws2c7">control_state_dp1<span class="ff3 fs50 ws0"> </span></div><div class="t m17 xcf h9e y1940 ff2 fs4f fc0 sc0 ls0 ws2c7">control_state_dp2<span class="ff3 fs50 ws0"> </span></div><div class="t m17 xcd h9d y1941 ff2 fs4f fc0 sc0 ls1cc ws2c8">reg_addr_data_dp</div></div><div class="t m0 x8e h9 y1942 ff1 fs2 fc0 sc0 ls0 ws0">Figure 17-7. Decorated load: load-and-set 1-bit field insert timing diagram</div><div class="t m0 x9 hf y1943 ff3 fs5 fc0 sc0 ls0 ws0">Decorated load-and-{set, clear} 1-bit operations follow the execution template shown in</div><div class="t m0 x9 hf y1944 ff3 fs5 fc0 sc0 ls0 ws0">the above figure: a 2-cycle read-modify-write operation:</div><div class="t m0 xeb h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 17 Bit Manipulation Engine (BME)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>281</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
