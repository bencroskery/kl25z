<div id="pf11d" class="pf w0 h0" data-page-no="11d"><div class="pc pc11d w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg11d.png"/><div class="t m0 x9 h1b y2d7 ff1 fsc fc0 sc0 ls0 ws0">17.4.2.2<span class="_ _b"> </span>Decorated Load: Load-and-Set 1 Bit (LAS1)</div><div class="t m0 x9 hf ybf ff3 fs5 fc0 sc0 ls0 ws0">This command loads a 1-bit field defined by the LSB position (b) into the core&apos;s general</div><div class="t m0 x9 hf y282 ff3 fs5 fc0 sc0 ls0 ws0">purpose destination register (Rt) and sets the bit in the memory space after performing an</div><div class="t m0 x9 hf y283 ff3 fs5 fc0 sc0 ls0 ws0">atomic read-modify-write sequence.</div><div class="t m0 x9 hf ya31 ff3 fs5 fc0 sc0 ls0 ws0">The extracted one bit data field from the memory address is right justified and zero filled</div><div class="t m0 x9 hf ya19 ff3 fs5 fc0 sc0 ls0 ws0">in the operand returned to the core.</div><div class="t m0 x9 hf ya75 ff3 fs5 fc0 sc0 ls0 ws0">The data size is specified by the read operation and can be byte (8-bit), halfword (16-bit)</div><div class="t m0 x9 hf y62c ff3 fs5 fc0 sc0 ls0 ws0">or word (32-bit).</div><div class="c x9 y1998 w2f hb2"><div class="t m1e x112 hb3 y1999 ff2 fs57 fc0 sc0 ls0 ws2e1">31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10<span class="_ _186"> </span>9<span class="_ _189"> </span>8<span class="_ _189"> </span>7<span class="_ _189"> </span>6<span class="_ _18d"> </span>5<span class="_ _189"> </span>4<span class="_ _189"> </span>3<span class="_ _189"> </span>2<span class="_ _189"> </span>1<span class="_ _189"> </span>0</div><div class="t m1f x0 hb4 y199a ff6 fs58 fc0 sc0 ls1d2 ws2e2">iolas1b <span class="ff2 ls0 ws2e3">0 1 0 0 1 1<span class="_ _189"> </span>-<span class="_ _7"> </span>-<span class="_ _189"> </span>b b<span class="_ _90"> </span>b<span class="_ _189"> </span>-<span class="_ _1a4"> </span>mem_addr</span></div><div class="t m1f x0 hb5 y199b ff6 fs58 fc0 sc0 ls1d2 ws2e4">iolas1h <span class="ff2 ls0 ws2e5 v0">0 1 0 0 1 1<span class="_ _18d"> </span>-<span class="_ _189"> </span>b b b b<span class="_ _189"> </span>-<span class="_ _1a5"> </span>mem_addr<span class="_ _1a8"> </span>0</span></div><div class="t m1f x0 hb6 y199c ff6 fs58 fc0 sc0 ls1d2 ws2e4">iolas1w <span class="ff2 ls0 ws2e6 v0">0 1 0 0 1 1 b b<span class="_ _8f"> </span>b b b<span class="_ _18d"> </span>-<span class="_ _1a9"> </span>mem_addr<span class="_ _20"> </span>0 0</span></div></div><div class="t m0 xd0 h9 y199d ff1 fs2 fc0 sc0 ls0 ws0">Figure 17-10. Decorated load address: load-and-set 1 bit</div><div class="t m0 x9 hf y199e ff3 fs5 fc0 sc0 ls0 ws0">where addr[28:26] = 011 specifies the load-and-set 1 bit operation, addr[25:21] is &quot;b&quot;, the</div><div class="t m0 x9 hf y199f ff3 fs5 fc0 sc0 ls0 ws0">bit identifier, and mem_addr[19:0] specifies the address offset into the peripheral space</div><div class="t m0 x9 hf y19a0 ff3 fs5 fc0 sc0 ls0 ws0">based at 0x4000_0000. The &quot;-&quot; indicates an address bit &quot;don&apos;t care&quot;.</div><div class="t m0 x9 hf y19a1 ff3 fs5 fc0 sc0 ls0 ws0">The decorated Load-and-Set 1 Bit read operation is defined in the following pseudo-code</div><div class="t m0 x9 hf y19a2 ff3 fs5 fc0 sc0 ls0">as:</div><div class="t m0 x9 ha5 y19a3 ff6 fs4 fc0 sc0 ls0 ws0">rdata =  iolas1&lt;sz&gt;(accessAddress)              // decorated load-and-set 1</div><div class="t m0 x9 ha5 y19a4 ff6 fs4 fc0 sc0 ls0 ws0">tmp   =  mem[accessAddress &amp; 0xE00FFFFF, size]  // memory read</div><div class="t m0 x9 ha5 y19a5 ff6 fs4 fc0 sc0 ls0 ws0">mask  =  1 &lt;&lt; b                                 // generate bit mask</div><div class="t m0 x9 ha5 y19a6 ff6 fs4 fc0 sc0 ls0 ws0">rdata = (tmp &amp;  mask) &gt;&gt; b                      // read data returned to core</div><div class="t m0 x9 ha5 y19a7 ff6 fs4 fc0 sc0 ls0 ws0">tmp   =  tmp |  mask                            // modify</div><div class="t m0 x9 ha5 y19a8 ff6 fs4 fc0 sc0 ls0 ws0">mem[accessAddress &amp; 0xE00FFFFF, size] = tmp     // memory write</div><div class="t m0 x9 hf y19a9 ff3 fs5 fc0 sc0 ls0 ws0">The cycle-by-cycle BME operations are detailed in the following table.</div><div class="t m0 xbe h9 y19aa ff1 fs2 fc0 sc0 ls0 ws0">Table 17-6.<span class="_ _1a"> </span>Cycle definitions of decorated load: load-and-set 1-bit</div><div class="t m0 x94 h10 y19ab ff1 fs4 fc0 sc0 ls0 ws0">Pipeline Stage<span class="_ _11a"> </span>Cycle</div><div class="t m0 x27 h10 y19ac ff1 fs4 fc0 sc0 ls0 ws2ce">x<span class="_ _133"> </span>x+1 x+2</div><div class="t m0 x97 h7 y19ad ff2 fs4 fc0 sc0 ls0 ws0">BME AHB_ap<span class="_ _103"> </span>Forward addr to memory;</div><div class="t m0 x15 h7 y19ae ff2 fs4 fc0 sc0 ls0 ws0">Decode decoration; Capture</div><div class="t m0 x15 h7 y19af ff2 fs4 fc0 sc0 ls0 ws0">address, attributes</div><div class="t m0 x2d h7 y19ad ff2 fs4 fc0 sc0 ls0 ws0">Recirculate captured addr +</div><div class="t m0 x2d h7 y19ae ff2 fs4 fc0 sc0 ls0 ws0">attr to memory as slave_wt</div><div class="t m0 x141 h7 y19ad ff2 fs4 fc0 sc0 ls0">&lt;next&gt;</div><div class="t m0 x97 h7 y19b0 ff2 fs4 fc0 sc0 ls0 ws0">BME AHB_dp<span class="_ _30"> </span>&lt;previous&gt;<span class="_ _98"> </span>Perform memory read; Form</div><div class="t m0 x2d h7 y19b1 ff2 fs4 fc0 sc0 ls0 ws0">bit mask; Extract bit from</div><div class="t m0 x2d h7 y19b2 ff2 fs4 fc0 sc0 ls0 ws0">rdata; Form (rdata | mask)</div><div class="t m0 x2d h7 y19b3 ff2 fs4 fc0 sc0 ls0 ws0">and capture destination data</div><div class="t m0 x2d h7 y19b4 ff2 fs4 fc0 sc0 ls0 ws0">in register</div><div class="t m0 x72 h7 y19b0 ff2 fs4 fc0 sc0 ls0 ws0">Return extracted bit to master;</div><div class="t m0 x72 h7 y19b1 ff2 fs4 fc0 sc0 ls0 ws0">Perform write sending</div><div class="t m0 x72 h7 y19b2 ff2 fs4 fc0 sc0 ls0 ws0">registered data to memory</div><div class="t m0 xeb h10 y17b ff1 fs4 fc0 sc0 ls0 ws0">Chapter 17 Bit Manipulation Engine (BME)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>285</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
