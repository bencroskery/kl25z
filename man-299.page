<div id="pf12b" class="pf w0 h0" data-page-no="12b"><div class="pc pc12b w0 h0"><img class="bi x0 ya5 w2 hb" alt="" src="bg12b.png"/><div class="t m0 x9 hc ya6 ff1 fs6 fc0 sc0 ls0 ws0">Chapter 19</div><div class="t m0 x9 hc ya7 ff1 fs6 fc0 sc0 ls0 ws0">Micro Trace Buffer (MTB)</div><div class="t m0 x9 hd ya8 ff1 fs7 fc0 sc0 ls0 ws281">19.1 Introduction</div><div class="t m0 x9 hf yde ff3 fs5 fc0 sc0 ls0 ws0">Microcontrollers using the Cortex-M0+ processor core include support for a CoreSight</div><div class="t m0 x9 hf ydf ff3 fs5 fc0 sc0 ls0 ws0">Micro Trace Buffer to provide program trace capabilities. The proper name for this</div><div class="t m0 x9 hf ye0 ff3 fs5 fc0 sc0 ls0 ws0">function is the CoreSight Micro Trace Buffer for the Cortex-M0+ Processor; in this</div><div class="t m0 x9 hf y1817 ff3 fs5 fc0 sc0 ls0 ws0">document, it is simply abbreviated as the MTB.</div><div class="t m0 x9 hf ya38 ff3 fs5 fc0 sc0 ls0 ws0">The simple program trace function creates instruction address change-of-flow data</div><div class="t m0 x9 hf y1a97 ff3 fs5 fc0 sc0 ls0 ws0">packets in a user-defined region of the system RAM. Accordingly, the system RAM</div><div class="t m0 x9 hf y1a98 ff3 fs5 fc0 sc0 ls0 ws0">controller manages requests from two sources:</div><div class="t m0 x33 hf y1a99 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>AMBA-AHB reads and writes from the system bus</div><div class="t m0 x33 hf y1a9a ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>program trace packet writes from the processor</div><div class="t m0 x9 hf y1a9b ff3 fs5 fc0 sc0 ls0 ws0">As part of the MTB functionality, there is a DWT (Data Watchpoint and Trace) module</div><div class="t m0 x9 hf yab0 ff3 fs5 fc0 sc0 ls0 ws0">that allows the user to define watchpoint addresses, or optionally, an address and data</div><div class="t m0 x9 hf yab1 ff3 fs5 fc0 sc0 ls0 ws0">value, that when triggered, can be used to start or stop the program trace recording.</div><div class="t m0 x9 hf y1a9c ff3 fs5 fc0 sc0 ls0 ws0">This document details the functionality of both the MTB_RAM and MTB_DWT</div><div class="t m0 x9 hf y1a9d ff3 fs5 fc0 sc0 ls0">capabilities.</div><div class="t m0 x9 he y1a9e ff1 fs1 fc0 sc0 ls0 ws18f">19.1.1 Overview</div><div class="t m0 x9 hf y1a9f ff3 fs5 fc0 sc0 ls0 ws0">A generic block diagram of the processor core and platform for this class of ultra low-end</div><div class="t m0 x9 hf y1aa0 ff3 fs5 fc0 sc0 ls0 ws0">microcontrollers is shown as follows:</div><div class="t m0 x8 h6 ybc ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ybd ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>299</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
