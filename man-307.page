<div id="pf133" class="pf w0 h0" data-page-no="133"><div class="pc pc133 w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg133.png"/><div class="t m0 x9 he y1c7 ff1 fs1 fc0 sc0 ls0 ws0">19.31.2<span class="_ _b"> </span>MTB Master Register (MTB_MASTER)</div><div class="t m0 x9 hf y1c8 ff3 fs5 fc0 sc0 ls0 ws0">The MTB_MASTER register contains the main program trace enable plus other trace</div><div class="t m0 x9 hf y9de ff3 fs5 fc0 sc0 ls0 ws0">controls. This register can be modified by the explicit programming model writes.</div><div class="t m0 x9 hf y9df ff3 fs5 fc0 sc0 ls0 ws0">MTB_MASTER[EN] and MTB_MASTER[HALTREQ] fields are also automatically</div><div class="t m0 x9 hf y15ad ff3 fs5 fc0 sc0 ls0 ws0">updated by the MTB hardware.</div><div class="t m0 x9 hf y9e1 ff3 fs5 fc0 sc0 ls0 ws0">Before the MTB_MASTER[EN] or MTB_MASTER[TSTARTEN] bits are set to 1,</div><div class="t m0 x9 hf y9e2 ff3 fs5 fc0 sc0 ls0 ws0">software must initialize the MTB_POSITION and MTB_FLOW registers.</div><div class="t m0 x9 hf y1b98 ff3 fs5 fc0 sc0 ls0 ws0">If the MTB_FLOW[WATERMARK] field is used to stop tracing or to halt the processor,</div><div class="t m0 x9 hf y14a7 ff3 fs5 fc0 sc0 ls0 ws0">the MTB_MASTER[MASK] field must still be set to a value that prevents the</div><div class="t m0 x9 hf y14f8 ff3 fs5 fc0 sc0 ls0 ws0">MTB_POSITION[POINTER] field from wrapping before it reaches the</div><div class="t m0 x9 hf y1b99 ff3 fs5 fc0 sc0 ls0 ws0">MTB_FLOW[WATERMARK] value.</div><div class="t m0 x10e h8 y1b9a ff1 fs5 fc0 sc0 ls0">NOTE</div><div class="t m0 x3e hf y186a ff3 fs5 fc0 sc0 ls0 ws0">The format of this mask field is different than the</div><div class="t m0 x3e hf y1531 ff3 fs5 fc0 sc0 ls0">MTBDWT_MASKn[MASK].</div><div class="t m0 x9 h7 y1b9b ff2 fs4 fc0 sc0 ls0 ws0">Address: F000_0000h base + 4h offset = F000_0004h</div><div class="t m0 xb9 h1d y1b9c ff2 fsd fc0 sc0 ls0 ws24f">Bit<span class="_ _187"> </span>31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16</div><div class="t m0 x50 h1d y1b9d ff2 fsd fc0 sc0 ls0">R</div><div class="t m0 x37 h7 y1b9e ff2 fs4 fc0 sc0 ls0">EN</div><div class="t m0 xa5 h7 y1b9f ff2 fs4 fc0 sc0 ls0">0</div><div class="t m0 x91 h1d y1ba0 ff2 fsd fc0 sc0 ls0">W</div><div class="t m0 x2c h7 y1ba1 ff2 fs4 fc0 sc0 ls0 ws251">Reset <span class="ws252 v1b">0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></div><div class="t m0 xb9 h72 y1ba2 ff2 fsd fc0 sc0 ls0 ws253">Bit <span class="ws24f v0">15 14 13 12 11 10<span class="_ _142"> </span>9<span class="_ _163"> </span>8<span class="_ _163"> </span>7<span class="_ _5b"> </span>6<span class="_ _163"> </span>5<span class="_ _5b"> </span>4<span class="_ _163"> </span>3<span class="_ _163"> </span>2<span class="_ _5b"> </span>1<span class="_ _163"> </span>0</span></div><div class="t m0 x50 h71 y1ba3 ff2 fsd fc0 sc0 ls1d8">R<span class="fs4 ls0 v11">0</span></div><div class="t m2 xb h7 y1ba4 ff2 fs4 fc0 sc0 ls0">HALTREQ</div><div class="t m2 x2d h7 y1ba5 ff2 fs4 fc0 sc0 ls0">RAMPRIV</div><div class="t m2 x6 h7 y1ba6 ff2 fs4 fc0 sc0 ls0">SFRWPRIV</div><div class="t m2 x6f h7 y1ba4 ff2 fs4 fc0 sc0 ls0">TSTOPEN</div><div class="t m2 xb3 h7 y1ba6 ff2 fs4 fc0 sc0 ls0">TSTARTEN</div><div class="t m0 x98 h7 y1ba7 ff2 fs4 fc0 sc0 ls0">MASK</div><div class="t m0 x91 h1d y1ba8 ff2 fsd fc0 sc0 ls0">W</div><div class="t m0 x2c h7 y1ba9 ff2 fs4 fc0 sc0 ls0 ws251">Reset <span class="ws252 v1b">0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0</span></div><div class="t m0 x17 h9 y1baa ff1 fs2 fc0 sc0 ls0 ws0">MTB_MASTER field descriptions</div><div class="t m0 x12c h10 y1bab ff1 fs4 fc0 sc0 ls0 ws259">Field Description</div><div class="t m0 x94 h7 y1bac ff2 fs4 fc0 sc0 ls0">31</div><div class="t m0 x8b h7 y1bad ff2 fs4 fc0 sc0 ls0">EN</div><div class="t m0 x83 h7 y1bac ff2 fs4 fc0 sc0 ls0 ws0">Main trace enable bit</div><div class="t m0 x83 h7 y1bae ff2 fs4 fc0 sc0 ls0 ws0">When this bit is 1, trace data is written into the RAM memory location addressed by</div><div class="t m0 x83 h7 y1baf ff2 fs4 fc0 sc0 ls0 ws0">MTB_POSITION[POINTER]. The MTB_POSITION[POINTER] value auto increments after the trace data</div><div class="t m0 x83 h7 y1bb0 ff2 fs4 fc0 sc0 ls0 ws0">packet is written.</div><div class="t m0 x83 h7 y1bb1 ff2 fs4 fc0 sc0 ls0 ws0">The EN bit can be automatically set to 0 using the MTB_FLOW[WATERMARK] field and the</div><div class="t m0 x83 h7 y1bb2 ff2 fs4 fc0 sc0 ls0 ws0">MTB_FLOW[AUTOSTOP] bit.</div><div class="t m0 x83 h7 y1bb3 ff2 fs4 fc0 sc0 ls0 ws0">The EN bit is automatically set to 1 if the TSTARTEN bit is 1 and the TSTART signal is HIGH.</div><div class="t m0 x83 h7 y1bb4 ff2 fs4 fc0 sc0 ls0 ws0">The EN bit is automatically set to 0 if TSTOPEN bit is 1 and the TSTOP signal is HIGH.</div><div class="t m0 x1b h7 y1bb5 ff5 fs4 fc0 sc0 ls0 ws0">Table continues on the next page...</div><div class="t m0 x80 h10 y17b ff1 fs4 fc0 sc0 ls0 ws0">Chapter 19 Micro Trace Buffer (MTB)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>307</div><a class="l" href="#pf133" data-dest-detail='[307,"XYZ",null,186,null]'><div class="d m1" style="border-style:none;position:absolute;left:92.220100px;bottom:362.250000px;width:12.500900px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,638.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:333.145000px;bottom:375.750000px;width:5.004000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,638.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:170.086000px;bottom:287.500000px;width:5.004000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,612.417,null]'><div class="d m1" style="border-style:none;position:absolute;left:271.853000px;bottom:254.997000px;width:9.000000px;height:42.507000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,542.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:301.500000px;bottom:255.748000px;width:9.000000px;height:41.004000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,484.417,null]'><div class="d m1" style="border-style:none;position:absolute;left:331.147000px;bottom:252.499000px;width:9.000000px;height:47.502000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,414.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:360.794000px;bottom:254.997000px;width:9.000000px;height:42.507000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,367.417,null]'><div class="d m1" style="border-style:none;position:absolute;left:390.441000px;bottom:252.499000px;width:9.000000px;height:47.502000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf134" data-dest-detail='[308,"XYZ",null,319.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:471.129000px;bottom:271.750000px;width:25.506000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
