<div id="pf159" class="pf w0 h0" data-page-no="159"><div class="pc pc159 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg159.png"/><div class="t m0 xf6 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Ensure that the DMA channel is properly configured in the DMA. The DMA channel</div><div class="t m0 x117 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">may be enabled at this point.</div><div class="t m0 xf6 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Configure the corresponding timer.</div><div class="t m0 xf6 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">5.<span class="_ _11"> </span>Select the source to be routed to the DMA channel. Write to the corresponding</div><div class="t m0 x117 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">CHCFG register, ensuring that the CHCFG[ENBL] and CHCFG[TRIG] fields are</div><div class="t m0 x117 hf yfb ff3 fs5 fc0 sc0 ls0">set.</div><div class="t m0 x10e h8 y1e56 ff1 fs5 fc0 sc0 ls0">NOTE</div><div class="t m0 x3e hf y1b0e ff3 fs5 fc0 sc0 ls0 ws0">The following is an example. See chip configuration section for</div><div class="t m0 x3e hf y1e57 ff3 fs5 fc0 sc0 ls0 ws0">the number of this device&apos;s DMA channels that have triggering</div><div class="t m0 x3e hf y1e58 ff3 fs5 fc0 sc0 ls0">capability.</div><div class="t m0 x9 hf y5db ff3 fs5 fc0 sc0 ls0 ws0">To configure source #5 transmit for use with DMA channel 2, with periodic triggering</div><div class="t m0 x9 hf y5dc ff3 fs5 fc0 sc0 ls0">capability:</div><div class="t m0 xf6 hf y1e59 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Write 0x00 to CHCFG2 (base address + 0x02).</div><div class="t m0 xf6 hf y1e5a ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Configure channel 2 in the DMA, including enabling the channel.</div><div class="t m0 xf6 hf y1e5b ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Configure a timer for the desired trigger interval.</div><div class="t m0 xf6 hf y1949 ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Write 0xC5 to CHCFG2 (base address + 0x02).</div><div class="t m0 x9 hf ya7a ff3 fs5 fc0 sc0 ls0 ws0">The following code example illustrates steps 1 and 4 above:</div><div class="t m0 x9 ha5 y1e5c ff6 fs4 fc0 sc0 ls0 ws0">In File registers.h:</div><div class="t m0 x9 ha5 y1e5d ff6 fs4 fc0 sc0 ls0 ws0">#define DMAMUX_BASE_ADDR     0xFC084000/* Example only ! */</div><div class="t m0 x9 ha5 y1e5e ff6 fs4 fc0 sc0 ls0 ws0">/* Following example assumes char is 8-bits */</div><div class="t m0 x9 ha5 y1e5f ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG0 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0000);</div><div class="t m0 x9 ha5 y1e60 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG1 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0001);</div><div class="t m0 x9 ha5 y1e61 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG2 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0002);</div><div class="t m0 x9 ha5 y1e62 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG3 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0003);</div><div class="t m0 x9 ha5 y1e63 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG4 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0004);</div><div class="t m0 x9 ha5 y1e64 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG5 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0005);</div><div class="t m0 x9 ha5 y1e65 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG6 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0006);</div><div class="t m0 x9 ha5 y1e66 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG7 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0007);</div><div class="t m0 x9 ha5 y1e67 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG8 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0008);</div><div class="t m0 x9 ha5 y1e68 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG9 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0009);</div><div class="t m0 x9 ha5 y1e69 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG10= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000A);</div><div class="t m0 x9 ha5 y1e6a ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG11= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000B);</div><div class="t m0 x9 ha5 y1e6b ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG12= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000C);</div><div class="t m0 x9 ha5 y1e6c ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG13= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000D);</div><div class="t m0 x9 ha5 y1e6d ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG14= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000E);</div><div class="t m0 x9 ha5 y1e6e ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG15= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000F);</div><div class="t m0 x9 ha5 y1e6f ff6 fs4 fc0 sc0 ls0 ws0">In File main.c:</div><div class="t m0 x9 ha5 y1e70 ff6 fs4 fc0 sc0 ls0 ws0">#include &quot;registers.h&quot;</div><div class="t m0 x9 ha5 y1e71 ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1e72 ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1e73 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG2 = 0x00;</div><div class="t m0 x9 ha5 y1e74 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG2 = 0xC5;</div><div class="t m0 x9 hf y1e75 ff3 fs5 fc0 sc0 ls0 ws0">To enable a source without periodic triggering:</div><div class="t m0 xf6 hf y1e76 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Determine with which DMA channel the source will be associated. Note that only the</div><div class="t m0 x117 hf y1e77 ff3 fs5 fc0 sc0 ls0 ws0">first 2 DMA channels have periodic triggering capability.</div><div class="t m0 xf6 hf y1e78 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Clear the CHCFG[ENBL] and CHCFG[TRIG] fields of the DMA channel.</div><div class="t m0 xa0 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 22 Direct Memory Access Multiplexer (DMAMUX)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>345</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
