<div id="pf15a" class="pf w0 h0" data-page-no="15a"><div class="pc pc15a w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg15a.png"/><div class="t m0 xf6 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Ensure that the DMA channel is properly configured in the DMA. The DMA channel</div><div class="t m0 x117 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">may be enabled at this point.</div><div class="t m0 xf6 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Select the source to be routed to the DMA channel. Write to the corresponding</div><div class="t m0 x117 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">CHCFG register, ensuring that CHCFG[ENBL] is set while CHCFG[TRIG] is</div><div class="t m0 x117 hf yfa ff3 fs5 fc0 sc0 ls0">cleared.</div><div class="t m0 x10e h8 y1e79 ff1 fs5 fc0 sc0 ls0">NOTE</div><div class="t m0 x3e hf y1b0d ff3 fs5 fc0 sc0 ls0 ws0">The following is an example. See chip configuration section for</div><div class="t m0 x3e hf y1b0e ff3 fs5 fc0 sc0 ls0 ws0">the number of this device&apos;s DMA channels that have triggering</div><div class="t m0 x3e hf y1e57 ff3 fs5 fc0 sc0 ls0">capability.</div><div class="t m0 x9 hf y5da ff3 fs5 fc0 sc0 ls0 ws0">To configure source #5 transmit for use with DMA channel 2, with no periodic triggering</div><div class="t m0 x9 hf y5db ff3 fs5 fc0 sc0 ls0">capability:</div><div class="t m0 xf6 hf y5dc ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Write 0x00 to CHCFG2 (base address + 0x02).</div><div class="t m0 xf6 hf y1e59 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Configure channel 2 in the DMA, including enabling the channel.</div><div class="t m0 xf6 hf y1e5a ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Write 0x85 to CHCFG2 (base address + 0x02).</div><div class="t m0 x9 hf y1489 ff3 fs5 fc0 sc0 ls0 ws0">The following code example illustrates steps 1 and 3 above:</div><div class="t m0 x9 ha5 y1e7a ff6 fs4 fc0 sc0 ls0 ws0">In File registers.h:</div><div class="t m0 x9 ha5 y1e7b ff6 fs4 fc0 sc0 ls0 ws0">#define DMAMUX_BASE_ADDR     0xFC084000/* Example only ! */</div><div class="t m0 x9 ha5 y1e7c ff6 fs4 fc0 sc0 ls0 ws0">/* Following example assumes char is 8-bits */</div><div class="t m0 x9 ha5 y1e7d ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG0 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0000);</div><div class="t m0 x9 ha5 y1e7e ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG1 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0001);</div><div class="t m0 x9 ha5 y1e7f ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG2 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0002);</div><div class="t m0 x9 ha5 y1e80 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG3 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0003);</div><div class="t m0 x9 ha5 y1e81 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG4 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0004);</div><div class="t m0 x9 ha5 y1e82 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG5 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0005);</div><div class="t m0 x9 ha5 y1e83 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG6 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0006);</div><div class="t m0 x9 ha5 y1e84 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG7 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0007);</div><div class="t m0 x9 ha5 y1e85 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG8 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0008);</div><div class="t m0 x9 ha5 y1e86 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG9 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0009);</div><div class="t m0 x9 ha5 y1e87 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG10= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000A);</div><div class="t m0 x9 ha5 y1e88 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG11= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000B);</div><div class="t m0 x9 ha5 y1e89 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG12= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000C);</div><div class="t m0 x9 ha5 y1e8a ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG13= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000D);</div><div class="t m0 x9 ha5 y1e8b ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG14= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000E);</div><div class="t m0 x9 ha5 y1e8c ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG15= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000F);</div><div class="t m0 x9 ha5 y1e8d ff6 fs4 fc0 sc0 ls0 ws0">In File main.c:</div><div class="t m0 x9 ha5 y1e8e ff6 fs4 fc0 sc0 ls0 ws0">#include &quot;registers.h&quot;</div><div class="t m0 x9 ha5 y1e8f ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1e90 ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1e91 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG2 = 0x00;</div><div class="t m0 x9 ha5 y1e92 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG2 = 0x85;</div><div class="t m0 x9 hf y1e93 ff3 fs5 fc0 sc0 ls0 ws0">To disable a source:</div><div class="t m0 x9 hf y1e94 ff3 fs5 fc0 sc0 ls0 ws0">A particular DMA source may be disabled by not writing the corresponding source value</div><div class="t m0 x9 hf y1e95 ff3 fs5 fc0 sc0 ls0 ws0">into any of the CHCFG registers. Additionally, some module-specific configuration may</div><div class="t m0 x9 hf y1e96 ff3 fs5 fc0 sc0 ls0 ws0">be necessary. See the appropriate section for more details.</div><div class="t m0 x9 hf y1e97 ff3 fs5 fc0 sc0 ls0 ws0">To switch the source of a DMA channel:</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Initialization/application information</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">346<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
