<div id="pf15b" class="pf w0 h0" data-page-no="15b"><div class="pc pc15b w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg15b.png"/><div class="t m0 xf6 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Disable the DMA channel in the DMA and re-configure the channel for the new</div><div class="t m0 x117 hf yf7 ff3 fs5 fc0 sc0 ls0">source.</div><div class="t m0 xf6 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Clear the CHCFG[ENBL] and CHCFG[TRIG] bits of the DMA channel.</div><div class="t m0 xf6 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Select the source to be routed to the DMA channel. Write to the corresponding</div><div class="t m0 x117 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">CHCFG register, ensuring that the CHCFG[ENBL] and CHCFG[TRIG] fields are</div><div class="t m0 x117 hf yfb ff3 fs5 fc0 sc0 ls0">set.</div><div class="t m0 x9 hf y1b0d ff3 fs5 fc0 sc0 ls0 ws0">To switch DMA channel 8 from source #5 transmit to source #7 transmit:</div><div class="t m0 xf6 hf y1b0e ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>In the DMA configuration registers, disable DMA channel 8 and reconfigure it to</div><div class="t m0 x117 hf y1e57 ff3 fs5 fc0 sc0 ls0 ws0">handle the transfers to peripheral slot 7. This example assumes channel 8 doesn&apos;t</div><div class="t m0 x117 hf y1e58 ff3 fs5 fc0 sc0 ls0 ws0">have triggering capability.</div><div class="t m0 xf6 hf y1e98 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Write 0x00 to CHCFG8 (base address + 0x08).</div><div class="t m0 xf6 hf y1e99 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Write 0x87 to CHCFG8 (base address + 0x08). (In this example, setting</div><div class="t m0 x117 hf y1946 ff3 fs5 fc0 sc0 ls0 ws0">CHCFG[TRIG] would have no effect, due to the assumption that channel 8 does not</div><div class="t m0 x117 hf y1947 ff3 fs5 fc0 sc0 ls0 ws0">support the periodic triggering functionality).</div><div class="t m0 x9 hf y1b15 ff3 fs5 fc0 sc0 ls0 ws0">The following code example illustrates steps 2 and 3 above:</div><div class="t m0 x9 ha5 y1e9a ff6 fs4 fc0 sc0 ls0 ws0">In File registers.h:</div><div class="t m0 x9 ha5 y1e9b ff6 fs4 fc0 sc0 ls0 ws0">#define DMAMUX_BASE_ADDR     0xFC084000/* Example only ! */</div><div class="t m0 x9 ha5 y1e9c ff6 fs4 fc0 sc0 ls0 ws0">/* Following example assumes char is 8-bits */</div><div class="t m0 x9 ha5 y1e9d ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG0 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0000);</div><div class="t m0 x9 ha5 y1e9e ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG1 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0001);</div><div class="t m0 x9 ha5 y1e9f ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG2 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0002);</div><div class="t m0 x9 ha5 y1ea0 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG3 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0003);</div><div class="t m0 x9 ha5 y1ea1 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG4 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0004);</div><div class="t m0 x9 ha5 y1ea2 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG5 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0005);</div><div class="t m0 x9 ha5 y1ea3 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG6 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0006);</div><div class="t m0 x9 ha5 y1ea4 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG7 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0007);</div><div class="t m0 x9 ha5 y1ea5 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG8 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0008);</div><div class="t m0 x9 ha5 y1ea6 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG9 = (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x0009);</div><div class="t m0 x9 ha5 y1ea7 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG10= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000A);</div><div class="t m0 x9 ha5 y1ea8 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG11= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000B);</div><div class="t m0 x9 ha5 y1ea9 ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG12= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000C);</div><div class="t m0 x9 ha5 y1eaa ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG13= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000D);</div><div class="t m0 x9 ha5 y1eab ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG14= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000E);</div><div class="t m0 x9 ha5 y1eac ff6 fs4 fc0 sc0 ls0 ws0">volatile unsigned char *CHCONFIG15= (volatile unsigned char *) (DMAMUX_BASE_ADDR+0x000F);</div><div class="t m0 x9 ha5 y1ead ff6 fs4 fc0 sc0 ls0 ws0">In File main.c:</div><div class="t m0 x9 ha5 y1eae ff6 fs4 fc0 sc0 ls0 ws0">#include &quot;registers.h&quot;</div><div class="t m0 x9 ha5 y1eaf ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1eb0 ff6 fs4 fc0 sc0 ls0">:</div><div class="t m0 x9 ha5 y1eb1 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG8 = 0x00;</div><div class="t m0 x9 ha5 y1eb2 ff6 fs4 fc0 sc0 ls0 ws0">*CHCONFIG8 = 0x87;</div><div class="t m0 xa0 h10 y452 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 22 Direct Memory Access Multiplexer (DMAMUX)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>347</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
