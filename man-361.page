<div id="pf169" class="pf w0 h0" data-page-no="169"><div class="pc pc169 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg169.png"/><div class="t m0 x9 hd y150 ff1 fs7 fc0 sc0 ls0 ws0">23.4<span class="_ _b"> </span>Functional Description</div><div class="t m0 x9 hf y151 ff3 fs5 fc0 sc0 ls0 ws0">In the following discussion, the term DMA request implies that DCR<span class="ff4 ws1a6">n</span>[START] is set, or</div><div class="t m0 x9 hf y152 ff3 fs5 fc0 sc0 ls0 ws0">DCRn[ERQ] is set and then followed by assertion of the properly selected DMA</div><div class="t m0 x9 hf y825 ff3 fs5 fc0 sc0 ls0 ws0">peripheral request. The START bit is cleared when the channel is activated.</div><div class="t m0 x9 hf y826 ff3 fs5 fc0 sc0 ls0 ws0">Before initiating a dual-address access, the DMA module verifies that DCR<span class="ff4 ws1a6">n</span>[SSIZE] and</div><div class="t m0 x9 hf y827 ff3 fs5 fc0 sc0 ls0 ws1a6">DCR<span class="ff4">n</span><span class="ws0">[DSIZE] are consistent with the source and destination addresses. If they are not</span></div><div class="t m0 x9 hf y828 ff3 fs5 fc0 sc0 ls0 ws0">consistent, the configuration error bit, DSR<span class="ff4 lsae">n</span>[CE], is set. If misalignment is detected, no</div><div class="t m0 x9 hf y829 ff3 fs5 fc0 sc0 ls0 ws0">transfer occurs, DSR<span class="ff4 ws1a6">n</span>[CE] is set, and, depending on the DCR configuration, an interrupt</div><div class="t m0 x9 hf y82a ff3 fs5 fc0 sc0 ls0 ws0">event may be issued. If the auto-align bit, DCR<span class="ff4 ws1a6">n</span>[AA], is set, error checking is performed</div><div class="t m0 x9 hf y82b ff3 fs5 fc0 sc0 ls0 ws0">on the appropriate registers.</div><div class="t m0 x9 hf y201b ff3 fs5 fc0 sc0 ls0 ws0">A read/write transfer sequence reads data from the source address and writes it to the</div><div class="t m0 x9 hf y201c ff3 fs5 fc0 sc0 ls0 ws0">destination address. The number of bytes transferred is the largest of the sizes specified</div><div class="t m0 x9 hf y201d ff3 fs5 fc0 sc0 ls0 ws0">by DCR<span class="ff4 ws1a6">n</span>[SSIZE] and DCR<span class="ff4 ws1a6">n</span>[DSIZE] in the DMA Control Registers (DCRn).</div><div class="t m0 x9 hf y201e ff3 fs5 fc0 sc0 ls0 ws0">Source and destination address registers (SAR<span class="ff4 ls1f2">n</span> and DAR<span class="ff4 ws1a6">n</span>) can be programmed in the</div><div class="t m0 x9 hf y201f ff3 fs5 fc0 sc0 ls0 ws1a6">DCR<span class="ff4">n</span><span class="ws0"> to increment at the completion of a successful transfer.</span></div><div class="t m0 x9 he y2020 ff1 fs1 fc0 sc0 ls0 ws0">23.4.1<span class="_ _b"> </span>Transfer Requests (Cycle-Steal and Continuous Modes)</div><div class="t m0 x9 hf y2021 ff3 fs5 fc0 sc0 ls0 ws0">The DMA channel supports software-initiated or peripheral-initiated requests. A request</div><div class="t m0 x9 hf y2022 ff3 fs5 fc0 sc0 ls0 ws0">is issued by setting DCR<span class="ff4 ws1a6">n</span>[START] or when the selected peripheral request asserts and</div><div class="t m0 x9 hf y1d85 ff3 fs5 fc0 sc0 ls0 ws0">DCRn[ERQ] is set. Setting DCR<span class="ff4 ws1a6">n</span>[ERQ] enables recognition of the peripheral DMA</div><div class="t m0 x9 hf y1d86 ff3 fs5 fc0 sc0 ls0 ws0">requests. Selecting between cycle-steal and continuous modes minimizes bus usage for</div><div class="t m0 x9 hf y1d87 ff3 fs5 fc0 sc0 ls0 ws0">either type of request.</div><div class="t m0 x33 hf y1d88 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Cycle-steal mode (DCR<span class="ff4 ws1a6">n</span>[CS] = 1)—Only one complete transfer from source to</div><div class="t m0 x34 hf y1d89 ff3 fs5 fc0 sc0 ls0 ws0">destination occurs for each request. If DCRn[ERQ] is set, the request is peripheral</div><div class="t m0 x34 hf y1d8a ff3 fs5 fc0 sc0 ls0 ws0">initiated. A software-initiated request is enabled by setting DCR<span class="ff4 ws1a6">n</span>[START].</div><div class="t m0 x33 hf y2023 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Continuous mode (DCR<span class="ff4 ws1a6">n</span>[CS] = 0)—After a software-initiated or peripheral request,</div><div class="t m0 x34 hf y2024 ff3 fs5 fc0 sc0 ls0 ws0">the DMA continuously transfers data until BCRn reaches zero. The DMA performs</div><div class="t m0 x34 hf ya43 ff3 fs5 fc0 sc0 ls0 ws0">the specified number of transfers, then retires the channel.</div><div class="t m0 x9 hf y2025 ff3 fs5 fc0 sc0 ls0 ws0">In either mode, the crossbar switch performs independent arbitration on each slave port</div><div class="t m0 x9 hf y2026 ff3 fs5 fc0 sc0 ls0 ws0">after each transaction.</div><div class="t m0 x4e h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 23 DMA Controller Module</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>361</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
