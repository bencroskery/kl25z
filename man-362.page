<div id="pf16a" class="pf w0 h0" data-page-no="16a"><div class="pc pc16a w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg16a.png"/><div class="t m0 x9 he y17c ff1 fs1 fc0 sc0 ls0 ws0">23.4.2<span class="_ _b"> </span>Channel Initialization and Startup</div><div class="t m0 x9 hf y17d ff3 fs5 fc0 sc0 ls0 ws0">Before a data transfer starts, the channel&apos;s transfer control descriptor must be initialized</div><div class="t m0 x9 hf y80d ff3 fs5 fc0 sc0 ls0 ws0">with information describing configuration, request-generation method, and pointers to the</div><div class="t m0 x9 hf y80e ff3 fs5 fc0 sc0 ls0 ws0">data to be moved.</div><div class="t m0 x9 h1b y2027 ff1 fsc fc0 sc0 ls0 ws0">23.4.2.1<span class="_ _b"> </span>Channel Prioritization</div><div class="t m0 x9 hf y2028 ff3 fs5 fc0 sc0 ls0 ws0">The four DMA channels are prioritized based on number, with channel 0 having highest</div><div class="t m0 x9 hf y2029 ff3 fs5 fc0 sc0 ls0 ws0">priority and channel 3 having the lowest, that is, channel 0 &gt; channel 1 &gt; channel 2 &gt;</div><div class="t m0 x9 hf y202a ff3 fs5 fc0 sc0 ls0 ws0">channel 3.</div><div class="t m0 x9 hf y202b ff3 fs5 fc0 sc0 ls0 ws0">Simultaneous peripheral requests activate the channels based on this priority order. Once</div><div class="t m0 x9 hf y202c ff3 fs5 fc0 sc0 ls0 ws0">activated, a channel runs to completion as defined by DCR<span class="ff4 ws1a6">n</span>[CS] and BCR<span class="ff4 ws1a6">n</span>.</div><div class="t m0 x9 h1b y202d ff1 fsc fc0 sc0 ls0 ws0">23.4.2.2<span class="_ _b"> </span>Programming the DMA Controller Module</div><div class="t m0 xce h8 y202e ff1 fs5 fc0 sc0 ls0">CAUTION</div><div class="t m0 x3e hf y202f ff3 fs5 fc0 sc0 ls0 ws0">During a channel&apos;s execution, writes to programming model</div><div class="t m0 x3e hf y2030 ff3 fs5 fc0 sc0 ls0 ws0">registers can corrupt the data transfer. The DMA module itself</div><div class="t m0 x3e hf y2031 ff3 fs5 fc0 sc0 ls0 ws0">does not have a mechanism to prevent writes to registers during</div><div class="t m0 x3e hf y2032 ff3 fs5 fc0 sc0 ls0 ws0">a channel&apos;s execution.</div><div class="t m0 x9 hf y2033 ff3 fs5 fc0 sc0 ls0 ws0">General guidelines for programming the DMA are:</div><div class="t m0 x33 hf y2034 ff3 fs5 fc0 sc0 ls0 ws197">• TCD<span class="ff4 ws1a6">n</span><span class="ws0"> is initialized.</span></div><div class="t m0 x2 hf y2035 ff3 fs5 fc0 sc0 ls0 ws199">• SAR<span class="ff4 ws1a6">n</span><span class="ws0"> is loaded with the source (read) address. If the transfer is from a</span></div><div class="t m0 x3d hf y2036 ff3 fs5 fc0 sc0 ls0 ws0">peripheral device to memory or to another peripheral, the source address is the</div><div class="t m0 x3d hf y2037 ff3 fs5 fc0 sc0 ls0 ws0">location of the peripheral data register. If the transfer is from memory to a</div><div class="t m0 x3d hf y2038 ff3 fs5 fc0 sc0 ls0 ws0">peripheral device or to memory, the source address is the starting address of the</div><div class="t m0 x3d hf y2039 ff3 fs5 fc0 sc0 ls0 ws0">data block. This can be any appropriately aligned address.</div><div class="t m0 x2 hf y203a ff3 fs5 fc0 sc0 ls0 ws199">• DAR<span class="ff4 ws1a6">n</span><span class="ws0"> is initialized with the destination (write) address. If the transfer is from a</span></div><div class="t m0 x3d hf y203b ff3 fs5 fc0 sc0 ls0 ws0">peripheral device to memory, or from memory to memory, DAR<span class="ff4 ws1a6">n</span> is loaded with</div><div class="t m0 x3d hf y203c ff3 fs5 fc0 sc0 ls0 ws0">the starting address of the data block to be written. If the transfer is from</div><div class="t m0 x3d hf y203d ff3 fs5 fc0 sc0 ls0 ws0">memory to a peripheral device, or from a peripheral device to a peripheral</div><div class="t m0 x3d hf y203e ff3 fs5 fc0 sc0 ls0 ws0">device, DAR<span class="ff4 ws1a6">n</span> is loaded with the address of the peripheral data register. This</div><div class="t m0 x3d hf y203f ff3 fs5 fc0 sc0 ls0 ws0">address can be any appropriately aligned address.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional Description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">362<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
