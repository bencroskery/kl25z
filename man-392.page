<div id="pf188" class="pf w0 h0" data-page-no="188"><div class="pc pc188 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg188.png"/><div class="t m0 xf6 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Write to C1 register to select the clock mode.</div><div class="t m0 x2 hf y503 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>If entering FEE mode, set C1[FRDIV] appropriately, clear the C1[IREFS] bit to</div><div class="t m0 x3d hf y504 ff3 fs5 fc0 sc0 ls0 ws0">switch to the external reference, and leave the C1[CLKS] bits at 2&apos;b00 so that the</div><div class="t m0 x3d hf y505 ff3 fs5 fc0 sc0 ls0 ws0">output of the FLL is selected as the system clock source.</div><div class="t m0 x2 hf y672 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>If entering FBE, clear the C1[IREFS] bit to switch to the external reference and</div><div class="t m0 x3d hf y673 ff3 fs5 fc0 sc0 ls0 ws0">change the C1[CLKS] bits to 2&apos;b10 so that the external reference clock is</div><div class="t m0 x3d hf y674 ff3 fs5 fc0 sc0 ls0 ws0">selected as the system clock source. The C1[FRDIV] bits should also be set</div><div class="t m0 x3d hf y675 ff3 fs5 fc0 sc0 ls0 ws0">appropriately here according to the external reference frequency to keep the FLL</div><div class="t m0 x3d hf y676 ff3 fs5 fc0 sc0 ls0 ws0">reference clock in the range of 31.25 kHz to 39.0625 kHz. Although the FLL is</div><div class="t m0 x3d hf y677 ff3 fs5 fc0 sc0 ls0 ws0">bypassed, it is still on in FBE mode.</div><div class="t m0 x2 hf y14e3 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>The internal reference can optionally be kept running by setting the</div><div class="t m0 x3d hf y14e4 ff3 fs5 fc0 sc0 ls0 ws0">C1[IRCLKEN] bit. This is useful if the application will switch back and forth</div><div class="t m0 x3d hf y14e5 ff3 fs5 fc0 sc0 ls0 ws0">between internal and external modes. For minimum power consumption, leave</div><div class="t m0 x3d hf y2310 ff3 fs5 fc0 sc0 ls0 ws0">the internal reference disabled while in an external clock mode.</div><div class="t m0 xf6 hf y1d64 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Once the proper configuration bits have been set, wait for the affected bits in the</div><div class="t m0 x117 hf y2311 ff3 fs5 fc0 sc0 ls0 ws0">MCG status register to be changed appropriately, reflecting that the MCG has moved</div><div class="t m0 x117 hf y2312 ff3 fs5 fc0 sc0 ls0 ws0">into the proper mode.</div><div class="t m0 x2 hf y1d67 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>If the MCG is in FEE, FBE, PEE, PBE, or BLPE mode, and C2[EREFS0] was</div><div class="t m0 x3d hf y2313 ff3 fs5 fc0 sc0 ls0 ws0">also set in step 1, wait here for S[OSCINIT0] bit to become set indicating that</div><div class="t m0 x3d hf y2314 ff3 fs5 fc0 sc0 ls0 ws0">the external clock source has finished its initialization cycles and stabilized.</div><div class="t m0 x2 hf y1d6a ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>If in FEE mode, check to make sure the S[IREFST] bit is cleared before moving</div><div class="t m0 x3d hf y1d6b ff3 fs5 fc0 sc0 ls0">on.</div><div class="t m0 x2 hf y2315 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>If in FBE mode, check to make sure the S[IREFST] bit is cleared and S[CLKST]</div><div class="t m0 x3d hf y2316 ff3 fs5 fc0 sc0 ls0 ws0">bits have changed to 2&apos;b10 indicating the external reference clock has been</div><div class="t m0 x3d hf y2317 ff3 fs5 fc0 sc0 ls0 ws0">appropriately selected. Although the FLL is bypassed, it is still on in FBE mode.</div><div class="t m0 xf6 hf y2318 ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Write to the C4 register to determine the DCO output (MCGFLLCLK) frequency</div><div class="t m0 x117 hf y2319 ff3 fs5 fc0 sc0 ls0">range.</div><div class="t m0 x2 hf y231a ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>By default, with C4[DMX32] cleared to 0, the FLL multiplier for the DCO</div><div class="t m0 x3d hf y231b ff3 fs5 fc0 sc0 ls0 ws0">output is 640. For greater flexibility, if a mid-low-range FLL multiplier of 1280</div><div class="t m0 x3d hf y231c ff3 fs5 fc0 sc0 ls0 ws0">is desired instead, set C4[DRST_DRS] bits to 2&apos;b01 for a DCO output frequency</div><div class="t m0 x3d hf y231d ff3 fs5 fc0 sc0 ls0 ws0">of 40 MHz. If a mid high-range FLL multiplier of 1920 is desired instead, set the</div><div class="t m0 x3d hf y231e ff3 fs5 fc0 sc0 ls0 ws0">C4[DRST_DRS] bits to 2&apos;b10 for a DCO output frequency of 60 MHz. If a high-</div><div class="t m0 x3d hf y231f ff3 fs5 fc0 sc0 ls0 ws0">range FLL multiplier of 2560 is desired instead, set the C4[DRST_DRS] bits to</div><div class="t m0 x3d hf y2320 ff3 fs5 fc0 sc0 ls0 ws0">2&apos;b11 for a DCO output frequency of 80 MHz.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Initialization / Application information</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">392<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
