<div id="pf18a" class="pf w0 h0" data-page-no="18a"><div class="pc pc18a w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg18a.png"/><div class="t m0 x9 he y17c ff1 fs1 fc0 sc0 ls0 ws0">24.5.2<span class="_ _b"> </span>Using a 32.768 kHz reference</div><div class="t m0 x9 hf y17d ff3 fs5 fc0 sc0 ls0 ws0">In FEE and FBE modes, if using a 32.768 kHz external reference, at the default FLL</div><div class="t m0 x9 hf y80d ff3 fs5 fc0 sc0 ls0 ws0">multiplication factor of 640, the DCO output (MCGFLLCLK) frequency is 20.97 MHz at</div><div class="t m0 x9 hf y80e ff3 fs5 fc0 sc0 ls0 ws0">low-range. If C4[DRST_DRS] bits are set to 2&apos;b01, the multiplication factor is doubled to</div><div class="t m0 x9 hf y80f ff3 fs5 fc0 sc0 ls0 ws0">1280, and the resulting DCO output frequency is 41.94 MHz at mid-low-range. If</div><div class="t m0 x9 hf y1919 ff3 fs5 fc0 sc0 ls0 ws0">C4[DRST_DRS] bits are set to 2&apos;b10, the multiplication factor is set to 1920, and the</div><div class="t m0 x9 hf y191a ff3 fs5 fc0 sc0 ls0 ws0">resulting DCO output frequency is 62.91 MHz at mid high-range. If C4[DRST_DRS] bits</div><div class="t m0 x9 hf y191b ff3 fs5 fc0 sc0 ls0 ws0">are set to 2&apos;b11, the multiplication factor is set to 2560, and the resulting DCO output</div><div class="t m0 x9 hf y191c ff3 fs5 fc0 sc0 ls0 ws0">frequency is 83.89 MHz at high-range.</div><div class="t m0 x9 hf y232d ff3 fs5 fc0 sc0 ls0 ws0">In FBI and FEI modes, setting C4[DMX32] bit is not recommended. If the internal</div><div class="t m0 x9 hf y232e ff3 fs5 fc0 sc0 ls0 ws0">reference is trimmed to a frequency above 32.768 kHz, the greater FLL multiplication</div><div class="t m0 x9 hf y191f ff3 fs5 fc0 sc0 ls0 ws0">factor could potentially push the microcontroller system clock out of specification and</div><div class="t m0 x9 hf y1920 ff3 fs5 fc0 sc0 ls0 ws0">damage the part.</div><div class="t m0 x9 he y232f ff1 fs1 fc0 sc0 ls0 ws0">24.5.3<span class="_ _b"> </span>MCG mode switching</div><div class="t m0 x9 hf y2330 ff3 fs5 fc0 sc0 ls0 ws0">When switching between operational modes of the MCG, certain configuration bits must</div><div class="t m0 x9 hf y2331 ff3 fs5 fc0 sc0 ls0 ws0">be changed in order to properly move from one mode to another. Each time any of these</div><div class="t m0 x9 hf y2332 ff3 fs5 fc0 sc0 ls0 ws0">bits are changed (C6[PLLS], C1[IREFS], C1[CLKS], C2[IRCS], or C2[EREFS0]), the</div><div class="t m0 x9 hf y2333 ff3 fs5 fc0 sc0 ls0 ws0">corresponding bits in the MCG status register (PLLST, IREFST, CLKST, IRCST, or</div><div class="t m0 x9 hf y2334 ff3 fs5 fc0 sc0 ls0 ws0">OSCINIT) must be checked before moving on in the application software.</div><div class="t m0 x9 hf y2335 ff3 fs5 fc0 sc0 ls0 ws0">Additionally, care must be taken to ensure that the reference clock divider (C1[FRDIV]</div><div class="t m0 x9 hf y2336 ff3 fs5 fc0 sc0 ls0 ws0">and C5[PRDIV0]) is set properly for the mode being switched to. For instance, in PEE</div><div class="t m0 x9 hf y2337 ff3 fs5 fc0 sc0 ls0 ws0">mode, if using a 4 MHz crystal, C5[PRDIV0] must be set to 5&apos;b000 (divide-by-1) or</div><div class="t m0 x9 hf y2338 ff3 fs5 fc0 sc0 ls0 ws0">5&apos;b001 (divide -by-2) to divide the external reference down to the required frequency</div><div class="t m0 x9 hf y2339 ff3 fs5 fc0 sc0 ls0 ws0">between 2 and 4 MHz.</div><div class="t m0 x9 hf y233a ff3 fs5 fc0 sc0 ls0 ws0">In FBE, FEE, FBI, and FEI modes, at any time, the application can switch the FLL</div><div class="t m0 x9 hf y233b ff3 fs5 fc0 sc0 ls0 ws0">multiplication factor between 640, 1280, 1920, and 2560 with C4[DRST_DRS] bits.</div><div class="t m0 x9 hf y233c ff3 fs5 fc0 sc0 ls0 ws0">Writes to C4[DRST_DRS] bits will be ignored if C2[LP]=1.</div><div class="t m0 x9 hf y233d ff3 fs5 fc0 sc0 ls0 ws0">The table below shows MCGOUTCLK frequency calculations using C1[FRDIV],</div><div class="t m0 x9 hf y233e ff3 fs5 fc0 sc0 ls0 ws0">C5[PRDIV0], and C6[VDIV0] settings for each clock mode.</div><div class="t m0 xd1 h9 y233f ff1 fs2 fc0 sc0 ls0 ws0">Table 24-19.<span class="_ _1a"> </span>MCGOUTCLK Frequency Calculation Options</div><div class="t m0 x89 h1e y2340 ff1 fs4 fc0 sc0 ls0 ws0">Clock Mode<span class="_ _1c8"> </span>f<span class="fs9 ws1a4 vb">MCGOUTCLK<span class="fc1 ls1f6 v3">1</span></span>Note</div><div class="t m0 x2c h7 y2341 ff2 fs4 fc0 sc0 ls0 ws0">FEI (FLL engaged internal)<span class="_ _1ab"> </span>(f<span class="fs9 ws1a4 vb">int</span> * F)<span class="_ _169"> </span>Typical f<span class="fs9 ws1a4 vb">MCGOUTCLK</span> = 21 MHz</div><div class="t m0 x4e h7 y2342 ff2 fs4 fc0 sc0 ls0 ws0">immediately after reset.</div><div class="t m0 x2c h7 y2343 ff2 fs4 fc0 sc0 ls0 ws0">FEE (FLL engaged external)<span class="_ _1c9"> </span>(f<span class="fs9 ws1a4 vb">ext</span> / FLL_R) *F<span class="_ _2e"> </span>f<span class="fs9 ws1a4 vb">ext</span> / FLL_R must be in the range of</div><div class="t m0 x4e h7 y2344 ff2 fs4 fc0 sc0 ls0 ws0">31.25 kHz to 39.0625 kHz</div><div class="t m0 x1b h7 y2345 ff5 fs4 fc0 sc0 ls0 ws0">Table continues on the next page...</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Initialization / Application information</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">394<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf18b" data-dest-detail='[395,"XYZ",null,508.6,null]'><div class="d m1" style="border-style:none;position:absolute;left:306.965000px;bottom:133.441000px;width:3.753000px;height:6.750000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
