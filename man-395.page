<div id="pf18b" class="pf w0 h0" data-page-no="18b"><div class="pc pc18b w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg18b.png"/><div class="t m0 x153 h9 y1a5 ff1 fs2 fc0 sc0 ls0 ws0">Table 24-19.<span class="_ _1a"> </span>MCGOUTCLK Frequency Calculation Options</div><div class="t m0 xc2 h9 y2346 ff1 fs2 fc0 sc0 ls0">(continued)</div><div class="t m0 x89 h1e y2347 ff1 fs4 fc0 sc0 ls0 ws0">Clock Mode<span class="_ _1c8"> </span>f<span class="fs9 ws1a4 vb">MCGOUTCLK<span class="fc1 ls1f6 v3">1</span></span>Note</div><div class="t m0 x2c h7 y2348 ff2 fs4 fc0 sc0 ls0 ws0">FBE (FLL bypassed external)<span class="_ _1ca"> </span>OSCCLK<span class="_ _1cb"> </span>OSCCLK / FLL_R must be in the</div><div class="t m0 x4e h7 y2349 ff2 fs4 fc0 sc0 ls0 ws0">range of 31.25 kHz to 39.0625 kHz</div><div class="t m0 x2c h7 y234a ff2 fs4 fc0 sc0 ls0 ws0">FBI (FLL bypassed internal)<span class="_ _77"> </span>MCGIRCLK<span class="_ _1cc"> </span>Selectable between slow and fast</div><div class="t m0 x4e h7 y234b ff2 fs4 fc0 sc0 ls0">IRC</div><div class="t m0 x2c h7 y234c ff2 fs4 fc0 sc0 ls0 ws0">PEE (PLL engaged external)<span class="_ _136"> </span>(OSCCLK / PLL_R) * M<span class="_ _10f"> </span>OSCCLK / PLL_R must be in the</div><div class="t m0 x4e h7 y17e5 ff2 fs4 fc0 sc0 ls0 ws0">range of 2 – 4 MHz</div><div class="t m0 x2c h7 y234d ff2 fs4 fc0 sc0 ls0 ws0">PBE (PLL bypassed external)<span class="_ _d8"> </span>OSCCLK<span class="_ _1cb"> </span>OSCCLK / PLL_R must be in the</div><div class="t m0 x4e h7 y17e6 ff2 fs4 fc0 sc0 ls0 ws0">range of 2 – 4 MHz</div><div class="t m0 x2c h7 y234e ff2 fs4 fc0 sc0 ls0 ws0">BLPI (Bypassed low power internal)<span class="_ _63"> </span>MCGIRCLK<span class="_ _1cc"> </span>Selectable between slow and fast</div><div class="t m0 x4e h7 y234f ff2 fs4 fc0 sc0 ls0">IRC</div><div class="t m0 x2c h7 y2350 ff2 fs4 fc0 sc0 ls0 ws0">BLPE (Bypassed low power external)<span class="_ _168"> </span>OSCCLK</div><div class="t m0 x9 h7 y2351 ff2 fs4 fc0 sc0 ls0 ws0">1.<span class="_ _68"> </span>FLL_R is the reference divider selected by the C1[FRDIV] bits, PLL_R is the reference divider selected by C5[PRDIV0]</div><div class="t m0 x52 h7 y338 ff2 fs4 fc0 sc0 ls0 ws0">bits, F is the FLL factor selected by C4[DRST_DRS] and C4[DMX32] bits, and M is the multiplier selected by C6[VDIV0]</div><div class="t m0 x52 h7 y2352 ff2 fs4 fc0 sc0 ls0">bits.</div><div class="t m0 x9 hf y2353 ff3 fs5 fc0 sc0 ls0 ws0">This section will include three mode switching examples using an 4 MHz external</div><div class="t m0 x9 hf y132e ff3 fs5 fc0 sc0 ls0 ws0">crystal. If using an external clock source less than 2 MHz, the MCG must not be</div><div class="t m0 x9 hf y132f ff3 fs5 fc0 sc0 ls0 ws0">configured for any of the PLL modes (PEE and PBE).</div><div class="t m0 x9 h1b y2354 ff1 fsc fc0 sc0 ls0 ws0">24.5.3.1<span class="_ _b"> </span>Example 1: Moving from FEI to PEE mode: External Crystal =</div><div class="t m0 xac h1b y2355 ff1 fsc fc0 sc0 ls0 ws0">4 MHz, MCGOUTCLK frequency = 48 MHz</div><div class="t m0 x9 hf y2356 ff3 fs5 fc0 sc0 ls0 ws0">In this example, the MCG will move through the proper operational modes from FEI to</div><div class="t m0 x9 hf y2357 ff3 fs5 fc0 sc0 ls0 ws0">PEE to achieve 48 MHz MCGOUTCLK frequency from 4 MHz external crystal</div><div class="t m0 x9 hf y2358 ff3 fs5 fc0 sc0 ls0 ws0">reference. First, the code sequence will be described. Then there is a flowchart that</div><div class="t m0 x9 hf y2359 ff3 fs5 fc0 sc0 ls0 ws0">illustrates the sequence.</div><div class="t m0 xf6 hf y235a ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>First, FEI must transition to FBE mode:</div><div class="t m0 x8b hf y235b ff3 fs5 fc0 sc0 ls0 ws0">a.<span class="_ _11"> </span>C2 = 0x1C</div><div class="t m0 x29 hf y235c ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>C2[RANGE0] set to 2&apos;b01 because the frequency of 4 MHz is within the</div><div class="t m0 x3e hf y235d ff3 fs5 fc0 sc0 ls0 ws0">high frequency range.</div><div class="t m0 x29 hf y235e ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>C2[HGO0] set to 1 to configure the crystal oscillator for high gain operation.</div><div class="t m0 x29 hf y235f ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>C2[EREFS0] set to 1, because a crystal is being used.</div><div class="t m0 x8b hf y2360 ff3 fs5 fc0 sc0 ls0 ws0">b.<span class="_ _11"> </span>C1 = 0x90</div><div class="t m0 x29 hf y2361 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>C1[CLKS] set to 2&apos;b10 to select external reference clock as system clock</div><div class="t m0 x3e hf y2362 ff3 fs5 fc0 sc0 ls0">source</div><div class="t m0 x102 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 24 Multipurpose Clock Generator (MCG)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>395</div><a class="l" href="#pf18b" data-dest-detail='[395,"XYZ",null,508.6,null]'><div class="d m1" style="border-style:none;position:absolute;left:306.965000px;bottom:681.141000px;width:3.753000px;height:6.750000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
