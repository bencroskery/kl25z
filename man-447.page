<div id="pf1bf" class="pf w0 h0" data-page-no="1bf"><div class="pc pc1bf w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg1bf.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">ERSSUSP bit is set, the Erase Flash Sector operation is suspended and the flash memory</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">module sets CCIF. While ERSSUSP is set, all writes to flash registers are ignored except</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">for writes to the FSTAT and FCNFG registers.</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">If an Erase Flash Sector operation effectively completes before the flash memory module</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">detects that a suspend request has been made, the flash memory module clears the</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">ERSSUSP bit prior to setting CCIF. When an Erase Flash Sector operation has been</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">successfully suspended, the flash memory module sets CCIF and leaves the ERSSUSP bit</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">set. While CCIF is set, the ERSSUSP bit can only be cleared to prevent the withdrawal of</div><div class="t m0 x9 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">a suspend request before the flash memory module has acknowledged it.</div><div class="t m0 x9 h8 y2799 ff1 fs5 fc0 sc0 ls0 ws0">27.4.10.5.2<span class="_ _b"> </span>Resuming a Suspended Erase Flash Sector Operation</div><div class="t m0 x9 hf y279a ff3 fs5 fc0 sc0 ls0 ws0">If the ERSSUSP bit is still set when CCIF is cleared to launch the next command, the</div><div class="t m0 x9 hf y279b ff3 fs5 fc0 sc0 ls0 ws0">previous Erase Flash Sector operation resumes. The flash memory module acknowledges</div><div class="t m0 x9 hf y952 ff3 fs5 fc0 sc0 ls0 ws0">the request to resume a suspended operation by clearing the ERSSUSP bit. A new</div><div class="t m0 x9 hf yabf ff3 fs5 fc0 sc0 ls0 ws0">suspend request can then be made by setting ERSSUSP. A single Erase Flash Sector</div><div class="t m0 x9 hf yac0 ff3 fs5 fc0 sc0 ls0 ws0">operation can be suspended and resumed multiple times.</div><div class="t m0 x9 hf yac1 ff3 fs5 fc0 sc0 ls0 ws0">There is a minimum elapsed time limit between the request to resume the Erase Flash</div><div class="t m0 x9 hf yac2 ff3 fs5 fc0 sc0 ls0 ws0">Sector operation (CCIF is cleared) and the request to suspend the operation again</div><div class="t m0 x9 hf yac3 ff3 fs5 fc0 sc0 ls0 ws0">(ERSSUSP is set). This minimum time period is required to ensure that the Erase Flash</div><div class="t m0 x9 hf yac4 ff3 fs5 fc0 sc0 ls0 ws0">Sector operation will eventually complete. If the minimum period is continually violated,</div><div class="t m0 x9 hf yac5 ff3 fs5 fc0 sc0 ls0 ws0">i.e. the suspend requests come repeatedly and too quickly, no forward progress is made</div><div class="t m0 x9 hf yac6 ff3 fs5 fc0 sc0 ls0 ws0">by the Erase Flash Sector algorithm. The resume/suspend sequence runs indefinitely</div><div class="t m0 x9 hf y186b ff3 fs5 fc0 sc0 ls0 ws0">without completing the erase.</div><div class="t m0 x9 h8 y279c ff1 fs5 fc0 sc0 ls0 ws0">27.4.10.5.3<span class="_ _b"> </span>Aborting a Suspended Erase Flash Sector Operation</div><div class="t m0 x9 hf y279d ff3 fs5 fc0 sc0 ls0 ws0">The user may choose to abort a suspended Erase Flash Sector operation by clearing the</div><div class="t m0 x9 hf y662 ff3 fs5 fc0 sc0 ls0 ws0">ERSSUSP bit prior to clearing CCIF for the next command launch. When a suspended</div><div class="t m0 x9 hf y663 ff3 fs5 fc0 sc0 ls0 ws0">operation is aborted, the flash memory module starts the new command using the new</div><div class="t m0 x9 hf y1a17 ff3 fs5 fc0 sc0 ls0 ws0">FCCOB contents.</div><div class="t m0 xda h8 y279e ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y279f ff3 fs5 fc0 sc0 ls0 ws0">Aborting the erase leaves the bitcells in an indeterminate,</div><div class="t m0 x3e hf y27a0 ff3 fs5 fc0 sc0 ls0 ws0">partially-erased state. Data in this sector is not reliable until a</div><div class="t m0 x3e hf y27a1 ff3 fs5 fc0 sc0 ls0 ws0">new erase command fully completes.</div><div class="t m0 x9 hf y27a2 ff3 fs5 fc0 sc0 ls0 ws0">The following figure shows how to suspend and resume the Erase Flash Sector operation.</div><div class="t m0 x150 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 27 Flash Memory Module (FTFA)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>447</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
