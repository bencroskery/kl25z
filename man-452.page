<div id="pf1c4" class="pf w0 h0" data-page-no="1c4"><div class="pc pc1c4 w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg1c4.png"/><div class="t m0 xf0 h9 y1a5 ff1 fs2 fc0 sc0 ls0 ws0">Table 27-46.<span class="_ _1a"> </span>Erase All Blocks Command FCCOB Requirements</div><div class="t m0 xb9 h10 y1a6 ff1 fs4 fc0 sc0 ls0 ws0">FCCOB Number<span class="_ _11d"> </span>FCCOB Contents [7:0]</div><div class="t m0 x3d h7 y1a7 ff2 fs4 fc0 sc0 ls0 ws0">0<span class="_ _b0"> </span>0x44 (ERSALL)</div><div class="t m0 x9 hf y2817 ff3 fs5 fc0 sc0 ls0 ws0">After clearing CCIF to launch the Erase All Blocks command, the flash memory module</div><div class="t m0 x9 hf y2818 ff3 fs5 fc0 sc0 ls0 ws0">erases all program flash memory, then verifies that all are erased.</div><div class="t m0 x9 hf y2e ff3 fs5 fc0 sc0 ls0 ws0">If the flash memory module verifies that all flash memories were properly erased,</div><div class="t m0 x9 hf y50 ff3 fs5 fc0 sc0 ls0 ws0">security is released by setting the FSEC[SEC] field to the unsecure state. The Erase All</div><div class="t m0 x9 hf y2819 ff3 fs5 fc0 sc0 ls0 ws0">Blocks command aborts if any flash region is protected. The security byte and all other</div><div class="t m0 x9 hf y281a ff3 fs5 fc0 sc0 ls0 ws0">contents of the flash configuration field (see <span class="fc1">Flash Configuration Field Description</span>) are</div><div class="t m0 x9 hf y281b ff3 fs5 fc0 sc0 ls0 ws0">erased by the Erase All Blocks command. If the erase-verify fails, the</div><div class="t m0 x9 hf y281c ff3 fs5 fc0 sc0 ls0 ws0">FSTAT[MGSTAT0] bit is set. The CCIF flag is set after the Erase All Blocks operation</div><div class="t m0 x9 hf y14 ff3 fs5 fc0 sc0 ls0">completes.</div><div class="t m0 x5 h9 y281d ff1 fs2 fc0 sc0 ls0 ws0">Table 27-47.<span class="_ _1a"> </span>Erase All Blocks Command Error Handling</div><div class="t m0 x89 h10 y281e ff1 fs4 fc0 sc0 ls0 ws0">Error Condition<span class="_ _1df"> </span>Error Bit</div><div class="t m0 x2c h7 y281f ff2 fs4 fc0 sc0 ls0 ws0">Command not available in current mode/security<span class="_ _116"> </span>FSTAT[ACCERR]</div><div class="t m0 x2c h7 y2820 ff2 fs4 fc0 sc0 ls0 ws0">Any region of the program flash memory is protected<span class="_ _13f"> </span>FSTAT[FPVIOL]</div><div class="t m0 x2c h7 y2821 ff2 fs4 fc0 sc0 ls0 ws0">Any errors have been encountered during the verify operation<span class="_ _b9"> </span>FSTAT[MGSTAT0]</div><div class="t m0 x9 h8 y2822 ff1 fs5 fc0 sc0 ls0 ws0">27.4.10.9.1<span class="_ _b"> </span>Triggering an Erase All External to the Flash Memory Module</div><div class="t m0 x9 hf y2022 ff3 fs5 fc0 sc0 ls0 ws0">The functionality of the Erase All Blocks command is also available in an uncommanded</div><div class="t m0 x9 hf y1d85 ff3 fs5 fc0 sc0 ls0 ws0">fashion outside of the flash memory. Refer to the device&apos;s Chip Configuration details for</div><div class="t m0 x9 hf y1d86 ff3 fs5 fc0 sc0 ls0 ws0">information on this functionality.</div><div class="t m0 x9 hf y2823 ff3 fs5 fc0 sc0 ls0 ws0">Before invoking the external erase all function, the FSTAT[ACCERR and PVIOL] flags</div><div class="t m0 x9 hf y1d88 ff3 fs5 fc0 sc0 ls0 ws0">must be cleared and the FCCOB0 register must not contain 0x44. When invoked, the</div><div class="t m0 x9 hf y1d89 ff3 fs5 fc0 sc0 ls0 ws0">erase-all function erases all program flash memory regardless of the protection settings. If</div><div class="t m0 x9 hf y1d8a ff3 fs5 fc0 sc0 ls0 ws0">the post-erase verify passes, the routine then releases security by setting the FSEC[SEC]</div><div class="t m0 x9 hf ya41 ff3 fs5 fc0 sc0 ls0 ws0">field register to the unsecure state. The security byte in the Flash Configuration Field is</div><div class="t m0 x9 hf ya42 ff3 fs5 fc0 sc0 ls0 ws0">also programmed to the unsecure state. The status of the erase-all request is reflected in</div><div class="t m0 x9 hf y14b3 ff3 fs5 fc0 sc0 ls0 ws0">the FCNFG[ERSAREQ] bit. The FCNFG[ERSAREQ] bit is cleared once the operation</div><div class="t m0 x9 hf y2824 ff3 fs5 fc0 sc0 ls0 ws0">completes and the normal FSTAT error reporting is available as described in <span class="fc1">Erase All</span></div><div class="t m0 x9 hf y2825 ff3 fs5 fc1 sc0 ls0 ws0">Blocks Command<span class="fc0">.</span></div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional Description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">452<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf1a6" data-dest-detail='[422,"XYZ",null,124.364,null]'><div class="d m1" style="border-style:none;position:absolute;left:304.782000px;bottom:541.700000px;width:213.500000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf1c3" data-dest-detail='[451,"XYZ",null,184.3,null]'><div class="d m1" style="border-style:none;position:absolute;left:487.146000px;bottom:153.000000px;width:52.486000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf1c3" data-dest-detail='[451,"XYZ",null,184.3,null]'><div class="d m1" style="border-style:none;position:absolute;left:54.000000px;bottom:137.000000px;width:100.730000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
