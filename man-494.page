<div id="pf1ee" class="pf w0 h0" data-page-no="1ee"><div class="pc pc1ee w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg1ee.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">If the condition selected evaluates true, SC1n[COCO] is set.</div><div class="t m0 x9 hf y503 ff3 fs5 fc0 sc0 ls0 ws0">Upon completion of a conversion while the compare function is enabled, if the compare</div><div class="t m0 x9 hf y504 ff3 fs5 fc0 sc0 ls0 ws0">condition is not true, SC1n[COCO] is not set and the conversion result data will not be</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">transferred to the result register, Rn. If the hardware averaging function is enabled, the</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">compare function compares the averaged result to the compare values. The same compare</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">function definitions apply. An ADC interrupt is generated when SC1n[COCO] is set and</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">the respective ADC interrupt is enabled, that is, SC1n[AIEN]=1.</div><div class="t m0 xda h8 y2b9d ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y1dd8 ff3 fs5 fc0 sc0 ls0 ws0">The compare function can monitor the voltage on a channel</div><div class="t m0 x3e hf y243e ff3 fs5 fc0 sc0 ls0 ws0">while the MCU is in Wait or Normal Stop modes. The ADC</div><div class="t m0 x3e hf y14e3 ff3 fs5 fc0 sc0 ls0 ws0">interrupt wakes the MCU when the compare condition is met.</div><div class="t m0 x9 he y2b9e ff1 fs1 fc0 sc0 ls0 ws0">28.4.6<span class="_ _b"> </span>Calibration function</div><div class="t m0 x9 hf y2b9f ff3 fs5 fc0 sc0 ls0 ws0">The ADC contains a self-calibration function that is required to achieve the specified</div><div class="t m0 x9 hf y2ba0 ff3 fs5 fc0 sc0 ls0 ws0">accuracy. Calibration must be run, or valid calibration values written, after any reset and</div><div class="t m0 x9 hf y2ba1 ff3 fs5 fc0 sc0 ls0 ws0">before a conversion is initiated. The calibration function sets the offset calibration value,</div><div class="t m0 x9 hf y2ba2 ff3 fs5 fc0 sc0 ls0 ws0">the minus-side calibration values, and the plus-side calibration values. The offset</div><div class="t m0 x9 hf y2ba3 ff3 fs5 fc0 sc0 ls0 ws0">calibration value is automatically stored in the ADC offset correction register (OFS), and</div><div class="t m0 x9 hf y2ba4 ff3 fs5 fc0 sc0 ls0 ws0">the plus-side and minus-side calibration values are automatically stored in the ADC plus-</div><div class="t m0 x9 hf y2ba5 ff3 fs5 fc0 sc0 ls0 ws0">side and minus-side calibration registers, CLPx and CLMx. The user must configure the</div><div class="t m0 x9 hf y2ba6 ff3 fs5 fc0 sc0 ls0 ws0">ADC correctly prior to calibration, and must generate the plus-side and minus-side gain</div><div class="t m0 x9 hf y2ba7 ff3 fs5 fc0 sc0 ls0 ws0">calibration results and store them in the ADC plus-side gain register (PG) after the</div><div class="t m0 x9 hf y2ba8 ff3 fs5 fc0 sc0 ls0 ws0">calibration function completes.</div><div class="t m0 x9 hf y2ba9 ff3 fs5 fc0 sc0 ls0 ws0">Prior to calibration, the user must configure the ADC&apos;s clock source and frequency, low</div><div class="t m0 x9 hf y2baa ff3 fs5 fc0 sc0 ls0 ws0">power configuration, voltage reference selection, sample time, and high speed</div><div class="t m0 x9 hf y2bab ff3 fs5 fc0 sc0 ls0 ws0">configuration according to the application&apos;s clock source availability and needs. If the</div><div class="t m0 x9 hf y2bac ff3 fs5 fc0 sc0 ls0 ws0">application uses the ADC in a wide variety of configurations, the configuration for which</div><div class="t m0 x9 hf y2bad ff3 fs5 fc0 sc0 ls0 ws0">the highest accuracy is required should be selected, or multiple calibrations can be done</div><div class="t m0 x9 hf y2bae ff3 fs5 fc0 sc0 ls0 ws0">for the different configurations. For best calibration results:</div><div class="t m0 x33 hf y2baf ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Set hardware averaging to maximum, that is, SC3[AVGE]=1 and SC3[AVGS]=11</div><div class="t m0 x34 hf y2bb0 ff3 fs5 fc0 sc0 ls0 ws0">for an average of 32</div><div class="t m0 x33 hf y2bb1 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Set ADC clock frequency f<span class="fs8 ws198 vc">ADCK</span> less than or equal to 4 MHz</div><div class="t m0 x33 hf y2bb2 ff3 fs5 fc0 sc0 ls0 ws199">• V<span class="fs8 ws198 vc">REFH</span><span class="ws1a6">=V<span class="fs8 vc">DDA</span></span></div><div class="t m0 x33 hf y2bb3 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Calibrate at nominal voltage and temperature</div><div class="t m0 x9 hf y2bb4 ff3 fs5 fc0 sc0 ls0 ws0">The input channel, conversion mode continuous function, compare function, resolution</div><div class="t m0 x9 hf y2bb5 ff3 fs5 fc0 sc0 ls0 ws0">mode, and differential/single-ended mode are all ignored during the calibration function.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">494<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
