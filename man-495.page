<div id="pf1ef" class="pf w0 h0" data-page-no="1ef"><div class="pc pc1ef w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg1ef.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">To initiate calibration, the user sets SC3[CAL] and the calibration will automatically</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">begin if the SC2[ADTRG] is 0. If SC2[ADTRG] is 1, SC3[CAL] will not get set and</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">SC3[CALF] will be set. While calibration is active, no ADC register can be written and</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">no stop mode may be entered, or the calibration routine will be aborted causing</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">SC3[CAL] to clear and SC3[CALF] to set. At the end of a calibration sequence,</div><div class="t m0 x9 hf yfb ff3 fs5 fc0 sc0 ls0 ws0">SC1n[COCO] will be set. SC1n[AIEN] can be used to allow an interrupt to occur at the</div><div class="t m0 x9 hf yfc ff3 fs5 fc0 sc0 ls0 ws0">end of a calibration sequence. At the end of the calibration routine, if SC3[CALF] is not</div><div class="t m0 x9 hf y11f ff3 fs5 fc0 sc0 ls0 ws0">set, the automatic calibration routine is completed successfully.</div><div class="t m0 x9 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">To complete calibration, the user must generate the gain calibration values using the</div><div class="t m0 x9 hf y646 ff3 fs5 fc0 sc0 ls0 ws0">following procedure:</div><div class="t m0 xf6 hf yad7 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Initialize or clear a 16-bit variable in RAM.</div><div class="t m0 xf6 hf yad8 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Add the plus-side calibration results CLP0, CLP1, CLP2, CLP3, CLP4, and CLPS to</div><div class="t m0 x117 hf yad9 ff3 fs5 fc0 sc0 ls0 ws0">the variable.</div><div class="t m0 xf6 hf y2bb6 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Divide the variable by two.</div><div class="t m0 xf6 hf y2bb7 ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Set the MSB of the variable.</div><div class="t m0 xf6 hf y2bb8 ff3 fs5 fc0 sc0 ls0 ws0">5.<span class="_ _11"> </span>The previous two steps can be achieved by setting the carry bit, rotating to the right</div><div class="t m0 x117 hf y2bb9 ff3 fs5 fc0 sc0 ls0 ws0">through the carry bit on the high byte and again on the low byte.</div><div class="t m0 xf6 hf y2bba ff3 fs5 fc0 sc0 ls0 ws0">6.<span class="_ _11"> </span>Store the value in the plus-side gain calibration register PG.</div><div class="t m0 xf6 hf y2bbb ff3 fs5 fc0 sc0 ls0 ws0">7.<span class="_ _11"> </span>Repeat the procedure for the minus-side gain calibration value.</div><div class="t m0 x9 hf y2bbc ff3 fs5 fc0 sc0 ls0 ws0">When calibration is complete, the user may reconfigure and use the ADC as desired. A</div><div class="t m0 x9 hf y2bbd ff3 fs5 fc0 sc0 ls0 ws0">second calibration may also be performed, if desired, by clearing and again setting</div><div class="t m0 x9 hf y2bbe ff3 fs5 fc0 sc0 ls0">SC3[CAL].</div><div class="t m0 x9 hf y2bbf ff3 fs5 fc0 sc0 ls0 ws0">Overall, the calibration routine may take as many as 14k ADCK cycles and 100 bus</div><div class="t m0 x9 hf y2bc0 ff3 fs5 fc0 sc0 ls0 ws0">cycles, depending on the results and the clock source chosen. For an 8 MHz clock source,</div><div class="t m0 x9 hf y2bc1 ff3 fs5 fc0 sc0 ls0 ws0">this length amounts to about 1.7 ms. To reduce this latency, the calibration values, which</div><div class="t m0 x9 hf y2bc2 ff3 fs5 fc0 sc0 ls0 ws0">are offset, plus-side and minus-side gain, and plus-side and minus-side calibration values,</div><div class="t m0 x9 hf y2bc3 ff3 fs5 fc0 sc0 ls0 ws0">may be stored in flash memory after an initial calibration and recovered prior to the first</div><div class="t m0 x9 hf y2bc4 ff3 fs5 fc0 sc0 ls0 ws0">ADC conversion. This method can reduce the calibration latency to 20 register store</div><div class="t m0 x9 hf y2bc5 ff3 fs5 fc0 sc0 ls0 ws0">operations on all subsequent power, reset, or Low-Power Stop mode recoveries.</div><div class="t m0 x61 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 28 Analog-to-Digital Converter (ADC)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>495</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
