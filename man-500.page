<div id="pf1f4" class="pf w0 h0" data-page-no="1f4"><div class="pc pc1f4 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg1f4.png"/><div class="t m0 x9 h1b y2d7 ff1 fsc fc0 sc0 ls0 ws0">28.5.1.1<span class="_ _b"> </span>Initialization sequence</div><div class="t m0 x9 hf ybf ff3 fs5 fc0 sc0 ls0 ws0">Before the ADC module can be used to complete conversions, an initialization procedure</div><div class="t m0 x9 hf y282 ff3 fs5 fc0 sc0 ls0 ws0">must be performed. A typical sequence is:</div><div class="t m0 xf6 hf y799 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>Calibrate the ADC by following the calibration instructions in <span class="fc1">Calibration function</span>.</div><div class="t m0 xf6 hf y68f ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>Update CFG to select the input clock source and the divide ratio used to generate</div><div class="t m0 x117 hf y690 ff3 fs5 fc0 sc0 ls0 ws0">ADCK. This register is also used for selecting sample time and low-power</div><div class="t m0 x117 hf y691 ff3 fs5 fc0 sc0 ls0">configuration.</div><div class="t m0 xf6 hf y2c13 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>Update SC2 to select the conversion trigger, hardware or software, and compare</div><div class="t m0 x117 hf y2c14 ff3 fs5 fc0 sc0 ls0 ws0">function options, if enabled.</div><div class="t m0 xf6 hf yfad ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>Update SC3 to select whether conversions will be continuous or completed only once</div><div class="t m0 x117 hf yfae ff3 fs5 fc0 sc0 ls0 ws0">(ADCO) and whether to perform hardware averaging.</div><div class="t m0 xf6 hf y2c15 ff3 fs5 fc0 sc0 ls0 ws0">5.<span class="_ _11"> </span>Update SC1:SC1n registers to select whether conversions will be single-ended or</div><div class="t m0 x117 hf y1056 ff3 fs5 fc0 sc0 ls0 ws0">differential and to enable or disable conversion complete interrupts. Also, select the</div><div class="t m0 x117 hf y1057 ff3 fs5 fc0 sc0 ls0 ws0">input channel which can be used to perform conversions.</div><div class="t m0 x9 h1b y2c16 ff1 fsc fc0 sc0 ls0 ws0">28.5.1.2<span class="_ _b"> </span>Pseudo-code example</div><div class="t m0 x9 hf y2c17 ff3 fs5 fc0 sc0 ls0 ws0">In this example, the ADC module is set up with interrupts enabled to perform a single 10-</div><div class="t m0 x9 hf y2c18 ff3 fs5 fc0 sc0 ls0 ws0">bit conversion at low-power with a long sample time on input channel 1, where ADCK is</div><div class="t m0 x9 hf y2c19 ff3 fs5 fc0 sc0 ls0 ws0">derived from the bus clock divided by 1.</div><div class="t m0 x9 hfe y2c1a ff9 fs5 fc0 sc0 ls0 ws0">CFG1 = 0x98 (%10011000)</div><div class="t m0 x9 ha5 y2c1b ff6 fs4 fc0 sc0 ls0 ws0">        Bit 7   ADLPC   1      Configures for low power, lowers maximum clock speed.</div><div class="t m0 x9 ha5 y2c1c ff6 fs4 fc0 sc0 ls0 ws0">        Bit 6:5 ADIV    00     Sets the ADCK to the input clock รท 1.</div><div class="t m0 x9 ha5 y2c1d ff6 fs4 fc0 sc0 ls0 ws0">        Bit 4   ADLSMP  1      Configures for long sample time.</div><div class="t m0 x9 ha5 y2c1e ff6 fs4 fc0 sc0 ls0 ws0">        Bit 3:2   MODE   10    Selects the single-ended 10-bit conversion, differential 11-</div><div class="t m0 x9 ha5 y2c1f ff6 fs4 fc0 sc0 ls0 ws0">bit conversion.</div><div class="t m0 x9 ha5 y2c20 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 1:0   ADICLK   00    Selects the bus clock.</div><div class="t m0 x9 hfe y2c21 ff9 fs5 fc0 sc0 ls0 ws0">SC2 = 0x00 (%00000000)</div><div class="t m0 x9 ha5 y2c22 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 7   ADACT   0       Flag indicates if a conversion is in progress.</div><div class="t m0 x9 ha5 y2c23 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 6   ADTRG   0       Software trigger selected.</div><div class="t m0 x9 ha5 y2c24 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 5   ACFE    0       Compare function disabled.</div><div class="t m0 x9 ha5 y2c25 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 4   ACFGT   0       Not used in this example.</div><div class="t m0 x9 ha5 y2c26 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 3   ACREN   0      Compare range disabled.</div><div class="t m0 x9 ha5 y2c27 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 2   DMAEN   0      DMA request disabled.</div><div class="t m0 x9 ha5 y2c28 ff6 fs4 fc0 sc0 ls0 ws0">        Bit 1:0 REFSEL  00     Selects default voltage reference pin pair (External pins V<span class="fs9 ws3a6 vb">REFH</span> </div><div class="t m0 x9 ha5 y2c29 ff6 fs4 fc0 sc0 ls0 ws0">and V<span class="fs9 ws3a6 vb">REFL</span>).</div><div class="t m0 x9 hfe y2c2a ff9 fs5 fc0 sc0 ls0 ws0">SC1A = 0x41 (%01000001)</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Initialization information</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">500<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf1ee" data-dest-detail='[494,"XYZ",null,501.5,null]'><div class="d m1" style="border-style:none;position:absolute;left:429.148000px;bottom:615.800000px;width:113.162000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
