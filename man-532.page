<div id="pf214" class="pf w0 h0" data-page-no="214"><div class="pc pc214 w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg214.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">The filter output will be at logic 0 when first initalized, and will subsequently change</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">when all the consecutive CR0[FILTER_CNT] samples agree that the output value has</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">changed. In other words, SCR[COUT] will be 0 for some initial period, even when</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">COUTA is at logic 1.</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">Setting both CR1[SE] and FPR[FILT_PER] to 0 disables the filter and eliminates</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">switching current associated with the filtering process.</div><div class="t m0 xda h8 y14e2 ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y23f0 ff3 fs5 fc0 sc0 ls0 ws0">Always switch to this setting prior to making any changes in</div><div class="t m0 x3e hf y1dd8 ff3 fs5 fc0 sc0 ls0 ws0">filter parameters. This resets the filter to a known state.</div><div class="t m0 x3e hf y243e ff3 fs5 fc0 sc0 ls0 ws0">Switching CR0[FILTER_CNT] on the fly without this</div><div class="t m0 x3e hf y14e3 ff3 fs5 fc0 sc0 ls0 ws0">intermediate step can result in unexpected behavior.</div><div class="t m0 x9 hf y1ddb ff3 fs5 fc0 sc0 ls0 ws0">If CR1[SE]=1, the filter takes samples of COUTA on each positive transition of the</div><div class="t m0 x9 hf y1ddc ff3 fs5 fc0 sc0 ls0 ws0">sample input. The output state of the filter changes when all the consecutive</div><div class="t m0 x9 hf y1e47 ff3 fs5 fc0 sc0 ls0 ws0">CR0[FILTER_CNT] samples agree that the output value has changed.</div><div class="t m0 x9 h1b y2f5c ff1 fsc fc0 sc0 ls0 ws0">29.8.4.2<span class="_ _b"> </span>Latency issues</div><div class="t m0 x9 hf y14e8 ff3 fs5 fc0 sc0 ls0 ws0">The value of FPR[FILT_PER] or SAMPLE period must be set such that the sampling</div><div class="t m0 x9 hf y14e9 ff3 fs5 fc0 sc0 ls0 ws0">period is just longer than the period of the expected noise. This way a noise spike will</div><div class="t m0 x9 hf y14ea ff3 fs5 fc0 sc0 ls0 ws0">corrupt only one sample. The value of CR0[FILTER_CNT] must be chosen to reduce the</div><div class="t m0 x9 hf y2f5d ff3 fs5 fc0 sc0 ls0 ws0">probability of noisy samples causing an incorrect transition to be recognized. The</div><div class="t m0 x9 hf y2f48 ff3 fs5 fc0 sc0 ls0 ws0">probability of an incorrect transition is defined as the probability of an incorrect sample</div><div class="t m0 x9 hf y2f49 ff3 fs5 fc0 sc0 ls0 ws0">raised to the power of CR0[FILTER_CNT].</div><div class="t m0 x9 hf y2f5e ff3 fs5 fc0 sc0 ls0 ws0">The values of FPR[FILT_PER] or SAMPLE period and CR0[FILTER_CNT] must also</div><div class="t m0 x9 hf y2f5f ff3 fs5 fc0 sc0 ls0 ws0">be traded off against the desire for minimal latency in recognizing actual comparator</div><div class="t m0 x9 hf y2f60 ff3 fs5 fc0 sc0 ls0 ws0">output transitions. The probability of detecting an actual output change within the</div><div class="t m0 x9 hf y2f61 ff3 fs5 fc0 sc0 ls0 ws0">nominal latency is the probability of a correct sample raised to the power of</div><div class="t m0 x9 hf y186d ff3 fs5 fc0 sc0 ls0">CR0[FILTER_CNT].</div><div class="t m0 x9 hf y2f62 ff3 fs5 fc0 sc0 ls0 ws0">The following table summarizes maximum latency values for the various modes of</div><div class="t m0 x9 hf y2f63 ff3 fs5 fc0 sc0 ls0 ws0">operation <span class="ff4">in the absence of noise</span>. Filtering latency is restarted each time an actual output</div><div class="t m0 x9 hf y2f64 ff3 fs5 fc0 sc0 ls0 ws0">transition is masked by noise.</div><div class="t m0 xed h9 y2f65 ff1 fs2 fc0 sc0 ls0 ws0">Table 29-16.<span class="_ _1a"> </span>Comparator sample/filter maximum latencies</div><div class="t m0 x9a h6f y2f66 ff1 fs4 fc0 sc0 ls0 ws0">Mode #<span class="_ _189"> </span><span class="v14">CR1[</span></div><div class="t m0 x7b h10 y2f67 ff1 fs4 fc0 sc0 ls0">EN]</div><div class="t m0 xd3 h10 y2f68 ff1 fs4 fc0 sc0 ls0">CR1[</div><div class="t m0 xd6 h10 y2f67 ff1 fs4 fc0 sc0 ls0">WE]</div><div class="t m0 x121 h10 y2f68 ff1 fs4 fc0 sc0 ls0">CR1[</div><div class="t m0 x8c h10 y2f67 ff1 fs4 fc0 sc0 ls0">SE]</div><div class="t m0 x127 h10 y2f68 ff1 fs4 fc0 sc0 ls0">CR0[FILTER</div><div class="t m0 x16 h10 y2f67 ff1 fs4 fc0 sc0 ls0">_CNT]</div><div class="t m0 x131 h10 y2f68 ff1 fs4 fc0 sc0 ls0">FPR[FILT_P</div><div class="t m0 x12a h13f y2f67 ff1 fs4 fc0 sc0 ls0 ws3c9">ER] <span class="ws0 v14">Operation<span class="_ _97"> </span>Maximum latency</span><span class="fs9 fc1 v2">1</span></div><div class="t m0 x50 h7 y2f69 ff2 fs4 fc0 sc0 ls0 ws3ca">1<span class="_ _42"> </span>0<span class="_ _5c"> </span>X X<span class="_ _49"> </span>X<span class="_ _62"> </span>X<span class="_ _2a"> </span>Disabled<span class="_ _16f"> </span>N/A</div><div class="t m0 x1b h7 y2f6a ff5 fs4 fc0 sc0 ls0 ws0">Table continues on the next page...</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">532<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf215" data-dest-detail='[533,"XYZ",null,438.6,null]'><div class="d m1" style="border-style:none;position:absolute;left:533.172000px;bottom:122.541000px;width:3.753000px;height:6.750000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
