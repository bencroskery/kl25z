<div id="pf232" class="pf w0 h0" data-page-no="232"><div class="pc pc232 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg232.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">The CMOD[1:0] bits may be read or written at any time. Disabling the TPM counter by</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">writing zero to the CMOD[1:0] bits does not affect the TPM counter value or other</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">registers, but must be acknowledged by the TPM counter clock domain before they read</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">as zero.</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">The external clock input passes through a synchronizer clocked by the TPM counter</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">clock to assure that counter transitions are properly aligned to counter clock transitions.</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">Therefore, to meet Nyquist criteria considering also jitter, the frequency of the external</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">clock source must be less than half of the counter clock frequency.</div><div class="t m0 x9 he y31c5 ff1 fs1 fc0 sc0 ls0 ws18f">31.4.2 Prescaler</div><div class="t m0 x9 hf y279a ff3 fs5 fc0 sc0 ls0 ws0">The selected counter clock source passes through a prescaler that is a 7-bit counter. The</div><div class="t m0 x9 hf y279b ff3 fs5 fc0 sc0 ls0 ws0">value of the prescaler is selected by the PS[2:0] bits. The following figure shows an</div><div class="t m0 x9 hf y952 ff3 fs5 fc0 sc0 ls0 ws0">example of the prescaler counter and TPM counter.</div><div class="c xe2 y31c6 w57 h153"><div class="t m0 x2 h154 y31c7 ff2 fsa4 fc0 sc0 ls0">0</div><div class="t m0 x117 h154 y31c8 ff2 fsa4 fc0 sc0 ls0">0</div><div class="t m0 x5 h154 y31c9 ff2 fsa4 fc0 sc0 ls0">0</div><div class="t m0 xb1 h154 y31c7 ff2 fsa4 fc0 sc0 ls236">0<span class="ls0 v0">0</span></div><div class="t m0 xb6 h154 y31ca ff2 fsa4 fc0 sc0 ls0 ws3e2">0 0</div><div class="t m0 x1b h154 y31c9 ff2 fsa4 fc0 sc0 ls0 ws3e3">0<span class="_ _e0"> </span>0<span class="_ _225"></span>0 0<span class="_ _e0"> </span>0</div><div class="t m0 x34 h154 y31c7 ff2 fsa4 fc0 sc0 ls0">1</div><div class="t m0 x2e h154 y31cb ff2 fsa4 fc0 sc0 ls0 ws3e4">1 1</div><div class="t m0 xad h154 y31c8 ff2 fsa4 fc0 sc0 ls0 ws3e5">2 2</div><div class="t m0 x147 h154 y31cc ff2 fsa4 fc0 sc0 ls0 ws3e6">3 3</div><div class="t m0 xa1 h154 y31c9 ff2 fsa4 fc0 sc0 ls0">1</div><div class="t m0 xfb h154 y31c7 ff2 fsa4 fc0 sc0 ls237">1<span class="ls0 ws3e7 v0">1<span class="_ _84"> </span>1 1<span class="_ _1b9"></span>1<span class="_ _84"> </span>1<span class="_ _84"> </span>1</span></div><div class="t m0 xdd h154 y31cd ff2 fsa4 fc0 sc0 ls0">1</div><div class="t m0 xcb h25 y31ce ff2 fse fc0 sc0 ls0 ws0">selected input clock</div><div class="t m0 x0 h25 y31cf ff2 fse fc0 sc0 ls0 ws0">prescaler counter</div><div class="t m0 xcb h1a y31d0 ff2 fsb fc0 sc0 ls0 ws0">timer module counting is up.</div><div class="t m0 xcb h1a y31d1 ff2 fsb fc0 sc0 ls0 ws0">PS[2:0] = 001</div><div class="t m0 xcb h1a y31d2 ff2 fsb fc0 sc0 ls0 ws0">CNTIN = 0x0000</div><div class="t m0 x0 h25 y31d3 ff2 fse fc0 sc0 ls0 ws0">timer module counter</div></div><div class="t m0 x4 h9 y31d4 ff1 fs2 fc0 sc0 ls0 ws0">Figure 31-78. Example of the Prescaler Counter</div><div class="t m0 x9 he y31d5 ff1 fs1 fc0 sc0 ls0 ws18f">31.4.3 Counter</div><div class="t m0 x9 hf y31d6 ff3 fs5 fc0 sc0 ls0 ws0">The TPM has a 16-bit counter that is used by the channels either for input or output</div><div class="t m0 x9 hf y31d7 ff3 fs5 fc0 sc0 ls0 ws0">modes. The counter updates from the selected clock divided by the prescaler.</div><div class="t m0 x9 hf y31d8 ff3 fs5 fc0 sc0 ls0 ws0">The TPM counter has these modes of operation:</div><div class="t m0 x33 hf y31d9 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>up counting (see <span class="fc1">Up Counting</span>)</div><div class="t m0 x33 hf y31da ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>up-down counting (see <span class="fc1">Up-Down Counting</span>)</div><div class="t m0 x9 h1b y31db ff1 fsc fc0 sc0 ls0 ws0">31.4.3.1<span class="_ _b"> </span>Up Counting</div><div class="t m0 x9 hf y31dc ff3 fs5 fc0 sc0 ls0 ws0">Up counting is selected when (CPWMS = 0)</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional Description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">562<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf232" data-dest-detail='[562,"XYZ",null,134.089,null]'><div class="d m1" style="border-style:none;position:absolute;left:174.040000px;bottom:173.589000px;width:72.730000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf233" data-dest-detail='[563,"XYZ",null,308.807,null]'><div class="d m1" style="border-style:none;position:absolute;left:209.810000px;bottom:157.589000px;width:111.608000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
