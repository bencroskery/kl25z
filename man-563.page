<div id="pf233" class="pf w0 h0" data-page-no="233"><div class="pc pc233 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg233.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">The value of zero is loaded into the TPM counter, and the counter increments until the</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">value of MOD is reached, at which point the counter is reloaded with zero.</div><div class="t m0 x9 hf y504 ff3 fs5 fc0 sc0 ls0 ws0">The TPM period when using up counting is (MOD + 0x0001) × period of the TPM</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">counter clock.</div><div class="t m0 x9 hf y672 ff3 fs5 fc0 sc0 ls0 ws0">The TOF bit is set when the TPM counter changes from MOD to zero.</div><div class="c x2c y31dd w58 h155"><div class="t m0 x0 h25 y31de ff2 fse fc0 sc0 ls0 ws0">MOD = 0x0004</div><div class="t m0 xcc h25 y31df ff2 fse fc0 sc0 ls0 ws0">T<span class="_ _16"></span>OF bit</div><div class="t m0 x3a h156 y31e0 ff2 fsa5 fc0 sc0 ls238">3<span class="ls239 v1b">4</span><span class="ls23a v0">0<span class="ls0 v1b">0</span></span></div><div class="t m0 x8c h157 y31e1 ff2 fsa5 fc0 sc0 ls0 ws3e8">1<span class="_ _b7"> </span>1<span class="_ _226"></span>2 <span class="v0">2</span></div><div class="t m0 x1d h156 y31e1 ff2 fsa5 fc0 sc0 ls0 ws3e9">3 3</div><div class="t m0 x23 h156 y31e0 ff2 fsa5 fc0 sc0 ls23b">4<span class="ls23c v1b">4</span><span class="ls23d v0">0<span class="ls23e v0">1<span class="ls0 v0">2</span></span></span></div><div class="t m0 x0 h25 y31e2 ff2 fse fc0 sc0 ls0 ws0">timer module counter</div><div class="t m0 x7e h25 y31e3 ff2 fse fc0 sc0 ls0 ws0">set TOF bit</div><div class="t m0 x60 h25 y31e4 ff2 fse fc0 sc0 ls0 ws0">period of timer module counter clock</div><div class="t m4c x11d h158 y31e5 ff2 fsa6 fc0 sc0 ls0 ws0">period of counting = (MOD + 0x0001) x period of timer module counter clock</div><div class="t m0 x131 h159 y31e6 ff2 fse fc0 sc0 ls0 ws0">set TOF bit<span class="_ _227"> </span><span class="v16">set TOF bit</span></div></div><div class="t m0 x51 h9 y31e7 ff1 fs2 fc0 sc0 ls0 ws0">Figure 31-79. Example of TPM Up Counting</div><div class="t m0 xda h8 y31e8 ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 xd4 hf y31e9 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>MOD = 0000 is a redundant condition. In this case, the</div><div class="t m0 xd7 hf y31ea ff3 fs5 fc0 sc0 ls0 ws0">TPM counter is always equal to MOD and the TOF bit is</div><div class="t m0 xd7 hf y31eb ff3 fs5 fc0 sc0 ls0 ws0">set in each rising edge of the TPM counter clock.</div><div class="t m0 x9 h1b y31ec ff1 fsc fc0 sc0 ls0 ws0">31.4.3.2<span class="_ _b"> </span>Up-Down Counting</div><div class="t m0 x9 hf y31ed ff3 fs5 fc0 sc0 ls0 ws0">Up-down counting is selected when (CPWMS = 1). When configured for up-down</div><div class="t m0 x9 hf y31ee ff3 fs5 fc0 sc0 ls0 ws0">counting, configuring MOD to less than 2 is not supported.</div><div class="t m0 x9 hf y31ef ff3 fs5 fc0 sc0 ls0 ws0">The value of zero is loaded into the TPM counter, and the counter increments until the</div><div class="t m0 x9 hf y31f0 ff3 fs5 fc0 sc0 ls0 ws0">value of MOD is reached, at which point the counter is decremented until it returns to</div><div class="t m0 x9 hf y31f1 ff3 fs5 fc0 sc0 ls0 ws0">zero and the up-down counting restarts.</div><div class="t m0 x9 hf y31f2 ff3 fs5 fc0 sc0 ls0 ws0">The TPM period when using up-down counting is 2 × MOD × period of the TPM counter</div><div class="t m0 x9 hf y31f3 ff3 fs5 fc0 sc0 ls0">clock.</div><div class="t m0 x9 hf y31f4 ff3 fs5 fc0 sc0 ls0 ws0">The TOF bit is set when the TPM counter changes from MOD to (MOD – 1).</div><div class="t m0 x7d h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 31 Timer/PWM Module (TPM)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>563</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
