<div id="pf245" class="pf w0 h0" data-page-no="245"><div class="pc pc245 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg245.png"/><div class="t m0 x9 h1b y502 ff1 fsc fc0 sc0 ls0 ws34a">32.4.1.1 Timers</div><div class="t m0 x9 hf y503 ff3 fs5 fc0 sc0 ls0 ws0">The timers generate triggers at periodic intervals, when enabled. The timers load the start</div><div class="t m0 x9 hf y504 ff3 fs5 fc0 sc0 ls0 ws0">values as specified in their LDVAL registers, count down to 0 and then load the</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">respective start value again. Each time a timer reaches 0, it will generate a trigger pulse</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">and set the interrupt flag.</div><div class="t m0 x9 hf y673 ff3 fs5 fc0 sc0 ls0 ws0">All interrupts can be enabled or masked by setting TCTRLn[TIE]. A new interrupt can be</div><div class="t m0 x9 hf y674 ff3 fs5 fc0 sc0 ls0 ws0">generated only after the previous one is cleared.</div><div class="t m0 x9 hf y23f0 ff3 fs5 fc0 sc0 ls0 ws0">If desired, the current counter value of the timer can be read via the CVAL registers.</div><div class="t m0 x9 hf y23f1 ff3 fs5 fc0 sc0 ls0 ws0">The counter period can be restarted, by first disabling, and then enabling the timer with</div><div class="t m0 x9 hf y1dd9 ff3 fs5 fc0 sc0 ls0 ws0">TCTRLn[TEN]. See the following figure.</div><div class="c x9 y33bb w24 h17c"><div class="t m0 xe2 h17d y33bc ff3 fsab fc0 sc0 ls0">p1</div><div class="t m51 x11e h17e y33bd ff3 fsac fc0 sc0 ls0 ws0">Timer enabled</div><div class="t m0 x48 h17f y33be ff3 fsab fc0 sc0 ls0 ws411">Disable<span class="fsad ws0"> </span></div><div class="t m0 x48 h17d y33bf ff3 fsab fc0 sc0 ls0">timer</div><div class="t m0 x40 h17f y33bc ff3 fsab fc0 sc0 ls0 ws411">p1<span class="fsad ls26a ws0"> </span>p1</div><div class="t m52 x11e h180 y33c0 ff3 fsae fc0 sc0 ls0 ws0">Start value = p1 </div><div class="t m0 x35 h17d y33c1 ff3 fsab fc0 sc0 ls0 ws0">Trigger </div><div class="t m0 x35 h17d y33c2 ff3 fsab fc0 sc0 ls0">event</div><div class="t m0 x97 h17d y33c3 ff3 fsab fc0 sc0 ls0">p1</div><div class="t m0 x77 h181 y33c4 ff3 fsaf fc0 sc0 ls0">Re-enable</div><div class="t m0 x77 h181 y33c5 ff3 fsaf fc0 sc0 ls0">timer</div></div><div class="t m0 x51 h9 y33c6 ff1 fs2 fc0 sc0 ls0 ws0">Figure 32-17. Stopping and starting a timer</div><div class="t m0 x9 hf y33c7 ff3 fs5 fc0 sc0 ls0 ws0">The counter period of a running timer can be modified, by first disabling the timer,</div><div class="t m0 x9 hf y33c8 ff3 fs5 fc0 sc0 ls0 ws0">setting a new load value, and then enabling the timer again. See the following figure.</div><div class="c x9 y33c9 w24 h17c"><div class="t m0 x89 h182 y33ca ff3 fsb0 fc0 sc0 ls0 ws0">Timer enabled<span class="_ _66"> </span><span class="vb">Disable timer,</span></div><div class="t m0 xe8 h183 y33cb ff3 fsb1 fc0 sc0 ls0 ws412">p1<span class="fsb2 ws0"> </span></div><div class="t m0 xde h184 y33cc ff3 fsb1 fc0 sc0 ls0">p1</div><div class="t m0 x144 h182 y33cd ff3 fsb0 fc0 sc0 ls0 ws0">Re-enable </div><div class="t m0 x144 h182 y33ce ff3 fsb0 fc0 sc0 ls0">timer</div><div class="t m0 x2c h182 y33cf ff3 fsb0 fc0 sc0 ls0 ws0">Start value = p1 </div><div class="t m53 x158 h185 y33d0 ff3 fsb3 fc0 sc0 ls0 ws0">Trigger </div><div class="t m53 x158 h185 y33d1 ff3 fsb3 fc0 sc0 ls0">event</div><div class="t m0 x18 h182 y33d2 ff3 fsb0 fc0 sc0 ls0 ws0">Set new load value</div><div class="t m0 x6 h184 y33d3 ff3 fsb1 fc0 sc0 ls0 ws413">p2 <span class="ws414 v0">p2 <span class="v0">p2</span></span></div></div><div class="t m0 x47 h9 y33d4 ff1 fs2 fc0 sc0 ls0 ws0">Figure 32-18. Modifying running timer period</div><div class="t m0 x9 hf y33d5 ff3 fs5 fc0 sc0 ls0 ws0">It is also possible to change the counter period without restarting the timer by writing</div><div class="t m0 x9 hf y33d6 ff3 fs5 fc0 sc0 ls0 ws0">LDVAL with the new load value. This value will then be loaded after the next trigger</div><div class="t m0 x9 hf y33d7 ff3 fs5 fc0 sc0 ls0 ws0">event. See the following figure.</div><div class="t m0 x150 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 32 Periodic Interrupt Timer (PIT)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>581</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
