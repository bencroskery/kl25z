<div id="pf253" class="pf w0 h0" data-page-no="253"><div class="pc pc253 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg253.png"/><div class="t m0 x9 h1b y502 ff1 fsc fc0 sc0 ls0 ws0">33.4.3.4<span class="_ _b"> </span>Glitch filter bypassed</div><div class="t m0 x9 hf y503 ff3 fs5 fc0 sc0 ls0 ws0">In Pulse Counter mode, when the glitch filter is bypassed, the selected input source</div><div class="t m0 x9 hf y504 ff3 fs5 fc0 sc0 ls0 ws0">increments the CNR every time it asserts. Before the LPTMR is first enabled, the selected</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">input source is forced to be asserted. This prevents the CNR from incrementing if the</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">selected input source is already asserted when the LPTMR is first enabled.</div><div class="t m0 x9 he y2b81 ff1 fs1 fc0 sc0 ls0 ws0">33.4.4<span class="_ _b"> </span>LPTMR compare</div><div class="t m0 x9 hf ybd7 ff3 fs5 fc0 sc0 ls0 ws0">When the CNR equals the value of the CMR and increments, the following events occur:</div><div class="t m0 x33 hf y14ba ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>CSR[TCF] is set.</div><div class="t m0 x33 hf y14bb ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>LPTMR interrupt is generated if CSR[TIE] is also set.</div><div class="t m0 x33 hf y14a8 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>LPTMR hardware trigger is generated.</div><div class="t m0 x33 hf y14a9 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>CNR is reset if CSR[TFC] is clear.</div><div class="t m0 x9 hf y34b5 ff3 fs5 fc0 sc0 ls0 ws0">When the LPTMR is enabled, the CMR can be altered only when CSR[TCF] is set. When</div><div class="t m0 x9 hf y219 ff3 fs5 fc0 sc0 ls0 ws0">updating the CMR, the CMR must be written and CSR[TCF] must be cleared before the</div><div class="t m0 x9 hf y21a ff3 fs5 fc0 sc0 ls0 ws0">LPTMR counter has incremented past the new LPTMR compare value.</div><div class="t m0 x9 he y34b6 ff1 fs1 fc0 sc0 ls0 ws0">33.4.5<span class="_ _b"> </span>LPTMR counter</div><div class="t m0 x9 hf y2b05 ff3 fs5 fc0 sc0 ls0 ws0">The CNR increments by one on every:</div><div class="t m0 x33 hf y34b7 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Prescaler clock in Time Counter mode with prescaler bypassed</div><div class="t m0 x33 hf y14ec ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Prescaler output in Time Counter mode with prescaler enabled</div><div class="t m0 x33 hf y34b8 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Input source assertion in Pulse Counter mode with glitch filter bypassed</div><div class="t m0 x33 hf y1e3f ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>Glitch filter output in Pulse Counter mode with glitch filter enabled</div><div class="t m0 x9 hf y2c0e ff3 fs5 fc0 sc0 ls0 ws0">The CNR is reset when the LPTMR is disabled or if the counter register overflows. If</div><div class="t m0 x9 hf y2c0f ff3 fs5 fc0 sc0 ls0 ws0">CSR[TFC] is cleared, then the CNR is also reset whenever CSR[TCF] is set.</div><div class="t m0 x9 hf y14f1 ff3 fs5 fc0 sc0 ls0 ws0">The CNR continues incrementing when the core is halted in Debug mode when</div><div class="t m0 x9 hf y14f2 ff3 fs5 fc0 sc0 ls0 ws0">configured for Pulse Counter mode, the CNR will stop incrementing when the core is</div><div class="t m0 x9 hf y34b9 ff3 fs5 fc0 sc0 ls0 ws0">halted in Debug mode when configured for Time Counter mode.</div><div class="t m0 x9 hf y14f3 ff3 fs5 fc0 sc0 ls0 ws0">The CNR cannot be initialized, but can be read at any time. On each read of the CNR,</div><div class="t m0 x9 hf y14f4 ff3 fs5 fc0 sc0 ls0 ws0">software must first write to the CNR with any value. This will synchronize and register</div><div class="t m0 x9 hf y34ba ff3 fs5 fc0 sc0 ls0 ws0">the current value of the CNR into a temporary register. The contents of the temporary</div><div class="t m0 x9 hf y34bb ff3 fs5 fc0 sc0 ls0 ws0">register are returned on each read of the CNR.</div><div class="t m0 x9 hf y14f7 ff3 fs5 fc0 sc0 ls0 ws0">When reading the CNR, the bus clock must be at least two times faster than the rate at</div><div class="t m0 x9 hf y34bc ff3 fs5 fc0 sc0 ls0 ws0">which the LPTMR counter is incrementing, otherwise incorrect data may be returned.</div><div class="t m0 x8a h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 33 Low-Power Timer (LPTMR)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>595</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
