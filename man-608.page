<div id="pf260" class="pf w0 h0" data-page-no="260"><div class="pc pc260 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg260.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">register. The RTC itself does not calculate the amount of compensation that is required,</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">although the 1 Hz clock is output to an external pin in support of external calibration</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0">logic.</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">Crystal compensation can be supported by using firmware and crystal characteristics to</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">determine the compensation amount. Temperature compensation can be supported by</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">firmware that periodically measures the external temperature via ADC and updates the</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">compensation register based on a look-up table that specifies the change in crystal</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">frequency over temperature.</div><div class="t m0 x9 hf yad5 ff3 fs5 fc0 sc0 ls0 ws0">The compensation logic alters the number of 32.768 kHz clock cycles it takes for the</div><div class="t m0 x9 hf yad6 ff3 fs5 fc0 sc0 ls0 ws0">prescaler register to overflow and increment the time seconds counter. The time</div><div class="t m0 x9 hf yad7 ff3 fs5 fc0 sc0 ls0 ws0">compensation value is used to adjust the number of clock cycles between -127 and +128.</div><div class="t m0 x9 hf y2040 ff3 fs5 fc0 sc0 ls0 ws0">Cycles are added or subtracted from the prescaler register when the prescaler register</div><div class="t m0 x9 hf y2041 ff3 fs5 fc0 sc0 ls0 ws0">equals 0x3FFF and then increments. The compensation interval is used to adjust the</div><div class="t m0 x9 hf yaf1 ff3 fs5 fc0 sc0 ls0 ws0">frequency at which the time compensation value is used, that is, from once a second to</div><div class="t m0 x9 hf yaf2 ff3 fs5 fc0 sc0 ls0 ws0">once every 256 seconds.</div><div class="t m0 x9 hf yadc ff3 fs5 fc0 sc0 ls0 ws0">Updates to the time compensation register will not take effect until the next time the time</div><div class="t m0 x9 hf y2042 ff3 fs5 fc0 sc0 ls0 ws0">seconds register increments and provided the previous compensation interval has expired.</div><div class="t m0 x9 hf y2043 ff3 fs5 fc0 sc0 ls0 ws0">When the compensation interval is set to other than once a second then the compensation</div><div class="t m0 x9 hf y2321 ff3 fs5 fc0 sc0 ls0 ws0">is applied in the first second interval and the remaining second intervals receive no</div><div class="t m0 x9 hf yaf7 ff3 fs5 fc0 sc0 ls0">compensation.</div><div class="t m0 x9 hf y2322 ff3 fs5 fc0 sc0 ls0 ws0">Compensation is disabled by configuring the time compensation register to zero.</div><div class="t m0 x9 he y35a0 ff1 fs1 fc0 sc0 ls0 ws0">34.3.4<span class="_ _b"> </span>Time alarm</div><div class="t m0 x9 hf y35a1 ff3 fs5 fc0 sc0 ls0 ws0">The time alarm register, SR[TAF], and IER[TAIE] allow the RTC to generate an</div><div class="t m0 x9 hf y35a2 ff3 fs5 fc0 sc0 ls0 ws0">interrupt at a predefined time. The 32-bit time alarm register is compared with the 32-bit</div><div class="t m0 x9 hf y35a3 ff3 fs5 fc0 sc0 ls0 ws0">time seconds register each time it increments. The SR[TAF] will set when the time alarm</div><div class="t m0 x9 hf y35a4 ff3 fs5 fc0 sc0 ls0 ws0">register equals the time seconds register and the time seconds register increments.</div><div class="t m0 x9 hf y35a5 ff3 fs5 fc0 sc0 ls0 ws0">The time alarm flag is cleared by writing the time alarm register. This will usually be the</div><div class="t m0 x9 hf y35a6 ff3 fs5 fc0 sc0 ls0 ws0">next alarm value, although writing a value that is less than the time seconds register, such</div><div class="t m0 x9 hf y1338 ff3 fs5 fc0 sc0 ls0 ws0">as zero, will prevent the time alarm flag from setting again. The time alarm flag cannot</div><div class="t m0 x9 hf y1339 ff3 fs5 fc0 sc0 ls0 ws0">otherwise be disabled, although the interrupt it generates is enabled or disabled by</div><div class="t m0 x9 hf y133a ff3 fs5 fc0 sc0 ls0">IER[TAIE].</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">608<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
