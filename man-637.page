<div id="pf27d" class="pf w0 h0" data-page-no="27d"><div class="pc pc27d w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg27d.png"/><div class="t m0 x9 h1b y2d7 ff1 fsc fc0 sc0 ls0 ws0">35.4.18<span class="_ _b"> </span>Frame Number Register High (USB<span class="ff7 ws24e">x</span>_FRMNUMH)</div><div class="t m0 x9 hf ybf ff3 fs5 fc0 sc0 ls0 ws0">Contains an 11-bit value used to compute the address where the current Buffer Descriptor</div><div class="t m0 x9 hf y282 ff3 fs5 fc0 sc0 ls0 ws0">Table (BDT) resides in system memory.</div><div class="t m0 x9 h7 y2a78 ff2 fs4 fc0 sc0 ls0 ws0">Address: 4007_2000h base + A4h offset = 4007_20A4h</div><div class="t m0 x81 h1d y2a79 ff2 fsd fc0 sc0 ls0 ws284">Bit<span class="_ _165"> </span>7 6 5 4 3 2 1 0</div><div class="t m0 x1 h7 y8e6 ff2 fs4 fc0 sc0 ls0 ws2ba">Read 0<span class="_ _17b"> </span><span class="ve">FRM[10:8]</span></div><div class="t m0 x8b h7 y386b ff2 fs4 fc0 sc0 ls0">Write</div><div class="t m0 x12c h7 y386c ff2 fs4 fc0 sc0 ls0 ws289">Reset <span class="ls1c4 ws28a v1b">00000000<span class="_ _19a"></span></span></div><div class="t m0 x4a h9 y2a7d ff1 fs2 fc0 sc0 ls0 ws20b">USB<span class="ff7">x</span><span class="ws0">_FRMNUMH field descriptions</span></div><div class="t m0 x12c h10 y2a7e ff1 fs4 fc0 sc0 ls0 ws259">Field Description</div><div class="t m0 x1 h7 y2a7f ff2 fs4 fc0 sc0 ls0">7–3</div><div class="t m0 x91 h7 y2a80 ff2 fs4 fc0 sc0 ls0">Reserved</div><div class="t m0 x83 h7 y2a7f ff2 fs4 fc0 sc0 ls0 ws0">This field is reserved.</div><div class="t m0 x83 h7 y2a80 ff2 fs4 fc0 sc0 ls0 ws0">This read-only field is reserved and always has the value 0.</div><div class="t m0 x1 h7 y2a81 ff2 fs4 fc0 sc0 ls0">2–0</div><div class="t m0 xb9 h7 y2fc ff2 fs4 fc0 sc0 ls0">FRM[10:8]</div><div class="t m0 x83 h7 y2a81 ff2 fs4 fc0 sc0 ls0 ws0">This 3-bit field and the 8-bit field in the Frame Number Register Low are used to compute the address</div><div class="t m0 x83 h7 y2fc ff2 fs4 fc0 sc0 ls0 ws0">where the current Buffer Descriptor Table (BDT) resides in system memory.</div><div class="t m0 x9 h1b y2a82 ff1 fsc fc0 sc0 ls0 ws0">35.4.19<span class="_ _b"> </span>Token register (USB<span class="ff7 ws24e">x</span>_TOKEN)</div><div class="t m0 x9 hf y386d ff3 fs5 fc0 sc0 ls0 ws0">Used to initiate USB transactions when in host mode (HOSTMODEEN=1). When the</div><div class="t m0 x9 hf y2a84 ff3 fs5 fc0 sc0 ls0 ws0">software needs to execute a USB transaction to a peripheral, it writes the TOKEN type</div><div class="t m0 x9 hf y30e8 ff3 fs5 fc0 sc0 ls0 ws0">and endpoint to this register. After this register has been written, the USB module begins</div><div class="t m0 x9 hf y861 ff3 fs5 fc0 sc0 ls0 ws0">the specified USB transaction to the address contained in the address register. The</div><div class="t m0 x9 hf y862 ff3 fs5 fc0 sc0 ls0 ws0">processor core must always check that the TOKEN_BUSY bit in the control register is</div><div class="t m0 x9 hf y386e ff3 fs5 fc0 sc0 ls0 ws0">not 1 before writing to the Token Register. This ensures that the token commands are not</div><div class="t m0 x9 hf y386f ff3 fs5 fc0 sc0 ls0 ws0">overwritten before they can be executed. The address register and endpoint control</div><div class="t m0 x9 hf y3870 ff3 fs5 fc0 sc0 ls0 ws0">register 0 are also used when performing a token command and therefore must also be</div><div class="t m0 x9 hf y3871 ff3 fs5 fc0 sc0 ls0 ws0">written before the Token Register. The address register is used to select the USB</div><div class="t m0 x9 hf y3872 ff3 fs5 fc0 sc0 ls0 ws0">peripheral address transmitted by the token command. The endpoint control register</div><div class="t m0 x9 hf y3873 ff3 fs5 fc0 sc0 ls0 ws0">determines the handshake and retry policies used during the transfer.</div><div class="t m0 x9 h7 y370c ff2 fs4 fc0 sc0 ls0 ws0">Address: 4007_2000h base + A8h offset = 4007_20A8h</div><div class="t m0 x81 h1d y3874 ff2 fsd fc0 sc0 ls0 ws284">Bit<span class="_ _165"> </span>7 6 5 4 3 2 1 0</div><div class="t m0 x1 h7 y3875 ff2 fs4 fc0 sc0 ls0 ws45d">Read <span class="ws45e ve">TOKENPID TOKENENDPT</span></div><div class="t m0 x8b h7 y3876 ff2 fs4 fc0 sc0 ls0">Write</div><div class="t m0 x12c h7 y3877 ff2 fs4 fc0 sc0 ls0 ws2ab">Reset <span class="ls1c4 ws28a v1b">00000000<span class="_ _19a"></span></span></div><div class="t m0 xf2 h9 y3878 ff1 fs2 fc0 sc0 ls0 ws20b">USB<span class="ff7">x</span><span class="ws0">_TOKEN field descriptions</span></div><div class="t m0 x12c h10 y3879 ff1 fs4 fc0 sc0 ls0 ws25f">Field Description</div><div class="t m0 x1 h7 y387a ff2 fs4 fc0 sc0 ls0">7–4</div><div class="t m0 x52 h7 y387b ff2 fs4 fc0 sc0 ls0">TOKENPID</div><div class="t m0 x83 h7 y387a ff2 fs4 fc0 sc0 ls0 ws0">Contains the token type executed by the USB module.</div><div class="t m0 x1b h7 y387c ff5 fs4 fc0 sc0 ls0 ws0">Table continues on the next page...</div><div class="t m0 xea h10 y17b ff1 fs4 fc0 sc0 ls0 ws0">Chapter 35 Universal Serial Bus OTG Controller (USBOTG)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>637</div><a class="l" href="#pf27d" data-dest-detail='[637,"XYZ",null,511.2,null]'><div class="d m1" style="border-style:none;position:absolute;left:247.498000px;bottom:584.700000px;width:5.004000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf27d" data-dest-detail='[637,"XYZ",null,484.7,null]'><div class="d m1" style="border-style:none;position:absolute;left:452.994000px;bottom:580.200000px;width:42.012000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf27d" data-dest-detail='[637,"XYZ",null,92.5501,null]'><div class="d m1" style="border-style:none;position:absolute;left:198.996000px;bottom:158.050000px;width:46.008000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf27e" data-dest-detail='[638,"XYZ",null,645.917,null]'><div class="d m1" style="border-style:none;position:absolute;left:415.247000px;bottom:158.050000px;width:61.506000px;height:9.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
