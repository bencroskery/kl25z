<div id="pf288" class="pf w0 h0" data-page-no="288"><div class="pc pc288 w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg288.png"/><div class="t m0 x9 he y1c7 ff1 fs1 fc0 sc0 ls0 ws0">35.7.1<span class="_ _b"> </span>OTG dual role A device operation</div><div class="t m0 x9 hf y1c8 ff3 fs5 fc0 sc0 ls0 ws0">A device is considered the A device because of the type of cable attached. If the USB</div><div class="t m0 x9 hf y9de ff3 fs5 fc0 sc0 ls0 ws0">Type A connector or the USB Type Mini A connector is plugged into the device, it is</div><div class="t m0 x9 hf y9df ff3 fs5 fc0 sc0 ls0 ws0">considered the A device.</div><div class="t m0 x9 hf y9e0 ff3 fs5 fc0 sc0 ls0 ws0">A dual role A device operates as the following flow diagram and state description table</div><div class="t m0 x9 hf y9e1 ff3 fs5 fc0 sc0 ls0">illustrates.</div><div class="c xca y393e w69 h195"><div class="t m0 xed h7 y393f ff2 fs4 fc0 sc0 ls110 ws2d9">A_IDLE</div><div class="t m0 x9f h7 y3940 ff2 fs4 fc0 sc0 ls0 ws46f">A_W<span class="_ _16"></span>AIT_VF<span class="_ _153"></span>ALL A_W<span class="_ _16"></span>AIT_VRISE</div><div class="t m0 x16b h7 y3941 ff2 fs4 fc0 sc0 ls0 ws190">A_PERIPHERAL</div><div class="t m0 x14c h7 y3942 ff2 fs4 fc0 sc0 ls0 ws190">A_SUSPEND</div><div class="t m0 x132 h7 y3943 ff2 fs4 fc0 sc0 ls110 ws2d9">B_IDLE</div><div class="t m0 x7a h7 y3941 ff2 fs4 fc0 sc0 ls0 ws190">A_W<span class="_ _16"></span>AIT_BCON</div><div class="t m0 x18 h7 y3942 ff2 fs4 fc0 sc0 ls0 ws190">A_HOST</div></div><div class="t m0 x9c h9 y3944 ff1 fs2 fc0 sc0 ls0 ws0">Figure 35-93. Dual role A device flow diagram</div><div class="t m0 xf0 h9 y3945 ff1 fs2 fc0 sc0 ls0 ws0">Table 35-96.<span class="_ _1a"> </span>State descriptions for the dual role A device flow</div><div class="t m0 x89 h10 y3946 ff1 fs4 fc0 sc0 ls0 ws470">State Action<span class="_ _23d"> </span>Response</div><div class="t m0 x2c h7 y3947 ff2 fs4 fc0 sc0 ls0 ws0">A_IDLE<span class="_ _7c"> </span>If ID Interrupt.</div><div class="t m0 x15 h7 y3948 ff2 fs4 fc0 sc0 ls0 ws0">The cable has been un-plugged or a Type B cable has been</div><div class="t m0 x15 h7 y3949 ff2 fs4 fc0 sc0 ls0 ws0">attached. The device now acts as a Type B device.</div><div class="t m0 xd5 h7 y3947 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_IDLE</div><div class="t m0 x15 h7 y394a ff2 fs4 fc0 sc0 ls0 ws0">If the A application wants to use the bus or if the B device is doing</div><div class="t m0 x15 h7 y394b ff2 fs4 fc0 sc0 ls0 ws0">an SRP as indicated by an A_SESS_VLD Interrupt or Attach or Port</div><div class="t m0 x15 h7 y394c ff2 fs4 fc0 sc0 ls0 ws0">Status Change Interrupt check data line for 5 â€“10 msec pulsing.</div><div class="t m0 xd5 h7 y394a ff2 fs4 fc0 sc0 ls0 ws0">Go to A_WAIT_VRISE</div><div class="t m0 xd5 h7 y394d ff2 fs4 fc0 sc0 ls0 ws0">Turn on DRV_VBUS</div><div class="t m0 x2c h7 y394e ff2 fs4 fc0 sc0 ls0 ws0">A_WAIT_VRISE<span class="_ _ab"> </span>If ID Interrupt or if A_VBUS_VLD is false after 100 msec</div><div class="t m0 x15 h7 y394f ff2 fs4 fc0 sc0 ls0 ws0">The cable has been changed or the A device cannot support the</div><div class="t m0 x15 h7 y3950 ff2 fs4 fc0 sc0 ls0 ws0">current required from the B device.</div><div class="t m0 xd5 h7 y394e ff2 fs4 fc0 sc0 ls0 ws0">Go to A_WAIT_VFALL</div><div class="t m0 xd5 h7 y394f ff2 fs4 fc0 sc0 ls0 ws0">Turn off DRV_VBUS</div><div class="t m0 x15 h7 y3951 ff2 fs4 fc0 sc0 ls0 ws0">If A_VBUS_VLD interrupt<span class="_ _c2"> </span>Go to A_WAIT_BCON</div><div class="t m0 x1b h7 y3952 ff5 fs4 fc0 sc0 ls0 ws0">Table continues on the next page...</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">On-The-Go operation</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">648<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
