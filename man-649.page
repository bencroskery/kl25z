<div id="pf289" class="pf w0 h0" data-page-no="289"><div class="pc pc289 w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg289.png"/><div class="t m0 x81 h9 y1a5 ff1 fs2 fc0 sc0 ls0 ws0">Table 35-96.<span class="_ _1a"> </span>State descriptions for the dual role A device flow (continued)</div><div class="t m0 x89 h10 y1a6 ff1 fs4 fc0 sc0 ls0 ws470">State Action<span class="_ _23d"> </span>Response</div><div class="t m0 x2c h7 y1a7 ff2 fs4 fc0 sc0 ls0 ws0">A_WAIT_BCON<span class="_ _61"> </span>After 200 ms without Attach or ID Interrupt. (This could wait forever</div><div class="t m0 x15 h7 y1a8 ff2 fs4 fc0 sc0 ls0 ws0">if desired.)</div><div class="t m0 xd5 h7 y1a7 ff2 fs4 fc0 sc0 ls0 ws0">Go to A_WAIT_FALL</div><div class="t m0 xd5 h7 y4e6 ff2 fs4 fc0 sc0 ls0 ws0">Turn off DRV_VBUS</div><div class="t m0 x15 h7 y4e7 ff2 fs4 fc0 sc0 ls0 ws0">A_VBUS_VLD Interrupt and B device attaches<span class="_ _da"> </span>Go to A_HOST</div><div class="t m0 xd5 h7 y3953 ff2 fs4 fc0 sc0 ls0 ws0">Turn on Host mode</div><div class="t m0 x2c h7 y3954 ff2 fs4 fc0 sc0 ls0 ws0">A_HOST<span class="_ _85"> </span>Enumerate Device determine OTG Support.</div><div class="t m0 x15 h7 y3955 ff2 fs4 fc0 sc0 ls0 ws0">If A_VBUS_VLD/ Interrupt or A device is done and doesn&apos;t think he</div><div class="t m0 x15 h7 y3956 ff2 fs4 fc0 sc0 ls0 ws0">wants to do something soon or the B device disconnects</div><div class="t m0 xd5 h7 y3955 ff2 fs4 fc0 sc0 ls0 ws0">Go to A_WAIT_VFALL</div><div class="t m0 xd5 h7 y3957 ff2 fs4 fc0 sc0 ls0 ws0">Turn off Host mode</div><div class="t m0 xd5 h7 y3958 ff2 fs4 fc0 sc0 ls0 ws0">Turn off DRV_VBUS</div><div class="t m0 x15 h7 y3959 ff2 fs4 fc0 sc0 ls0 ws0">If the A device is finished with session or if the A device wants to</div><div class="t m0 x15 h7 y395a ff2 fs4 fc0 sc0 ls0 ws0">allow the B device to take bus.</div><div class="t m0 xd5 h7 y3959 ff2 fs4 fc0 sc0 ls0 ws0">Go to A_SUSPEND</div><div class="t m0 x15 h7 y395b ff2 fs4 fc0 sc0 ls0 ws0">ID Interrupt or the B device disconnects<span class="_ _23e"> </span>Go to A_WAIT_BCON</div><div class="t m0 x2c h7 y395c ff2 fs4 fc0 sc0 ls0 ws0">A_SUSPEND<span class="_ _2a"> </span>If ID Interrupt, or if 150 ms B disconnect timeout (This timeout value</div><div class="t m0 x15 h7 y395d ff2 fs4 fc0 sc0 ls0 ws0">could be longer) or if A_VBUS_VLD\ Interrupt</div><div class="t m0 xd5 h7 y395c ff2 fs4 fc0 sc0 ls0 ws0">Go to A_WAIT_VFALL</div><div class="t m0 xd5 h7 y395e ff2 fs4 fc0 sc0 ls0 ws0">Turn off DRV_VBUS</div><div class="t m0 x15 h7 y3ec ff2 fs4 fc0 sc0 ls0 ws0">If HNP enabled, and B disconnects in 150 ms then B device is</div><div class="t m0 x15 h7 y4a0 ff2 fs4 fc0 sc0 ls0 ws0">becoming the host.</div><div class="t m0 xd5 h7 y3ec ff2 fs4 fc0 sc0 ls0 ws0">Go to A_PERIPHERAL</div><div class="t m0 xd5 h7 y395f ff2 fs4 fc0 sc0 ls0 ws0">Turn off Host mode</div><div class="t m0 x15 h7 y3960 ff2 fs4 fc0 sc0 ls0 ws0">If A wants to start another session<span class="_ _23f"> </span>Go to A_HOST</div><div class="t m0 x2c h7 y3961 ff2 fs4 fc0 sc0 ls0 ws0">A_PERIPHERAL<span class="_ _ad"> </span>If ID Interrupt or if A_VBUS_VLD interrupt<span class="_ _29"> </span>Go to A_WAIT_VFALL</div><div class="t m0 xd5 h7 y3962 ff2 fs4 fc0 sc0 ls0 ws0">Turn off DRV_VBUS.</div><div class="t m0 x15 h7 y3963 ff2 fs4 fc0 sc0 ls0 ws0">If 3 â€“200 ms of Bus Idle<span class="_ _240"> </span>Go to A_WAIT_BCON</div><div class="t m0 xd5 h7 y3964 ff2 fs4 fc0 sc0 ls0 ws0">Turn on Host mode</div><div class="t m0 x2c h7 y3965 ff2 fs4 fc0 sc0 ls0 ws0">A_WAIT_VFALL<span class="_ _71"> </span>If ID Interrupt or (A_SESS_VLD/ &amp; b_conn/)<span class="_ _e7"> </span>Go to A_IDLE</div><div class="t m0 x9 he y3966 ff1 fs1 fc0 sc0 ls0 ws0">35.7.2<span class="_ _b"> </span>OTG dual role B device operation</div><div class="t m0 x9 hf y3967 ff3 fs5 fc0 sc0 ls0 ws0">A device is considered a B device if it connected to the bus with a USB Type B cable or a</div><div class="t m0 x9 hf y2504 ff3 fs5 fc0 sc0 ls0 ws0">USB Type Mini B cable.</div><div class="t m0 x9 hf y3968 ff3 fs5 fc0 sc0 ls0 ws0">A dual role B device operates as the following flow diagram and state description table</div><div class="t m0 x9 hf y3969 ff3 fs5 fc0 sc0 ls0">illustrates.</div><div class="t m0 xea h10 y452 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 35 Universal Serial Bus OTG Controller (USBOTG)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>649</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
