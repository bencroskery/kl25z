<div id="pf28a" class="pf w0 h0" data-page-no="28a"><div class="pc pc28a w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg28a.png"/><div class="c xd4 y396a w6a h196"><div class="t m0 xae h7 y396b ff2 fs4 fc0 sc0 ls110 ws2d9">B_IDLE</div><div class="t m0 x13d h7 y396c ff2 fs4 fc0 sc0 ls0 ws471">B_HOST B_SRP_INIT</div><div class="t m0 x84 h7 y396d ff2 fs4 fc0 sc0 ls0 ws190">B_W<span class="_ _16"></span>AIT_ACON</div><div class="t m0 xa h7 y396b ff2 fs4 fc0 sc0 ls110 ws2d9">A_IDLE</div><div class="t m0 x4c h7 y396d ff2 fs4 fc0 sc0 ls0 ws190">B_PERIPHERAL</div></div><div class="t m0 x9c h9 y396e ff1 fs2 fc0 sc0 ls0 ws0">Figure 35-94. Dual role B device flow diagram</div><div class="t m0 x10b h9 y396f ff1 fs2 fc0 sc0 ls0 ws0">Table 35-97.<span class="_ _1a"> </span>State descriptions for the dual role B device flow</div><div class="t m0 x89 h10 y3970 ff1 fs4 fc0 sc0 ls0 ws470">State Action<span class="_ _23d"> </span>Response</div><div class="t m0 x2c h7 y3971 ff2 fs4 fc0 sc0 ls0 ws0">B_IDLE<span class="_ _7c"> </span>If ID\ Interrupt.</div><div class="t m0 x15 h7 y3972 ff2 fs4 fc0 sc0 ls0 ws0">A Type A cable has been plugged in and the device should now</div><div class="t m0 x15 h7 y3973 ff2 fs4 fc0 sc0 ls0 ws0">respond as a Type A device.</div><div class="t m0 xd5 h7 y3971 ff2 fs4 fc0 sc0 ls0 ws0">Go to A_IDLE</div><div class="t m0 x15 h7 y3974 ff2 fs4 fc0 sc0 ls0 ws0">If B_SESS_VLD Interrupt.</div><div class="t m0 x15 h7 y3975 ff2 fs4 fc0 sc0 ls0 ws0">The A device has turned on VBUS and begins a session.</div><div class="t m0 xd5 h7 y3974 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_PERIPHERAL</div><div class="t m0 xd5 h7 y3975 ff2 fs4 fc0 sc0 ls0 ws0">Turn on DP_HIGH</div><div class="t m0 x15 h7 y3976 ff2 fs4 fc0 sc0 ls0 ws0">If B application wants the bus and Bus is Idle for 2 ms and the</div><div class="t m0 x15 h7 y3977 ff2 fs4 fc0 sc0 ls0 ws0">B_SESS_END bit is set, the B device can perform an SRP.</div><div class="t m0 xd5 h7 y3976 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_SRP_INIT</div><div class="t m0 xd5 h7 y3978 ff2 fs4 fc0 sc0 ls0 ws0">Pulse CHRG_VBUS</div><div class="t m0 xd5 h7 y3979 ff2 fs4 fc0 sc0 ls0 ws0">Pulse DP_HIGH 5-10</div><div class="t m0 xd5 h7 y397a ff2 fs4 fc0 sc0 ls0">ms</div><div class="t m0 x2c h7 y397b ff2 fs4 fc0 sc0 ls0 ws0">B_SRP_INIT<span class="_ _223"> </span>If ID\ Interrupt or SRP Done (SRP must be done in less than 100</div><div class="t m0 x15 h7 y397c ff2 fs4 fc0 sc0 ls0">ms.)</div><div class="t m0 xd5 h7 y397b ff2 fs4 fc0 sc0 ls0 ws0">Go to B_IDLE</div><div class="t m0 x2c h7 y397d ff2 fs4 fc0 sc0 ls0 ws0">B_PERIPHERAL<span class="_ _ad"> </span>If HNP enabled and the bus is suspended and B wants the bus, the</div><div class="t m0 x15 h7 y397e ff2 fs4 fc0 sc0 ls0 ws0">B device can become the host.</div><div class="t m0 xd5 h7 y397d ff2 fs4 fc0 sc0 ls0 ws0">Go to B_WAIT_ACON</div><div class="t m0 xd5 h7 y397f ff2 fs4 fc0 sc0 ls0 ws0">Turn off DP_HIGH</div><div class="t m0 x2c h7 y3980 ff2 fs4 fc0 sc0 ls0 ws0">B_WAIT_ACON<span class="_ _61"> </span>If A connects, an attach interrupt is received<span class="_ _13c"> </span>Go to B_HOST</div><div class="t m0 xd5 h7 y3981 ff2 fs4 fc0 sc0 ls0 ws0">Turn on Host Mode</div><div class="t m0 x15 h7 y3982 ff2 fs4 fc0 sc0 ls0 ws0">If ID\ Interrupt or B_SESS_VLD/ Interrupt</div><div class="t m0 x15 h7 y3983 ff2 fs4 fc0 sc0 ls0 ws0">If the cable changes or if VBUS goes away, the host doesn&apos;t support</div><div class="t m0 x15 h7 y3984 ff2 fs4 fc0 sc0 ls0">us.</div><div class="t m0 x15 h7 y3985 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_IDLE</div><div class="t m0 xd5 h7 y3982 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_IDLE</div><div class="t m0 x15 h7 y3986 ff2 fs4 fc0 sc0 ls0 ws0">If 3.125 ms expires or if a Resume occurs<span class="_ _29"> </span>Go to B_PERIPHERAL</div><div class="t m0 x2c h7 y3987 ff2 fs4 fc0 sc0 ls0 ws0">B_HOST<span class="_ _85"> </span>If ID\ Interrupt or B_SESS_VLD\ Interrupt</div><div class="t m0 x15 h7 y3988 ff2 fs4 fc0 sc0 ls0 ws0">If the cable changes or if VBUS goes away, the host doesn&apos;t support</div><div class="t m0 x15 h7 y3989 ff2 fs4 fc0 sc0 ls0">us.</div><div class="t m0 xd5 h7 y3987 ff2 fs4 fc0 sc0 ls0 ws0">Go to B_IDLE</div><div class="t m0 x15 h7 y398a ff2 fs4 fc0 sc0 ls0 ws0">If B application is done or A disconnects<span class="_ _75"> </span>Go to B_PERIPHERAL</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">On-The-Go operation</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">650<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
