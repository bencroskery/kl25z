<div id="pf29a" class="pf w0 h0" data-page-no="29a"><div class="pc pc29a w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg29a.png"/><div class="t m0 x1b h9 y1a5 ff1 fs2 fc0 sc0 ls0 ws0">SPI0_S field descriptions</div><div class="t m0 x12c h10 y1a6 ff1 fs4 fc0 sc0 ls0 ws259">Field Description</div><div class="t m0 x97 h7 y1a7 ff2 fs4 fc0 sc0 ls0">7</div><div class="t m0 x95 h7 y1a8 ff2 fs4 fc0 sc0 ls0">SPRF</div><div class="t m0 x83 h7 y1a7 ff2 fs4 fc0 sc0 ls0 ws0">SPI read buffer full flag</div><div class="t m0 x83 h7 y103a ff2 fs4 fc0 sc0 ls0 ws0">SPRF is set at the completion of an SPI transfer to indicate that received data may be read from the SPI</div><div class="t m0 x83 h7 y1f31 ff2 fs4 fc0 sc0 ls0 ws0">data (D) register. When the receive DMA request is disabled (RXDMAE is 0), SPRF is cleared by reading</div><div class="t m0 x83 h7 y1f32 ff2 fs4 fc0 sc0 ls0 ws0">SPRF while it is set and then reading the SPI data register. When the receive DMA request is enabled</div><div class="t m0 x83 h7 y1f33 ff2 fs4 fc0 sc0 ls0 ws0">(RXDMAE is 1), SPRF is automatically cleared when the DMA transfer for the receive DMA request is</div><div class="t m0 x83 h7 y1f34 ff2 fs4 fc0 sc0 ls0 ws0">completed (RX DMA Done is asserted).</div><div class="t m0 x83 h7 y2b8 ff2 fs4 fc0 sc0 ls0 ws0">0<span class="_ _28"> </span>No data available in the receive data buffer</div><div class="t m0 x83 h7 y103d ff2 fs4 fc0 sc0 ls1f4">1<span class="ls0 ws0 v18">Data available in the receive data buffer</span></div><div class="t m0 x97 h7 y3acc ff2 fs4 fc0 sc0 ls0">6</div><div class="t m0 x95 h7 y3acd ff2 fs4 fc0 sc0 ls0">SPMF</div><div class="t m0 x83 h7 y3acc ff2 fs4 fc0 sc0 ls0 ws0">SPI match flag</div><div class="t m0 x83 h7 y3ace ff2 fs4 fc0 sc0 ls0 ws0">SPMF is set after SPRF is 1 when the value in the receive data buffer matches the value in the M register.</div><div class="t m0 x83 h7 y3379 ff2 fs4 fc0 sc0 ls0 ws0">To clear the flag, read SPMF when it is set and then write a 1 to it.</div><div class="t m0 x83 h7 y337b ff2 fs4 fc0 sc0 ls0 ws0">0<span class="_ _28"> </span>Value in the receive data buffer does not match the value in the M register</div><div class="t m0 x83 h7 y272f ff2 fs4 fc0 sc0 ls0 ws0">1<span class="_ _28"> </span>Value in the receive data buffer matches the value in the M register</div><div class="t m0 x97 h7 y3acf ff2 fs4 fc0 sc0 ls0">5</div><div class="t m0 x117 h7 y2b70 ff2 fs4 fc0 sc0 ls0">SPTEF</div><div class="t m0 x83 h7 y3acf ff2 fs4 fc0 sc0 ls0 ws0">SPI transmit buffer empty flag</div><div class="t m0 x83 h7 y1ca0 ff2 fs4 fc0 sc0 ls0 ws0">This bit is set when the transmit data buffer is empty. When the transmit DMA request is disabled</div><div class="t m0 x83 h7 y2fcb ff2 fs4 fc0 sc0 ls0 ws0">(TXDMAE is 0), SPTEF is cleared by reading the S register with SPTEF set and then writing a data value</div><div class="t m0 x83 h7 y3ad0 ff2 fs4 fc0 sc0 ls0 ws0">to the transmit buffer at D. The S register must be read with SPTEF set to 1 before writing data to the D</div><div class="t m0 x83 h7 y3ad1 ff2 fs4 fc0 sc0 ls0 ws0">register; otherwise, the D write is ignored. When the transmit DMA request is enabled (TXDMAE is 1),</div><div class="t m0 x83 h7 y3ad2 ff2 fs4 fc0 sc0 ls0 ws0">SPTEF is automatically cleared when the DMA transfer for the transmit DMA request is completed (TX</div><div class="t m0 x83 h7 y3ad3 ff2 fs4 fc0 sc0 ls0 ws0">DMA Done is asserted). SPTEF is automatically set when all data from the transmit buffer transfers into</div><div class="t m0 x83 h7 y3ad4 ff2 fs4 fc0 sc0 ls0 ws0">the transmit shift register. For an idle SPI, data written to D is transferred to the shifter almost immediately</div><div class="t m0 x83 h7 y3ad5 ff2 fs4 fc0 sc0 ls0 ws0">so that SPTEF is set within two bus cycles, allowing a second set of data to be queued into the transmit</div><div class="t m0 x83 h7 y3ad6 ff2 fs4 fc0 sc0 ls0 ws0">buffer. After completion of the transfer of the data in the shift register, the queued data from the transmit</div><div class="t m0 x83 h7 y3827 ff2 fs4 fc0 sc0 ls0 ws0">buffer automatically moves to the shifter, and SPTEF is set to indicate that room exists for new data in the</div><div class="t m0 x83 h7 y3ad7 ff2 fs4 fc0 sc0 ls0 ws0">transmit buffer. If no new data is waiting in the transmit buffer, SPTEF simply remains set and no data</div><div class="t m0 x83 h7 y3ad8 ff2 fs4 fc0 sc0 ls0 ws0">moves from the buffer to the shifter.</div><div class="t m0 x83 h7 y3ad9 ff2 fs4 fc0 sc0 ls0 ws0">If a transfer does not stop, the last data that was transmitted is sent out again.</div><div class="t m0 x83 h7 y3ada ff2 fs4 fc0 sc0 ls0 ws0">0<span class="_ _28"> </span>SPI transmit buffer not empty</div><div class="t m0 x83 h7 y3adb ff2 fs4 fc0 sc0 ls1f4">1<span class="ls0 ws0 v18">SPI transmit buffer empty</span></div><div class="t m0 x97 h7 y3adc ff2 fs4 fc0 sc0 ls0">4</div><div class="t m0 x34 h7 y3add ff2 fs4 fc0 sc0 ls0">MODF</div><div class="t m0 x83 h7 y3adc ff2 fs4 fc0 sc0 ls0 ws0">Master mode fault flag</div><div class="t m0 x83 h7 y3ade ff2 fs4 fc0 sc0 ls0 ws0">MODF is set if the SPI is configured as a master and the slave select input goes low, indicating some</div><div class="t m0 x83 h7 y3adf ff2 fs4 fc0 sc0 ls0 ws0">other SPI device is also configured as a master. The SS pin acts as a mode fault error input only when</div><div class="t m0 x83 h7 y3ae0 ff2 fs4 fc0 sc0 ls0 ws0">MSTR is 1, MODFEN is 1, and SSOE is 0; otherwise, MODF will never be set. MODF is cleared by</div><div class="t m0 x83 h7 y3ae1 ff2 fs4 fc0 sc0 ls0 ws0">reading MODF while it is 1 and then writing to the SPI control register 1 (C1).</div><div class="t m0 x83 h7 y3ae2 ff2 fs4 fc0 sc0 ls0 ws0">0<span class="_ _28"> </span>No mode fault error</div><div class="t m0 x83 h7 y3ae3 ff2 fs4 fc0 sc0 ls0 ws0">1<span class="_ _28"> </span>Mode fault error detected</div><div class="t m0 x1 h7 y3ae4 ff2 fs4 fc0 sc0 ls0">3â€“0</div><div class="t m0 x91 h7 y3ae5 ff2 fs4 fc0 sc0 ls0">Reserved</div><div class="t m0 x83 h7 y3ae4 ff2 fs4 fc0 sc0 ls0 ws0">This field is reserved.</div><div class="t m0 x83 h7 y3ae5 ff2 fs4 fc0 sc0 ls0 ws0">This read-only field is reserved and always has the value 0.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Memory Map and Register Descriptions</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">666<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
