<div id="pf29e" class="pf w0 h0" data-page-no="29e"><div class="pc pc29e w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg29e.png"/><div class="t m0 x3d hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">mode fault error also sets the mode fault (MODF) flag in the SPI Status Register</div><div class="t m0 x3d hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">(SPIx_S). If the SPI interrupt enable bit (SPIE) is set when the MODF flag gets</div><div class="t m0 x3d hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">set, then an SPI interrupt sequence is also requested. When a write to the SPI</div><div class="t m0 x3d hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">Data Register in the master occurs, there is a half SPSCK-cycle delay. After the</div><div class="t m0 x3d hf yfa ff3 fs5 fc0 sc0 ls0 ws0">delay, SPSCK is started within the master. The rest of the transfer operation</div><div class="t m0 x3d hf yfb ff3 fs5 fc0 sc0 ls0 ws0">differs slightly, depending on the clock format specified by the SPI clock phase</div><div class="t m0 x3d hf yfc ff3 fs5 fc0 sc0 ls0 ws0">bit, CPHA, in SPI Control Register 1 (see <span class="fc1">SPI Clock Formats</span>).</div><div class="t m0 xda h8 y3b07 ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y3b08 ff3 fs5 fc0 sc0 ls0 ws0">A change of the bits CPOL, CPHA, SSOE, LSBFE, MODFEN,</div><div class="t m0 x3e hf y3b09 ff3 fs5 fc0 sc0 ls0 ws0">SPC0, BIDIROE with SPC0 set, SPPR2-SPPR0 and SPR3-</div><div class="t m0 x3e hf y3b0a ff3 fs5 fc0 sc0 ls0 ws0">SPR0 in master mode abort a transmission in progress and force</div><div class="t m0 x3e hf y3b0b ff3 fs5 fc0 sc0 ls0 ws0">the SPI into idle state. The remote slave cannot detect this,</div><div class="t m0 x3e hf y3b0c ff3 fs5 fc0 sc0 ls0 ws0">therefore the master has to ensure that the remote slave is set</div><div class="t m0 x3e hf y3b0d ff3 fs5 fc0 sc0 ls0 ws0">back to idle state.</div><div class="t m0 x9 he y3b0e ff1 fs1 fc0 sc0 ls0 ws0">37.4.3<span class="_ _b"> </span>Slave Mode</div><div class="t m0 x9 hf y1a99 ff3 fs5 fc0 sc0 ls0 ws0">The SPI operates in slave mode when the MSTR bit in SPI Control Register1 is clear.</div><div class="t m0 x33 hf y3b0f ff3 fs5 fc0 sc0 ls0 ws199">• SPSCK</div><div class="t m0 x117 hf y3b10 ff3 fs5 fc0 sc0 ls0 ws0">In slave mode, SPSCK is the SPI clock input from the master.</div><div class="t m0 x33 hf y3b11 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>MISO, MOSI pin</div><div class="t m0 x117 hf y3b12 ff3 fs5 fc0 sc0 ls0 ws0">In slave mode, the function of the serial data output pin (MISO) and serial data input</div><div class="t m0 x117 hf y3b13 ff3 fs5 fc0 sc0 ls0 ws0">pin (MOSI) is determined by the SPC0 bit and BIDIROE bit in SPI Control Register</div><div class="t m0 x117 hf y3b14 ff3 fs5 fc0 sc0 ls0">2.</div><div class="t m0 x33 hf y3b15 ff3 fs5 fc0 sc0 ls0 ws0">•<span class="_ _11"> </span>SS pin</div><div class="t m0 x117 hf y3b16 ff3 fs5 fc0 sc0 ls0 ws0">The SS pin is the slave select input. Before a data transmission occurs, the SS pin of</div><div class="t m0 x117 hf y3b17 ff3 fs5 fc0 sc0 ls0 ws0">the slave SPI must be low. SS must remain low until the transmission is complete. If</div><div class="t m0 x117 hf y3b18 ff3 fs5 fc0 sc0 ls0 ws0">SS goes high, the SPI is forced into an idle state.</div><div class="t m0 x117 hf y3b19 ff3 fs5 fc0 sc0 ls0 ws0">The SS input also controls the serial data output pin. If SS is high (not selected), the</div><div class="t m0 x117 hf y3b1a ff3 fs5 fc0 sc0 ls0 ws0">serial data output pin is high impedance. If SS is low, the first bit in the SPI Data</div><div class="t m0 x117 hf y3b1b ff3 fs5 fc0 sc0 ls0 ws0">Register is driven out of the serial data output pin. Also, if the slave is not selected</div><div class="t m0 x117 hf y3b1c ff3 fs5 fc0 sc0 ls0 ws0">(SS is high), then the SPSCK input is ignored and no internal shifting of the SPI shift</div><div class="t m0 x117 hf y3b1d ff3 fs5 fc0 sc0 ls0 ws0">register occurs.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional Description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">670<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf2a1" data-dest-detail='[673,"XYZ",null,175.908,null]'><div class="d m1" style="border-style:none;position:absolute;left:339.230000px;bottom:612.600000px;width:106.568000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
