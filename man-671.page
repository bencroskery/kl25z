<div id="pf29f" class="pf w0 h0" data-page-no="29f"><div class="pc pc29f w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg29f.png"/><div class="t m0 x117 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">Although the SPI is capable of duplex operation, some SPI peripherals are capable of</div><div class="t m0 x117 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">only receiving SPI data in a slave mode. For these simpler devices, there is no serial</div><div class="t m0 x117 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">data out pin.</div><div class="t m0 xda h8 y3b1e ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y3b1f ff3 fs5 fc0 sc0 ls0 ws0">When peripherals with duplex capability are used, take care not</div><div class="t m0 x3e hf y3b20 ff3 fs5 fc0 sc0 ls0 ws0">to simultaneously enable two receivers whose serial outputs</div><div class="t m0 x3e hf y3b21 ff3 fs5 fc0 sc0 ls0 ws0">drive the same system slave&apos;s serial data output line.</div><div class="t m0 x9 hf ya5d ff3 fs5 fc0 sc0 ls0 ws0">As long as no more than one slave device drives the system slave&apos;s serial data output line,</div><div class="t m0 x9 hf ya5e ff3 fs5 fc0 sc0 ls0 ws0">it is possible for several slaves to receive the same transmission from a master, although</div><div class="t m0 x9 hf ya5f ff3 fs5 fc0 sc0 ls0 ws0">the master would not receive return information from all of the receiving slaves.</div><div class="t m0 x9 hf ya60 ff3 fs5 fc0 sc0 ls0 ws0">If the CPHA bit in SPI Control Register 1 is clear, odd numbered edges on the SPSCK</div><div class="t m0 x9 hf y15b0 ff3 fs5 fc0 sc0 ls0 ws0">input cause the data at the serial data input pin to be latched. Even numbered edges cause</div><div class="t m0 x9 hf y15b1 ff3 fs5 fc0 sc0 ls0 ws0">the value previously latched from the serial data input pin to shift into the LSB or MSB</div><div class="t m0 x9 hf y2b01 ff3 fs5 fc0 sc0 ls0 ws0">of the SPI shift register, depending on the LSBFE bit.</div><div class="t m0 x9 hf y3b22 ff3 fs5 fc0 sc0 ls0 ws0">If the CPHA bit is set, even numbered edges on the SPSCK input cause the data at the</div><div class="t m0 x9 hf y3b23 ff3 fs5 fc0 sc0 ls0 ws0">serial data input pin to be latched. Odd numbered edges cause the value previously</div><div class="t m0 x9 hf y3b24 ff3 fs5 fc0 sc0 ls0 ws0">latched from the serial data input pin to shift into the LSB or MSB of the SPI shift</div><div class="t m0 x9 hf y3b25 ff3 fs5 fc0 sc0 ls0 ws0">register, depending on the LSBFE bit.</div><div class="t m0 x9 hf y3b26 ff3 fs5 fc0 sc0 ls0 ws0">When CPHA is set, the first edge is used to get the first data bit onto the serial data output</div><div class="t m0 x9 hf y3b27 ff3 fs5 fc0 sc0 ls0 ws0">pin. When CPHA is clear and the SS input is low (slave selected), the first bit of the SPI</div><div class="t m0 x9 hf y3b28 ff3 fs5 fc0 sc0 ls0 ws0">data is driven out of the serial data output pin. After the eighth shift, the transfer is</div><div class="t m0 x9 hf y3b29 ff3 fs5 fc0 sc0 ls0 ws0">considered complete and the received data is transferred into the SPI Data register. To</div><div class="t m0 x9 hf y3b2a ff3 fs5 fc0 sc0 ls0 ws0">indicate transfer is complete, the SPRF flag in the SPI Status Register is set.</div><div class="t m0 xda h8 y3b2b ff1 fs5 fc0 sc0 ls0">Note</div><div class="t m0 x3e hf y3b2c ff3 fs5 fc0 sc0 ls0 ws0">A change of the bits BIDIROE with SPC0 set, CPOL, CPHA,</div><div class="t m0 x3e hf y3b2d ff3 fs5 fc0 sc0 ls0 ws0">SSOE, LSBFE, MODFEN, and SPC0 in slave mode will</div><div class="t m0 x3e hf y3b2e ff3 fs5 fc0 sc0 ls0 ws0">corrupt a transmission in progress and must be avoided.</div><div class="t m0 x9 he y3b2f ff1 fs1 fc0 sc0 ls0 ws0">37.4.4<span class="_ _b"> </span>SPI Transmission by DMA</div><div class="t m0 x9 hf y3b30 ff3 fs5 fc0 sc0 ls0 ws0">SPI supports both Transmit and Receive by DMA. The basic flow of SPI transmission by</div><div class="t m0 x9 hf y3b31 ff3 fs5 fc0 sc0 ls0 ws0">DMA is as below.</div><div class="t m0 xec h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 37 Serial Peripheral Interface (SPI)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>671</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
