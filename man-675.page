<div id="pf2a3" class="pf w0 h0" data-page-no="2a3"><div class="pc pc2a3 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2a3.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">of the slave. The next SPSCK edge causes both the master and the slave to sample the</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">data bit values on their MISO and MOSI inputs, respectively. At the third SPSCK edge,</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">the SPI shifter shifts one bit position which shifts in the bit value that was just sampled,</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">and shifts the second data bit value out the other end of the shifter to the MOSI and</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">MISO outputs of the master and slave, respectively.</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">When CPHA = 1, the slave&apos;s SS input is not required to go to its inactive high level</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">between transfers. In this clock format, a back-to-back transmission can occur, as</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0">follows:</div><div class="t m0 xf6 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>A transmission is in progress.</div><div class="t m0 xf6 hf y646 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>A new data byte is written to the transmit buffer before the in-progress transmission</div><div class="t m0 x117 hf yaee ff3 fs5 fc0 sc0 ls0 ws0">is complete.</div><div class="t m0 xf6 hf yaef ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>When the in-progress transmission is complete, the new, ready data byte is</div><div class="t m0 x117 hf yaf0 ff3 fs5 fc0 sc0 ls0 ws0">transmitted immediately.</div><div class="t m0 x9 hf y1e5a ff3 fs5 fc0 sc0 ls0 ws0">Between these two successive transmissions, no pause is inserted; the SS pin remains</div><div class="t m0 x9 hf y1e5b ff3 fs5 fc0 sc0 ls0">low.</div><div class="t m0 x9 hf y26b6 ff3 fs5 fc0 sc0 ls0 ws0">The following figure shows the clock formats when CPHA = 0. At the top of the figure,</div><div class="t m0 x9 hf y3b8b ff3 fs5 fc0 sc0 ls0 ws0">the eight bit times are shown for reference with bit 1 starting as the slave is selected (SS</div><div class="t m0 x9 hf y3b8c ff3 fs5 fc0 sc0 ls0 ws0">IN goes low), and bit 8 ends at the last SPSCK edge. The MSB first and LSB first lines</div><div class="t m0 x9 hf y1d80 ff3 fs5 fc0 sc0 ls0 ws0">show the order of SPI data bits depending on the setting in LSBFE. Both variations of</div><div class="t m0 x9 hf y1d81 ff3 fs5 fc0 sc0 ls0 ws0">SPSCK polarity are shown, but only one of these waveforms applies for a specific</div><div class="t m0 x9 hf y1d82 ff3 fs5 fc0 sc0 ls0 ws0">transfer, depending on the value in CPOL. The SAMPLE IN waveform applies to the</div><div class="t m0 x9 hf y1d83 ff3 fs5 fc0 sc0 ls0 ws0">MOSI input of a slave or the MISO input of a master. The MOSI waveform applies to the</div><div class="t m0 x9 hf y2832 ff3 fs5 fc0 sc0 ls0 ws0">MOSI output pin from a master and the MISO waveform applies to the MISO output</div><div class="t m0 x9 hf y2833 ff3 fs5 fc0 sc0 ls0 ws0">from a slave. The SS OUT waveform applies to the slave select output from a master</div><div class="t m0 x9 hf y2834 ff3 fs5 fc0 sc0 ls0 ws0">(provided MODFEN and SSOE = 1). The master SS output goes to active low at the start</div><div class="t m0 x9 hf y2835 ff3 fs5 fc0 sc0 ls0 ws0">of the first bit time of the transfer and goes back high one-half SPSCK cycle after the end</div><div class="t m0 x9 hf y2836 ff3 fs5 fc0 sc0 ls0 ws0">of the eighth bit time of the transfer. The SS IN waveform applies to the slave select input</div><div class="t m0 x9 hf y2837 ff3 fs5 fc0 sc0 ls0 ws0">of a slave.</div><div class="t m0 xec h10 y452 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 37 Serial Peripheral Interface (SPI)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>675</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
