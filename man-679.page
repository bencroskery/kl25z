<div id="pf2a7" class="pf w0 h0" data-page-no="2a7"><div class="pc pc2a7 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2a7.png"/><div class="t m0 x9 he y17c ff1 fs1 fc0 sc0 ls0 ws0">37.4.8<span class="_ _b"> </span>Error Conditions</div><div class="t m0 x9 hf y17d ff3 fs5 fc0 sc0 ls0 ws0">The SPI module has one error condition: the mode fault error.</div><div class="t m0 x9 h1b y3c05 ff1 fsc fc0 sc0 ls0 ws0">37.4.8.1<span class="_ _b"> </span>Mode Fault Error</div><div class="t m0 x9 hf y3c06 ff3 fs5 fc0 sc0 ls0 ws0">If the SS input becomes low while the SPI is configured as a master, it indicates a system</div><div class="t m0 x9 hf y3c07 ff3 fs5 fc0 sc0 ls0 ws0">error where more than one master may be trying to drive the MOSI and SPSCK lines</div><div class="t m0 x9 hf y3c08 ff3 fs5 fc0 sc0 ls0 ws0">simultaneously. This condition is not permitted in normal operation, and it sets the</div><div class="t m0 x9 hf y3c09 ff3 fs5 fc0 sc0 ls0 ws0">MODF bit in the SPI status register automatically provided that the MODFEN bit is set.</div><div class="t m0 x9 hf y3c0a ff3 fs5 fc0 sc0 ls0 ws0">In the special case where the SPI is in master mode and the MODFEN bit is cleared, the</div><div class="t m0 x9 hf y3c0b ff3 fs5 fc0 sc0 ls0 ws0">SS pin is not used by the SPI. In this special case, the mode fault error function is</div><div class="t m0 x9 hf y3c0c ff3 fs5 fc0 sc0 ls0 ws0">inhibited and MODF remains cleared. If the SPI system is configured as a slave, the SS</div><div class="t m0 x9 hf y3c0d ff3 fs5 fc0 sc0 ls0 ws0">pin is a dedicated input pin. A mode fault error does not occur in slave mode.</div><div class="t m0 x9 hf y3c0e ff3 fs5 fc0 sc0 ls0 ws0">If a mode fault error occurs, the SPI is switched to slave mode, with the exception that</div><div class="t m0 x9 hf y3c0f ff3 fs5 fc0 sc0 ls0 ws0">the slave output buffer is disabled. So the SPSCK, MISO and MOSI pins are forced to be</div><div class="t m0 x9 hf y3c10 ff3 fs5 fc0 sc0 ls0 ws0">high impedance inputs to avoid any possibility of conflict with another output driver. A</div><div class="t m0 x9 hf y3c11 ff3 fs5 fc0 sc0 ls0 ws0">transmission in progress is aborted and the SPI is forced into idle state.</div><div class="t m0 x9 hf y3c12 ff3 fs5 fc0 sc0 ls0 ws0">If the mode fault error occurs in the bidirectional mode for an SPI system configured in</div><div class="t m0 x9 hf y3c13 ff3 fs5 fc0 sc0 ls0 ws0">master mode, the output enable of MOMI (MOSI in bidirectional mode) is cleared if it</div><div class="t m0 x9 hf y3c14 ff3 fs5 fc0 sc0 ls0 ws0">was set. No mode fault error occurs in the bidirectional mode for the SPI system</div><div class="t m0 x9 hf y3c15 ff3 fs5 fc0 sc0 ls0 ws0">configured in slave mode.</div><div class="t m0 x9 hf y3c16 ff3 fs5 fc0 sc0 ls0 ws0">The mode fault flag is cleared automatically by a read of the SPI Status Register (with</div><div class="t m0 x9 hf y3c17 ff3 fs5 fc0 sc0 ls0 ws0">MODF set) followed by a write to SPI Control Register 1. If the mode fault flag is</div><div class="t m0 x9 hf y3c18 ff3 fs5 fc0 sc0 ls0 ws0">cleared, the SPI becomes a normal master or slave again.</div><div class="t m0 x9 he y3c19 ff1 fs1 fc0 sc0 ls0 ws0">37.4.9<span class="_ _b"> </span>Low Power Mode Options</div><div class="t m0 x9 hf y3c1a ff3 fs5 fc0 sc0 ls0 ws0">This section describes the low power mode options.</div><div class="t m0 x9 h1b y3c1b ff1 fsc fc0 sc0 ls0 ws0">37.4.9.1<span class="_ _b"> </span>SPI in Run Mode</div><div class="t m0 x9 hf y3c1c ff3 fs5 fc0 sc0 ls0 ws0">In run mode, with the SPI system enable (SPE) bit in the SPI control register clear, the</div><div class="t m0 x9 hf y3c1d ff3 fs5 fc0 sc0 ls0 ws0">SPI system is in a low-power, disabled state. SPI registers can still be accessed, but</div><div class="t m0 x9 hf y3c1e ff3 fs5 fc0 sc0 ls0 ws0">clocks to the core of this module are disabled.</div><div class="t m0 xec h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 37 Serial Peripheral Interface (SPI)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>679</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
