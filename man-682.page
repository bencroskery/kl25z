<div id="pf2aa" class="pf w0 h0" data-page-no="2aa"><div class="pc pc2aa w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2aa.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">service routine (ISR) should check the flag bits to determine which event caused the</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">interrupt. The service routine should also clear the flag bit(s) before returning from the</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">ISR (usually near the beginning of the ISR).</div><div class="t m0 x9 h1b y34a7 ff1 fsc fc0 sc0 ls0 ws480">37.4.11.1 MODF</div><div class="t m0 x9 hf ya31 ff3 fs5 fc0 sc0 ls0 ws0">MODF occurs when the master detects an error on the SS pin. The master SPI must be</div><div class="t m0 x9 hf ya19 ff3 fs5 fc0 sc0 ls0 ws0">configured for the MODF feature (see the description of the C1[SSOE] bit). Once MODF</div><div class="t m0 x9 hf ya1a ff3 fs5 fc0 sc0 ls0 ws0">is set, the current transfer is aborted and the master (MSTR) bit in the SPIx_C1 register</div><div class="t m0 x9 hf y1395 ff3 fs5 fc0 sc0 ls0 ws0">resets to 0.</div><div class="t m0 x9 hf y14cd ff3 fs5 fc0 sc0 ls0 ws0">The MODF interrupt is reflected in the status register&apos;s MODF flag. Clearing the flag also</div><div class="t m0 x9 hf y1545 ff3 fs5 fc0 sc0 ls0 ws0">clears the interrupt. This interrupt stays active while the MODF flag is set. MODF has an</div><div class="t m0 x9 hf y18a6 ff3 fs5 fc0 sc0 ls0 ws0">automatic clearing process that is described in the SPI Status Register.</div><div class="t m0 x9 h1b ya1f ff1 fsc fc0 sc0 ls0 ws480">37.4.11.2 SPRF</div><div class="t m0 x9 hf ya20 ff3 fs5 fc0 sc0 ls0 ws0">SPRF occurs when new data has been received and copied to the SPI receive data buffer.</div><div class="t m0 x9 hf ya21 ff3 fs5 fc0 sc0 ls0 ws0">After SPRF is set, it does not clear until it is serviced. SPRF has an automatic clearing</div><div class="t m0 x9 hf ya22 ff3 fs5 fc0 sc0 ls0 ws0">process that is described in the SPI Status Register details. If the SPRF is not serviced</div><div class="t m0 x9 hf ya23 ff3 fs5 fc0 sc0 ls0 ws0">before the end of the next transfer (that is, SPRF remains active throughout another</div><div class="t m0 x9 hf ya24 ff3 fs5 fc0 sc0 ls0 ws0">transfer), the subsequent transfers are ignored and no new data is copied into the Data</div><div class="t m0 x9 hf y3c36 ff3 fs5 fc0 sc0 ls0">register.</div><div class="t m0 x9 h1b y3c37 ff1 fsc fc0 sc0 ls0 ws480">37.4.11.3 SPTEF</div><div class="t m0 x9 hf y3c38 ff3 fs5 fc0 sc0 ls0 ws0">SPTEF occurs when the SPI transmit buffer is ready to accept new data.</div><div class="t m0 x9 hf yc91 ff3 fs5 fc0 sc0 ls0 ws0">After SPTEF is set, it does not clear until it is serviced. SPTEF has an automatic clearing</div><div class="t m0 x9 hf yc92 ff3 fs5 fc0 sc0 ls0 ws0">process that is described in the SPI Status Register details.</div><div class="t m0 x9 h1b y3c39 ff1 fsc fc0 sc0 ls0 ws480">37.4.11.4 SPMF</div><div class="t m0 x9 hf y3c3a ff3 fs5 fc0 sc0 ls0 ws0">SPMF occurs when the data in the receive data buffer is equal to the data in the SPI</div><div class="t m0 x9 hf y3c3b ff3 fs5 fc0 sc0 ls0 ws0">match register.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional Description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">682<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
