<div id="pf2ca" class="pf w0 h0" data-page-no="2ca"><div class="pc pc2ca w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2ca.png"/><div class="t m0 x9 h1b y502 ff1 fsc fc0 sc0 ls0 ws0">38.4.6.5<span class="_ _b"> </span>Arbitration lost interrupt</div><div class="t m0 x9 hf y503 ff3 fs5 fc0 sc0 ls0 ws0">The I2C is a true multimaster bus that allows more than one master to be connected on it.</div><div class="t m0 x9 hf y504 ff3 fs5 fc0 sc0 ls0 ws0">If two or more masters try to control the bus at the same time, the relative priority of the</div><div class="t m0 x9 hf y505 ff3 fs5 fc0 sc0 ls0 ws0">contending masters is determined by a data arbitration procedure. The I2C module asserts</div><div class="t m0 x9 hf y629 ff3 fs5 fc0 sc0 ls0 ws0">the arbitration-lost interrupt when it loses the data arbitration process and the ARBL bit</div><div class="t m0 x9 hf y62a ff3 fs5 fc0 sc0 ls0 ws0">in the Status Register is set.</div><div class="t m0 x9 hf y674 ff3 fs5 fc0 sc0 ls0 ws0">Arbitration is lost in the following circumstances:</div><div class="t m0 xf6 hf y23f0 ff3 fs5 fc0 sc0 ls0 ws0">1.<span class="_ _11"> </span>SDA is sampled as low when the master drives high during an address or data</div><div class="t m0 x34 hf y1dd8 ff3 fs5 fc0 sc0 ls0 ws0">transmit cycle.</div><div class="t m0 xf6 hf y1dd9 ff3 fs5 fc0 sc0 ls0 ws0">2.<span class="_ _11"> </span>SDA is sampled as low when the master drives high during the acknowledge bit of a</div><div class="t m0 x34 hf y1dda ff3 fs5 fc0 sc0 ls0 ws0">data receive cycle.</div><div class="t m0 xf6 hf y3907 ff3 fs5 fc0 sc0 ls0 ws0">3.<span class="_ _11"> </span>A START cycle is attempted when the bus is busy.</div><div class="t m0 xf6 hf y392e ff3 fs5 fc0 sc0 ls0 ws0">4.<span class="_ _11"> </span>A repeated START cycle is requested in slave mode.</div><div class="t m0 xf6 hf y3eba ff3 fs5 fc0 sc0 ls0 ws0">5.<span class="_ _11"> </span>A STOP condition is detected when the master did not request it.</div><div class="t m0 x9 hf y3ebb ff3 fs5 fc0 sc0 ls0 ws0">The ARBL bit must be cleared (by software) by writing 1 to it.</div><div class="t m0 x9 h1b y3ebc ff1 fsc fc0 sc0 ls0 ws0">38.4.6.6<span class="_ _b"> </span>Timeout interrupt in SMBus</div><div class="t m0 x9 hf y3ebd ff3 fs5 fc0 sc0 ls0 ws0">When the IICIE bit is set, the I2C module asserts a timeout interrupt (outputs SLTF and</div><div class="t m0 x9 hf y3ebe ff3 fs5 fc0 sc0 ls0 ws0">SHTF2) upon detection of any of the mentioned timeout conditions, with one exception.</div><div class="t m0 x9 hf y3ebf ff3 fs5 fc0 sc0 ls0 ws0">The SCL high and SDA high TIMEOUT mechanism must not be used to influence the</div><div class="t m0 x9 hf y3ec0 ff3 fs5 fc0 sc0 ls0 ws0">timeout interrupt output, because this timeout indicates an idle condition on the bus.</div><div class="t m0 x9 hf y3ec1 ff3 fs5 fc0 sc0 ls0 ws0">SHTF1 rises when it matches the SCL high and SDA high TIMEOUT and falls</div><div class="t m0 x9 hf y3ec2 ff3 fs5 fc0 sc0 ls0 ws0">automatically just to indicate the bus status. The SHTF2&apos;s timeout period is the same as</div><div class="t m0 x9 hf y3ec3 ff3 fs5 fc0 sc0 ls0 ws0">that of SHTF1, which is short compared to that of SLTF, so another control bit,</div><div class="t m0 x9 hf y24f4 ff3 fs5 fc0 sc0 ls0 ws0">SHTF2IE, is added to enable or disable it.</div><div class="t m0 x9 he y2692 ff1 fs1 fc0 sc0 ls0 ws0">38.4.7<span class="_ _b"> </span>Programmable input glitch filter</div><div class="t m0 x9 hf yb02 ff3 fs5 fc0 sc0 ls0 ws0">An I2C glitch filter has been added outside legacy I2C modules but within the I2C</div><div class="t m0 x9 hf yb03 ff3 fs5 fc0 sc0 ls0 ws0">package. This filter can absorb glitches on the I2C clock and data lines for the I2C</div><div class="t m0 x9 hf yb04 ff3 fs5 fc0 sc0 ls0 ws0">module. The width of the glitch to absorb can be specified in terms of the number of</div><div class="t m0 x9 hf y3ec4 ff3 fs5 fc0 sc0 ls0 ws0">(half) bus clock cycles. A single Programmable Input Glitch Filter control register is</div><div class="t m0 x9 hf y3ec5 ff3 fs5 fc0 sc0 ls0 ws0">provided. Effectively, any down-up-down or up-down-up transition on the data line that</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">714<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
