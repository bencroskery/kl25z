<div id="pf2cf" class="pf w0 h0" data-page-no="2cf"><div class="pc pc2cf w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2cf.png"/><div class="c x118 y3f4f w7f h1ce"><div class="t m61 x145 h1ca y3f50 ff2 fsc7 fc0 sc0 ls0">Master</div><div class="t m61 x145 h1ca y3f51 ff2 fsc7 fc0 sc0 ls0">mode?</div><div class="t m61 xf1 h1cf y3f52 ff2 fsc7 fc0 sc0 ls0 ws4c1">Tx/Rx? <span class="v30">Arbitration</span></div><div class="t m61 x16f h1ca y3f53 ff2 fsc7 fc0 sc0 ls0">lost?</div><div class="t m61 x4e h1ca y3f54 ff2 fsc7 fc0 sc0 ls0">IAAS=1?</div><div class="t m61 x137 h1ca y3f55 ff2 fsc7 fc0 sc0 ls0">Tx/Rx?</div><div class="t m61 x15a h1ca y3f56 ff2 fsc7 fc0 sc0 ls0 ws0">ACK from</div><div class="t m61 x15a h1ca y3f57 ff2 fsc7 fc0 sc0 ls0">receiver?</div><div class="t m61 xe9 h1ca y3f58 ff2 fsc7 fc0 sc0 ls0">SRW=1?</div><div class="t m61 xe9 h1ca y3f54 ff2 fsc7 fc0 sc0 ls0">IAAS=1?</div><div class="t m61 xa0 h1ca y3f59 ff2 fsc7 fc0 sc0 ls0 ws0">Clear ARBL</div><div class="t m61 x4 h1ca y3f5a ff2 fsc7 fc0 sc0 ls0 ws0">2nd to</div><div class="t m61 xbc h1ca y3f5b ff2 fsc7 fc0 sc0 ls0 ws0">last byte to be </div><div class="t m61 x4 h1ca y3f5c ff2 fsc7 fc0 sc0 ls0">read?</div><div class="t m61 x3b h1ca y3f5d ff2 fsc7 fc0 sc0 ls0 ws0">Last byte</div><div class="t m61 x121 h1ca y3f5e ff2 fsc7 fc0 sc0 ls0 ws0">to be read?</div><div class="t m61 x89 h1ca y3f5f ff2 fsc7 fc0 sc0 ls0">RXAK=0?</div><div class="t m61 x118 h1ca y3f60 ff2 fsc7 fc0 sc0 ls0 ws0">Last byte</div><div class="t m61 x142 h1ca y3f61 ff2 fsc7 fc0 sc0 ls0">transmitted?</div><div class="t m63 x88 h1d0 y3f62 ff2 fsc9 fc0 sc0 ls0 ws0">End of</div><div class="t m63 x142 h1d0 y3f63 ff2 fsc9 fc0 sc0 ls0 ws0">address cycle</div><div class="t m63 x142 h1d0 y3f64 ff2 fsc9 fc0 sc0 ls0 ws0">(master Rx)?</div><div class="t m61 x89 h1ca y3f65 ff2 fsc7 fc0 sc0 ls0 ws0">Write next</div><div class="t m61 x11d h1ca y3f66 ff2 fsc7 fc0 sc0 ls0 ws0">byte to Data reg</div><div class="t m61 xdc h1ca y3f67 ff2 fsc7 fc0 sc0 ls0 ws0">Generate stop</div><div class="t m61 x127 h1ca y3f68 ff2 fsc7 fc0 sc0 ls0 ws0">signal (MST=0)</div><div class="t m61 xce h1ca y3f69 ff2 fsc7 fc0 sc0 ls0 ws0">Set TXAK to</div><div class="t m61 xce h1ca y3f6a ff2 fsc7 fc0 sc0 ls0 ws0">proper value</div><div class="t m61 xa h1ca y3f6b ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m61 xd h1ca y3f6c ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m61 xd h1ca y3f6d ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m61 xf h1ca y3f6e ff2 fsc7 fc0 sc0 ls0 ws0">Read data from </div><div class="t m61 xb h1ca y3f6f ff2 fsc7 fc0 sc0 ls0 ws0">Data reg </div><div class="t m61 xd h1ca y3f70 ff2 fsc7 fc0 sc0 ls0 ws0">and soft CRC</div><div class="t m61 x172 h1ca y3f65 ff2 fsc7 fc0 sc0 ls0">Transmit</div><div class="t m61 x14e h1ca y3f66 ff2 fsc7 fc0 sc0 ls0 ws0">next byte</div><div class="t m61 x145 h1ca y3f71 ff2 fsc7 fc0 sc0 ls0">RTI</div><div class="t m61 x4e h1ca y3f72 ff2 fsc7 fc0 sc0 ls0 ws0">Switch to</div><div class="t m61 x4e h1ca y3f73 ff2 fsc7 fc0 sc0 ls0 ws0">Rx mode</div><div class="t m61 xcf h1ca y3f74 ff2 fsc7 fc0 sc0 ls0 ws0">Switch to</div><div class="t m61 xcf h1ca y3f75 ff2 fsc7 fc0 sc0 ls0 ws0">Rx mode</div><div class="t m61 x9d h1ca y3f76 ff2 fsc7 fc0 sc0 ls0 ws0">Dummy read</div><div class="t m61 x9d h1ca y3f77 ff2 fsc7 fc0 sc0 ls0 ws0">from Data reg</div><div class="t m61 x39 h1ca y3f78 ff2 fsc7 fc0 sc0 ls0 ws0">Generate stop</div><div class="t m61 x94 h1ca y3f79 ff2 fsc7 fc0 sc0 ls0 ws0">signal (MST=0)</div><div class="t m61 x2b h1ca y3f7a ff2 fsc7 fc0 sc0 ls0 ws0">Read data from</div><div class="t m61 x8c h1ca y3f7b ff2 fsc7 fc0 sc0 ls0 ws0">Data reg </div><div class="t m61 x3b h1ca y3f7c ff2 fsc7 fc0 sc0 ls0 ws0">and store</div><div class="t m61 xe3 h1ca y3f7a ff2 fsc7 fc0 sc0 ls0 ws0">Read data from</div><div class="t m61 xfe h1ca y3f7b ff2 fsc7 fc0 sc0 ls0 ws0">Data reg </div><div class="t m61 xfe h1ca y3f7c ff2 fsc7 fc0 sc0 ls0 ws0">and store</div><div class="t m61 x14f h1ca y3f7d ff2 fsc7 fc0 sc0 ls0 ws0">Dummy read</div><div class="t m61 x80 h1ca y3f7e ff2 fsc7 fc0 sc0 ls0 ws0">from Data reg</div><div class="t m61 x10f h1ca y3f7f ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x18 h1ca y3f80 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x55 h1ca y3f81 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x173 h1ca y3f82 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x10f h1ca y3f83 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x51 h1ca y3f84 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x8e h1ca y3f85 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x60 h1ca y3f86 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x2e h1ca y3f87 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x50 h1ca y3f88 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x156 h1ca y3f89 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xe0 h1ca y3f8a ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xfc h1ca y3f8b ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x77 h1ca y3f8c ff2 fsc7 fc0 sc0 ls0">(read)</div><div class="t m61 xa5 h1ca y3f8d ff2 fsc7 fc0 sc0 ls0 ws0">N (write)</div><div class="t m61 x4f h1ca y3f8e ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x16b h1ca y3f8f ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x13e h1ca y3f90 ff2 fsc7 fc0 sc0 ls0 ws4c2">Rx<span class="_ _253"></span>Tx</div><div class="t m61 x150 h1ca y3f91 ff2 fsc7 fc0 sc0 ls0">Rx</div><div class="t m61 x55 h1ca y3f92 ff2 fsc7 fc0 sc0 ls0">Tx</div><div class="t m61 x99 h1ca y3f93 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x173 h1ca y3f94 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 xfe h1ca y3f95 ff2 fsc7 fc0 sc0 ls0 ws0">Address transfer</div><div class="t m61 xee h1ca y3f96 ff2 fsc7 fc0 sc0 ls0 ws0">see note 1</div><div class="t m61 x51 h1ca y3f97 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 xd1 h1ca y3f98 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 x150 h1ca y3f99 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xdd h1ca y3f9a ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xd6 h1ca y3f9b ff2 fsc7 fc0 sc0 ls0 ws0">SLTF or</div><div class="t m61 x83 h1ca y3f9c ff2 fsc7 fc0 sc0 ls0">SHTF2=1?</div><div class="t m61 x9e h1ca y3f9d ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x92 h1ca y3f9e ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xbf h1ca y3f9f ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m61 xc h1ca y3fa0 ff2 fsc7 fc0 sc0 ls0">FACK=1?</div><div class="t m61 x10f h1ca y3fa1 ff2 fsc7 fc0 sc0 ls0">N</div><div class="t m61 x163 h1ca y3fa2 ff2 fsc7 fc0 sc0 ls0">Y</div><div class="t m61 xdd h1ca y3fa3 ff2 fsc7 fc0 sc0 ls0 ws0">See typical I2C </div><div class="t m61 xdd h1ca y3fa4 ff2 fsc7 fc0 sc0 ls0 ws0">interrupt routine </div><div class="t m61 x168 h1ca y3fa5 ff2 fsc7 fc0 sc0 ls0 ws0">flow chart</div><div class="t m61 x8 h1ca y3fa6 ff2 fsc7 fc0 sc0 ls0 ws0">Set TXAK to</div><div class="t m61 x8 h1ca y3fa7 ff2 fsc7 fc0 sc0 ls0 ws0">proper value</div><div class="t m61 x121 h1ca y3fa8 ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m61 xbc h1d1 y3fa9 ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)<span class="_ _22"> </span><span class="v32">Set Tx mode</span></div><div class="t m61 x105 h1ca y3faa ff2 fsc7 fc0 sc0 ls0 ws0">Write data</div><div class="t m61 xa h1ca y3fab ff2 fsc7 fc0 sc0 ls0 ws0">to Data reg</div><div class="t m61 x96 h1ca y3fac ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m0 xcd h9b y3fad ff1 fs10 fc0 sc0 ls0">Notes:</div><div class="t m0 xcd h2d y3fae ff2 fs10 fc0 sc0 ls0 ws0">1. If general call or SIICAEN is enabled, check to determine if the received address is a general call address (0x00) or an SMBus</div><div class="t m0 xcd h2d y3faf ff2 fs10 fc0 sc0 ls0 ws0">    device default address. In either case, they must be handled by user software.</div><div class="t m0 xcd h2d y3fb0 ff2 fs10 fc0 sc0 ls0 ws0">2. In receive mode, one bit time delay may be needed before the first and second data reading.</div><div class="t m61 x2c h1ca y3fb1 ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m61 x6 h1ca y3fb2 ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m61 xe3 h1ca y3fb3 ff2 fsc7 fc0 sc0 ls0 ws0">Read data from </div><div class="t m61 xfe h1ca y3fb4 ff2 fsc7 fc0 sc0 ls0 ws0">Data reg </div><div class="t m61 x6 h1ca y3fb5 ff2 fsc7 fc0 sc0 ls0 ws0">and soft CRC</div><div class="t m61 x16d h1ca y3fb6 ff2 fsc7 fc0 sc0 ls0 ws0">Set TXAK to</div><div class="t m61 x16d h1ca y3fb7 ff2 fsc7 fc0 sc0 ls0 ws0">proper value</div><div class="t m61 xc5 h1ca y3fb8 ff2 fsc7 fc0 sc0 ls0 ws0">Clear IICIF</div><div class="t m61 x6 h1ca y3fb9 ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m61 x2b h1ca y3fba ff2 fsc7 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m61 x3c h1ca y3fbb ff2 fsc7 fc0 sc0 ls0 ws0">Read data from </div><div class="t m61 x8c h1ca y3fbc ff2 fsc7 fc0 sc0 ls0 ws0">Data reg </div><div class="t m61 xbc h1ca y3fbd ff2 fsc7 fc0 sc0 ls0 ws0">and soft CRC</div><div class="t m61 x45 h1ca y3fbe ff2 fsc7 fc0 sc0 ls0 ws0">Set TXACK=1</div><div class="t m61 x45 h1ca y3fbf ff2 fsc7 fc0 sc0 ls0 ws0">Clear FACK=0</div><div class="t m0 x45 h69 y3fc0 ff2 fs32 fc0 sc0 ls0 ws0">Delay (note 2)</div><div class="t m0 xac h69 y3fc1 ff2 fs32 fc0 sc0 ls0 ws0">Read data and</div><div class="t m0 xf0 h69 y3fc2 ff2 fs32 fc0 sc0 ls0 ws0">Soft CRC</div><div class="t m0 xca h69 y3fc3 ff2 fs32 fc0 sc0 ls0 ws0">Set TXAK to</div><div class="t m0 xca h69 y3fc4 ff2 fs32 fc0 sc0 ls0 ws0">proper value</div><div class="t m0 x45 h69 y3fc5 ff2 fs32 fc0 sc0 ls0 ws0">Delay (note 2)</div></div><div class="t m0 xb2 h9 y3fc6 ff1 fs2 fc0 sc0 ls0 ws0">Figure 38-43. Typical I2C SMBus interrupt routine</div><div class="t m0 x122 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 38 Inter-Integrated Circuit (I2C)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>719</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
