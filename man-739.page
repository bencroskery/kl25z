<div id="pf2e3" class="pf w0 h0" data-page-no="2e3"><div class="pc pc2e3 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2e3.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">The transmitter output (UART_TX) idle state defaults to logic high, C3[TXINV] is</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">cleared following reset. The transmitter output is inverted by setting C3[TXINV]. The</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">transmitter is enabled by setting the C2[TE] bit. This queues a preamble character that is</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">one full character frame of the idle state. The transmitter then remains idle until data is</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">available in the transmit data buffer. Programs store data into the transmit data buffer by</div><div class="t m0 x9 hf yfb ff3 fs5 fc0 sc0 ls0 ws0">writing to the UART data register.</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">The central element of the UART transmitter is the transmit shift register that is 10-bit to</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">13 bits long depending on the setting in the C1[M], C2[M10] and BDH[SBNS] control</div><div class="t m0 x9 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">bits. For the remainder of this section, assume C1[M], C2[M10] and BDH[SBNS] are</div><div class="t m0 x9 hf y646 ff3 fs5 fc0 sc0 ls0 ws0">cleared, selecting the normal 8-bit data mode. In 8-bit data mode, the shift register holds a</div><div class="t m0 x9 hf yaee ff3 fs5 fc0 sc0 ls0 ws0">start bit, eight data bits, and a stop bit. When the transmit shift register is available for a</div><div class="t m0 x9 hf yaef ff3 fs5 fc0 sc0 ls0 ws0">new UART character, the value waiting in the transmit data register is transferred to the</div><div class="t m0 x9 hf yaf0 ff3 fs5 fc0 sc0 ls0 ws0">shift register, synchronized with the baud rate clock, and the transmit data register empty</div><div class="t m0 x9 hf y4184 ff3 fs5 fc0 sc0 ls0 ws0">(S1[TDRE]) status flag is set to indicate another character may be written to the transmit</div><div class="t m0 x9 hf y1dae ff3 fs5 fc0 sc0 ls0 ws0">data buffer at UART_D.</div><div class="t m0 x9 hf yaf3 ff3 fs5 fc0 sc0 ls0 ws0">If no new character is waiting in the transmit data buffer after a stop bit is shifted out the</div><div class="t m0 x9 hf yaf4 ff3 fs5 fc0 sc0 ls0 ws0">UART_TX pin, the transmitter sets the transmit complete flag and enters an idle mode,</div><div class="t m0 x9 hf yaf5 ff3 fs5 fc0 sc0 ls0 ws0">with UART_TX high, waiting for more characters to transmit.</div><div class="t m0 x9 hf y2321 ff3 fs5 fc0 sc0 ls0 ws0">Writing 0 to C2[TE] does not immediately disable the transmitter. The current transmit</div><div class="t m0 x9 hf yaf7 ff3 fs5 fc0 sc0 ls0 ws0">activity in progress must first be completed. This includes data characters in progress,</div><div class="t m0 x9 hf yaf8 ff3 fs5 fc0 sc0 ls0 ws0">queued idle characters, and queued break characters.</div><div class="t m0 x9 h1b y4185 ff1 fsc fc0 sc0 ls0 ws0">39.3.2.1<span class="_ _b"> </span>Send break and queued idle</div><div class="t m0 x9 hf y4186 ff3 fs5 fc0 sc0 ls0 ws0">The UART_C2[SBK] bit sends break characters originally used to gain the attention of</div><div class="t m0 x9 hf y4187 ff3 fs5 fc0 sc0 ls0 ws0">old teletype receivers. Break characters are a full character time of logic 0, 10-bit to 12-</div><div class="t m0 x9 hf y4188 ff3 fs5 fc0 sc0 ls0 ws0">bit times including the start and stop bits. A longer break of 13-bit times can be enabled</div><div class="t m0 x9 hf y4189 ff3 fs5 fc0 sc0 ls0 ws0">by setting UART_S2[BRK13]. Normally, a program would wait for UART_S1[TDRE]</div><div class="t m0 x9 hf y148f ff3 fs5 fc0 sc0 ls0 ws0">to become set to indicate the last character of a message has moved to the transmit</div><div class="t m0 x9 hf y1490 ff3 fs5 fc0 sc0 ls0 ws0">shifter, write 1, and then write 0 to the UART_C2[SBK] bit. This action queues a break</div><div class="t m0 x9 hf y1491 ff3 fs5 fc0 sc0 ls0 ws0">character to be sent as soon as the shifter is available. If UART_C2[SBK] remains 1</div><div class="t m0 x9 hf y1492 ff3 fs5 fc0 sc0 ls0 ws0">when the queued break moves into the shifter, synchronized to the baud rate clock, an</div><div class="t m0 x9 hf y418a ff3 fs5 fc0 sc0 ls0 ws0">additional break character is queued. If the receiving device is another Freescale</div><div class="t m0 x9 hf y418b ff3 fs5 fc0 sc0 ls0 ws0">Semiconductor UART, the break characters are received as 0s in all data bits and a</div><div class="t m0 x9 hf y418c ff3 fs5 fc0 sc0 ls0 ws0">framing error (UART_S1[FE] = 1) occurs.</div><div class="t m0 x9 hf y418d ff3 fs5 fc0 sc0 ls0 ws0">When idle-line wakeup is used, a full character time of idle (logic 1) is needed between</div><div class="t m0 x9 hf y418e ff3 fs5 fc0 sc0 ls0 ws0">messages to wake up any sleeping receivers. Normally, a program would wait for</div><div class="t m0 x9 hf y418f ff3 fs5 fc0 sc0 ls0 ws0">UART_S1[TDRE] to become set to indicate the last character of a message has moved to</div><div class="t m0 x44 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 39 Universal Asynchronous Receiver/Transmitter (UART0)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>739</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
