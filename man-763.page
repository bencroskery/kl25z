<div id="pf2fb" class="pf w0 h0" data-page-no="2fb"><div class="pc pc2fb w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2fb.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">cleared, UART_BDH[SBNS] is also cleared, selecting the normal 8-bit data mode. In 8-</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">bit data mode, the shift register holds a start bit, eight data bits, and a stop bit. When the</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">transmit shift register is available for a new UART character, the value waiting in the</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">transmit data register is transferred to the shift register, synchronized with the baud rate</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">clock, and the transmit data register empty (UART_S1[TDRE]) status flag is set to</div><div class="t m0 x9 hf yfb ff3 fs5 fc0 sc0 ls0 ws0">indicate another character may be written to the transmit data buffer at UART_D.</div><div class="t m0 x9 hf yabd ff3 fs5 fc0 sc0 ls0 ws0">If no new character is waiting in the transmit data buffer after a stop bit is shifted out the</div><div class="t m0 x9 hf y644 ff3 fs5 fc0 sc0 ls0 ws0">TxD pin, the transmitter sets the transmit complete flag and enters an idle mode, with</div><div class="t m0 x9 hf y645 ff3 fs5 fc0 sc0 ls0 ws0">TxD high, waiting for more characters to transmit.</div><div class="t m0 x9 hf yad6 ff3 fs5 fc0 sc0 ls0 ws0">Writing 0 to UART_C2[TE] does not immediately release the pin to be a general-purpose</div><div class="t m0 x9 hf yad7 ff3 fs5 fc0 sc0 ls0 ws0">I/O pin. Any transmit activity in progress must first be completed. This includes data</div><div class="t m0 x9 hf y2040 ff3 fs5 fc0 sc0 ls0 ws0">characters in progress, queued idle characters, and queued break characters.</div><div class="t m0 x9 h1b y4394 ff1 fsc fc0 sc0 ls0 ws0">40.3.2.1<span class="_ _b"> </span>Send break and queued idle</div><div class="t m0 x9 hf y67b ff3 fs5 fc0 sc0 ls0 ws0">The UART_C2[SBK] bit sends break characters originally used to gain the attention of</div><div class="t m0 x9 hf y1547 ff3 fs5 fc0 sc0 ls0 ws0">old teletype receivers. Break characters are a full character time of logic 0, 10 bit times</div><div class="t m0 x9 hf y28f8 ff3 fs5 fc0 sc0 ls0 ws0">including the start and stop bits. A longer break of 13 bit times can be enabled by setting</div><div class="t m0 x9 hf y28f9 ff3 fs5 fc0 sc0 ls0 ws0">UART_S2[BRK13]. Normally, a program would wait for UART_S1[TDRE] to become</div><div class="t m0 x9 hf y28fa ff3 fs5 fc0 sc0 ls0 ws0">set to indicate the last character of a message has moved to the transmit shifter, write 1,</div><div class="t m0 x9 hf y28fb ff3 fs5 fc0 sc0 ls0 ws0">and then write 0 to the UART_C2[SBK] bit. This action queues a break character to be</div><div class="t m0 x9 hf y4395 ff3 fs5 fc0 sc0 ls0 ws0">sent as soon as the shifter is available. If UART_C2[SBK] remains 1 when the queued</div><div class="t m0 x9 hf y4396 ff3 fs5 fc0 sc0 ls0 ws0">break moves into the shifter, synchronized to the baud rate clock, an additional break</div><div class="t m0 x9 hf y4397 ff3 fs5 fc0 sc0 ls0 ws0">character is queued. If the receiving device is another Freescale Semiconductor UART,</div><div class="t m0 x9 hf y4398 ff3 fs5 fc0 sc0 ls0 ws0">the break characters are received as 0s in all eight data bits and a framing error</div><div class="t m0 x9 hf y4399 ff3 fs5 fc0 sc0 ls0 ws0">(UART_S1[FE] = 1) occurs.</div><div class="t m0 x9 hf y439a ff3 fs5 fc0 sc0 ls0 ws0">When idle-line wakeup is used, a full character time of idle (logic 1) is needed between</div><div class="t m0 x9 hf y439b ff3 fs5 fc0 sc0 ls0 ws0">messages to wake up any sleeping receivers. Normally, a program would wait for</div><div class="t m0 x9 hf y3968 ff3 fs5 fc0 sc0 ls0 ws0">UART_S1[TDRE] to become set to indicate the last character of a message has moved to</div><div class="t m0 x9 hf y3969 ff3 fs5 fc0 sc0 ls0 ws0">the transmit shifter, then write 0 and then write 1 to the UART_C2[TE] bit. This action</div><div class="t m0 x9 hf y439c ff3 fs5 fc0 sc0 ls0 ws0">queues an idle character to be sent as soon as the shifter is available. As long as the</div><div class="t m0 x9 hf y15bc ff3 fs5 fc0 sc0 ls0 ws0">character in the shifter does not finish while UART_C2[TE] is cleared, the UART</div><div class="t m0 x9 hf y15bd ff3 fs5 fc0 sc0 ls0 ws0">transmitter never actually releases control of the TxD pin. If there is a possibility of the</div><div class="t m0 x9 hf y15be ff3 fs5 fc0 sc0 ls0 ws0">shifter finishing while UART_C2[TE] is cleared, set the general-purpose I/O controls so</div><div class="t m0 x9 hf y2506 ff3 fs5 fc0 sc0 ls0 ws0">the pin shared with TxD is an output driving a logic 1. This ensures that the TxD line</div><div class="t m0 x9 hf y2507 ff3 fs5 fc0 sc0 ls0 ws0">looks like a normal idle line even if the UART loses control of the port pin between</div><div class="t m0 x9 hf y2508 ff3 fs5 fc0 sc0 ls0 ws0">writing 0 and then 1 to UART_C2[TE].</div><div class="t m0 x21 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 40 Universal Asynchronous Receiver/Transmitter (UART1 and UART2)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>763</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
