<div id="pf2fd" class="pf w0 h0" data-page-no="2fd"><div class="pc pc2fd w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg2fd.png"/><div class="t m0 x9 h1b y2d7 ff1 fsc fc0 sc0 ls0 ws0">40.3.3.1<span class="_ _b"> </span>Data sampling technique</div><div class="t m0 x9 hf ybf ff3 fs5 fc0 sc0 ls0 ws0">The UART receiver uses a 16× baud rate clock for sampling. The receiver starts by</div><div class="t m0 x9 hf y282 ff3 fs5 fc0 sc0 ls0 ws0">taking logic level samples at 16 times the baud rate to search for a falling edge on the</div><div class="t m0 x9 hf y283 ff3 fs5 fc0 sc0 ls0 ws0">RxD serial data input pin. A falling edge is defined as a logic 0 sample after three</div><div class="t m0 x9 hf y2d8 ff3 fs5 fc0 sc0 ls0 ws0">consecutive logic 1 samples. The 16× baud rate clock divides the bit time into 16</div><div class="t m0 x9 hf y23ac ff3 fs5 fc0 sc0 ls0 ws0">segments labeled UART_D[[RT1] through UART_D[RT16]. When a falling edge is</div><div class="t m0 x9 hf y2a8f ff3 fs5 fc0 sc0 ls0 ws0">located, three more samples are taken at UART_D[RT3], UART_D[RT5], and</div><div class="t m0 x9 hf y2a90 ff3 fs5 fc0 sc0 ls0 ws0">UART_D[RT7] to make sure this was a real start bit and not merely noise. If at least two</div><div class="t m0 x9 hf y43b9 ff3 fs5 fc0 sc0 ls0 ws0">of these three samples are 0, the receiver assumes it is synchronized to a receive</div><div class="t m0 x9 hf y43ba ff3 fs5 fc0 sc0 ls0">character.</div><div class="t m0 x9 hf y43bb ff3 fs5 fc0 sc0 ls0 ws0">The receiver then samples each bit time, including the start and stop bits, at</div><div class="t m0 x9 hf y43bc ff3 fs5 fc0 sc0 ls0 ws0">UART_D[RT8], UART_D[RT9], and UART_D[RT10] to determine the logic level for</div><div class="t m0 x9 hf y43bd ff3 fs5 fc0 sc0 ls0 ws0">that bit. The logic level is interpreted to be that of the majority of the samples taken</div><div class="t m0 x9 hf y3e11 ff3 fs5 fc0 sc0 ls0 ws0">during the bit time. In the case of the start bit, the bit is assumed to be 0 if at least two of</div><div class="t m0 x9 hf y3e12 ff3 fs5 fc0 sc0 ls0 ws0">the samples at UART_D[RT3], UART_D[RT5], and UART_D[RT7] are 0 even if one or</div><div class="t m0 x9 hf y43be ff3 fs5 fc0 sc0 ls0 ws0">all of the samples taken at UART_D[RT8], UART_D[RT9], and UART_D[RT10] are 1s.</div><div class="t m0 x9 hf y1d91 ff3 fs5 fc0 sc0 ls0 ws0">If any sample in any bit time, including the start and stop bits, in a character frame fails to</div><div class="t m0 x9 hf y1d92 ff3 fs5 fc0 sc0 ls0 ws0">agree with the logic level for that bit, the noise flag (UART_S1[NF]) is set when the</div><div class="t m0 x9 hf y1d93 ff3 fs5 fc0 sc0 ls0 ws0">received character is transferred to the receive data buffer.</div><div class="t m0 x9 hf y43bf ff3 fs5 fc0 sc0 ls0 ws0">The falling edge detection logic continuously looks for falling edges. If an edge is</div><div class="t m0 x9 hf y1d95 ff3 fs5 fc0 sc0 ls0 ws0">detected, the sample clock is resynchronized to bit times. This improves the reliability of</div><div class="t m0 x9 hf y1d96 ff3 fs5 fc0 sc0 ls0 ws0">the receiver in the presence of noise or mismatched baud rates. It does not improve worst</div><div class="t m0 x9 hf y1d97 ff3 fs5 fc0 sc0 ls0 ws0">case analysis because some characters do not have any extra falling edges anywhere in</div><div class="t m0 x9 hf y1d98 ff3 fs5 fc0 sc0 ls0 ws0">the character frame.</div><div class="t m0 x9 hf y1d99 ff3 fs5 fc0 sc0 ls0 ws0">In the case of a framing error, provided the received character was not a break character,</div><div class="t m0 x9 hf y1d9a ff3 fs5 fc0 sc0 ls0 ws0">the sampling logic that searches for a falling edge is filled with three logic 1 samples so</div><div class="t m0 x9 hf y1d9b ff3 fs5 fc0 sc0 ls0 ws0">that a new start bit can be detected almost immediately.</div><div class="t m0 x9 hf y41ae ff3 fs5 fc0 sc0 ls0 ws0">In the case of a framing error, the receiver is inhibited from receiving any new characters</div><div class="t m0 x9 hf y41af ff3 fs5 fc0 sc0 ls0 ws0">until the framing error flag is cleared. The receive shift register continues to function, but</div><div class="t m0 x9 hf y43c0 ff3 fs5 fc0 sc0 ls0 ws0">a complete character cannot transfer to the receive data buffer if UART_S1[FE] remains</div><div class="t m0 x9 hf y43c1 ff3 fs5 fc0 sc0 ls0">set.</div><div class="t m0 x21 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 40 Universal Asynchronous Receiver/Transmitter (UART1 and UART2)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>765</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
