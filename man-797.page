<div id="pf31d" class="pf w0 h0" data-page-no="31d"><div class="pc pc31d w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg31d.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws1a6">C<span class="fs8 ws198 vc">ref</span><span class="ws0">: Internal reference capacitor</span></div><div class="t m0 x9 hf y503 ff3 fs5 fc0 sc0 lsfe">I<span class="fs8 ls0 ws198 vc">ref</span><span class="ls0 ws0">: Reference oscillator current source</span></div><div class="t m0 x9 hf y6d9 ff3 fs5 fc0 sc0 ls0 ws0">∆V : Hysteresis delta voltage</div><div class="t m0 x9 hf y6da ff3 fs5 fc0 sc0 ls0 ws0">Considering C<span class="fs8 ws198 vc">ref</span> = 1.0 pF, I<span class="fs8 ws198 vc">ref</span> = 12 µA and ∆V = 600 mV, follows</div><div class="c x9 y459e w8d h1e6"><div class="t m0 x0 h1f2 y459f ff5 fsda fc0 sc0 ls0 ws4fd">F<span class="_ _b5"></span><span class="fsdb ws4fe vb">ref_osc <span class="fsda ws0 v27"> 12µA</span></span></div><div class="t m0 x11d h1f3 y45a0 ff5 fsda fc0 sc0 ls0 ws0">2 *1.0pF<span class="_ _18a"> </span><span class="ff2 ls2bb vc">*</span><span class="ws4ff v11">600mV </span><span class="v27">10.0MHz</span></div></div><div class="t m0 x9 he y45a1 ff1 fs1 fc0 sc0 ls0 ws0">42.4.2<span class="_ _b"> </span>TSI measurement result</div><div class="t m0 x9 hf y45a2 ff3 fs5 fc0 sc0 ls0 ws0">The capacitance measurement result is defined by the number of TSI reference oscillator</div><div class="t m0 x9 hf y45a3 ff3 fs5 fc0 sc0 ls0 ws0">periods during the sample time and is stored in the TSICHnCNT register.</div><div class="t m0 x9 hf y45a4 ff3 fs5 fc0 sc0 ls0 ws0">TSICHnCNT = T<span class="fs8 ws198 vc">cap_samp</span> * F<span class="fs8 vc">ref_osc</span></div><div class="t m0 x9 hf y45a5 ff3 fs5 fc0 sc0 ls0 ws0">Using Equation 2 and Equation 1 follows:</div><div class="c x46 y45a6 w8e h1f4"><div class="t m0 x0 h1f5 y45a7 ff2 fsa fc0 sc0 ls0 ws500">TSICHnCNT <span class="ff5 ws349 v30">I<span class="fsa3 ws0">ref <span class="fsa">* PS *NSCN  </span></span></span></div><div class="t m0 x1 h1f6 y45a8 ff5 fsa fc0 sc0 ls0 ws349">C<span class="fsa3 ws501">ref </span><span class="ff2 ls2bc vb">*</span><span class="ls3b v1b">I</span><span class="fsa3 ws502 v1b">elec </span><span class="ff2 ws0 v36">* </span><span class="v36">C<span class="fsa3">elec</span></span></div></div><div class="t m0 x8 h9 y45a9 ff1 fs2 fc0 sc0 ls0 ws0">Figure 42-14. Equation 5: Capacitance result value</div><div class="t m0 x9 hf y45aa ff3 fs5 fc0 sc0 ls0 ws0">In the example where F<span class="fs8 ws198 vc">ref_osc</span> = 10.0MHz and T<span class="fs8 ws198 vc">cap_samp</span> = 48 µs, TSICHnCNT = 480</div><div class="t m0 x9 he y45ab ff1 fs1 fc0 sc0 ls0 ws0">42.4.3<span class="_ _b"> </span>Enable TSI module</div><div class="t m0 x9 hf y45ac ff3 fs5 fc0 sc0 ls0 ws0">The TSI module can be fully functional in run, wait and low power modes. The</div><div class="t m0 x9 hf y45ad ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[TSIEN] bit must be set to enable the TSI module in run and wait mode.</div><div class="t m0 x9 hf y45ae ff3 fs5 fc0 sc0 ls0 ws0">When TSI_GENCS[STPE] bit is set, it allows the TSI module to work in low power</div><div class="t m0 x9 hf y45af ff3 fs5 fc0 sc0 ls0">mode.</div><div class="t m0 x9 he y45b0 ff1 fs1 fc0 sc0 ls0 ws0">42.4.4<span class="_ _b"> </span>Software and hardware trigger</div><div class="t m0 x9 hf y45b1 ff3 fs5 fc0 sc0 ls0 ws0">The TSI module allows a software or hardware trigger to start a scan. When a software</div><div class="t m0 x9 hf y45b2 ff3 fs5 fc0 sc0 ls0 ws0">trigger is applied ( TSI_GENCS[STM] bit clear), the TSI_GENCS[SWTS] bit must be</div><div class="t m0 x9 hf y45b3 ff3 fs5 fc0 sc0 ls0 ws0">written &quot;1&quot; to start the scan electrode channel that is identified by TSI_DATA[TSICH].</div><div class="t m0 x9 hf y45b4 ff3 fs5 fc0 sc0 ls0 ws0">When a hardware trigger is applied ( TSI_GENCS[STM] bit set), the TSI will not start</div><div class="t m0 x9 hf y45b5 ff3 fs5 fc0 sc0 ls0 ws0">scanning until the hardware trigger arrives. The hardware trigger is different depending</div><div class="t m0 x9 hf y45b6 ff3 fs5 fc0 sc0 ls0 ws0">on the MCU configuration. Generally, it could be an event that RTC overflows. See chip</div><div class="t m0 x9 hf y45b7 ff3 fs5 fc0 sc0 ls0 ws0">configuration section for details.</div><div class="t m0 xb3 h10 y141 ff1 fs4 fc0 sc0 ls0 ws0">Chapter 42 Touch Sensing Input (TSI)</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">Freescale Semiconductor, Inc.<span class="_ _113"> </span>797</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
