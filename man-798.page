<div id="pf31e" class="pf w0 h0" data-page-no="31e"><div class="pc pc31e w0 h0"><img class="bi x0 y8 w3 h5" alt="" src="bg31e.png"/><div class="t m0 x9 he y1c7 ff1 fs1 fc0 sc0 ls0 ws0">42.4.5<span class="_ _b"> </span>Scan times</div><div class="t m0 x9 hf y1c8 ff3 fs5 fc0 sc0 ls0 ws0">The TSI provides multi-scan function. The number of scans is indicated by the</div><div class="t m0 x9 hf y9de ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[NSCN] bits that allow the scan number from 1 to 32. When</div><div class="t m0 x9 hf y9df ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[NSCN] is set to 0 (only once), the single scan is engaged. The 16-bit</div><div class="t m0 x9 hf y15ad ff3 fs5 fc0 sc0 ls0 ws0">counter accumulates all scan results until the NSCN time scan completes, and users can</div><div class="t m0 x9 hf y1be9 ff3 fs5 fc0 sc0 ls0 ws0">read TSI_DATA[TSICNT] to get this accumulation. When DMA transfer is enabled, the</div><div class="t m0 x9 hf y24c8 ff3 fs5 fc0 sc0 ls0 ws0">counter values can also be read out by DMA engine.</div><div class="t m0 x9 he y45b8 ff1 fs1 fc0 sc0 ls0 ws0">42.4.6<span class="_ _b"> </span>Clock setting</div><div class="t m0 x9 hf y24bd ff3 fs5 fc0 sc0 ls0 ws0">TSI is built with dual oscillator architecture. In normal sensing application, the reference</div><div class="t m0 x9 hf y648 ff3 fs5 fc0 sc0 ls0 ws0">oscillator clock is the only clock source for operations. The reference clock is used to</div><div class="t m0 x9 hf y649 ff3 fs5 fc0 sc0 ls0 ws0">measure the electrode oscillator by ticking a 16-bit counter. The reference oscillator</div><div class="t m0 x9 hf y22c6 ff3 fs5 fc0 sc0 ls0 ws0">frequency depends on the current source setting. Please refer to the <span class="fc1">Current source</span> for</div><div class="t m0 x9 hf y22c7 ff3 fs5 fc0 sc0 ls0 ws0">more details.</div><div class="t m0 x9 hf y28f8 ff3 fs5 fc0 sc0 ls0 ws0">The output of electrode oscillator has several prescalers up to 128 indicated by</div><div class="t m0 x9 hf y28f9 ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[PS]bits. This allows a flexible counter configuration for different electrode</div><div class="t m0 x9 hf y28fa ff3 fs5 fc0 sc0 ls0 ws0">oscillator frequency.</div><div class="t m0 x9 he y45b9 ff1 fs1 fc0 sc0 ls0 ws0">42.4.7<span class="_ _b"> </span>Reference voltage</div><div class="t m0 x9 hf y1861 ff3 fs5 fc0 sc0 ls0 ws0">The TSI module offers a internal reference voltage for both electrode oscillator and</div><div class="t m0 x9 hf y45ba ff3 fs5 fc0 sc0 ls0 ws0">reference oscillator. The internal reference voltage can work in low power modes even</div><div class="t m0 x9 hf y45bb ff3 fs5 fc0 sc0 ls0 ws0">when the MCU regulator is partially powered down, which is ideally for low-power touch</div><div class="t m0 x9 hf ya54 ff3 fs5 fc0 sc0 ls0">detection.</div><div class="t m0 x9 hf y45bc ff3 fs5 fc0 sc0 ls0 ws0">The charge and discharge difference voltage is configurable upon the setting of</div><div class="t m0 x9 hf y45bd ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[DVOLT] bits. The following table shows the all the delta voltage</div><div class="t m0 x9 hf y45be ff3 fs5 fc0 sc0 ls0 ws0">configurations.Note this table doesn&apos;t apply to noise mode, where the details should be</div><div class="t m0 x9 hf y45bf ff3 fs5 fc0 sc0 ls0 ws0">consult form noise modes chapters.</div><div class="t m0 x40 h9 y45c0 ff1 fs2 fc0 sc0 ls0 ws0">Table 42-11.<span class="_ _1a"> </span>Delta voltage configuration</div><div class="t m0 x3d h10 y45c1 ff1 fs4 fc0 sc0 ls0 ws503">DVOLT V<span class="fs9 ws1a4 vb">p</span><span class="ws0"> (V)<span class="_ _135"> </span>V<span class="fs9 ws1a4 vb">m</span> (V)<span class="_ _26"> </span><span class="ffb ws466">Î”</span>V (V)</span></div><div class="t m0 x153 h7 y45c2 ff2 fs4 fc0 sc0 ls0 ws504">00<span class="_ _a8"> </span>1.328 0.302 1.026</div><div class="t m0 x153 h7 y45c3 ff2 fs4 fc0 sc0 ls0 ws504">01<span class="_ _a8"> </span>1.111 0.519 0.592</div><div class="t m0 x153 h7 y45c4 ff2 fs4 fc0 sc0 ls0 ws504">10<span class="_ _a8"> </span>0.986 0.644 0.342</div><div class="t m0 x153 h7 y45c5 ff2 fs4 fc0 sc0 ls0 ws504">11<span class="_ _a8"> </span>0.914 0.716 0.198</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">798<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div><a class="l" href="#pf31f" data-dest-detail='[799,"XYZ",null,699.1,null]'><div class="d m1" style="border-style:none;position:absolute;left:432.672000px;bottom:447.400000px;width:82.810000px;height:14.000000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
