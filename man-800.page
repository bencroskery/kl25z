<div id="pf320" class="pf w0 h0" data-page-no="320"><div class="pc pc320 w0 h0"><img class="bi x0 y8 w2 h5" alt="" src="bg320.png"/><div class="t m0 x9 hf yf6 ff3 fs5 fc0 sc0 ls0 ws0">there is a considerable capacitance change defined by the TSI_TSHD. For instance, if in</div><div class="t m0 x9 hf yf7 ff3 fs5 fc0 sc0 ls0 ws0">low power mode the electrode capacitance does not vary, the out-of-range interrupt does</div><div class="t m0 x9 hf yf8 ff3 fs5 fc0 sc0 ls0 ws0">not interrupt the CPU. This interrupt will not happen in noise detection mode. It is worthy</div><div class="t m0 x9 hf yf9 ff3 fs5 fc0 sc0 ls0 ws0">to note that when the counter value reaches 0xFFFF is treated as an extreme case the out-</div><div class="t m0 x9 hf yfa ff3 fs5 fc0 sc0 ls0 ws0">of-range will not happen. Also in noise detection mode, the out-of-range will not assert</div><div class="t m0 x9 hf yfb ff3 fs5 fc0 sc0 ls0">either.</div><div class="t m0 x9 he y45ce ff1 fs1 fc0 sc0 ls0 ws0">42.4.11<span class="_ _b"> </span>Wake up MCU from low power modes</div><div class="t m0 x9 hf y28f5 ff3 fs5 fc0 sc0 ls0 ws0">In low power modes, once enabled by TSI_GENCS[STPE] and TSI_GENCS[TSIIE],</div><div class="t m0 x9 hf y28f6 ff3 fs5 fc0 sc0 ls0 ws0">TSI can bring MCU out of its low power modes(STOP, VLPS, VLLS,etc) by either end</div><div class="t m0 x9 hf y2701 ff3 fs5 fc0 sc0 ls0 ws0">of scan or out of range interrupt, that is, if TSI_GENCS[ESOR] is set, end of scan</div><div class="t m0 x9 hf y2702 ff3 fs5 fc0 sc0 ls0 ws0">interrupt is selected and otherwise, out of range is selected.</div><div class="t m0 x9 he y45cf ff1 fs1 fc0 sc0 ls0 ws0">42.4.12<span class="_ _b"> </span>DMA function support</div><div class="t m0 x9 hf y1547 ff3 fs5 fc0 sc0 ls0 ws0">Transmit by DMA is supported only when TSI_DATA[DMAEN] is set. A DMA transfer</div><div class="t m0 x9 hf y28f8 ff3 fs5 fc0 sc0 ls0 ws0">request is asserted when all of TSI_GENCS[EOSF], TSI_GENCS[ESOR] and</div><div class="t m0 x9 hf y28f9 ff3 fs5 fc0 sc0 ls0 ws0">TSI_GENCS[TSIIE] are set. Then the on-chip DMA controller detects this request and</div><div class="t m0 x9 hf y28fa ff3 fs5 fc0 sc0 ls0 ws0">transfers data between memory space and TSI register space. After the data tranfer, DMA</div><div class="t m0 x9 hf y28fb ff3 fs5 fc0 sc0 ls0 ws0">DONE is asserted to clear TSI_GENCS[EOSF] automatically. This function is normally</div><div class="t m0 x9 hf y4395 ff3 fs5 fc0 sc0 ls0 ws0">used by DMA controller to get the conversion result from TSI_DATA[TSICNT] upon a</div><div class="t m0 x9 hf y4396 ff3 fs5 fc0 sc0 ls0 ws0">end-of-scan event and then refresh the channel index(TSI_DATA[TSICH]) for next</div><div class="t m0 x9 hf y4397 ff3 fs5 fc0 sc0 ls0 ws0">trigger. DMA function is not available when MCU is in stop modes.</div><div class="t m0 x9 he y45d0 ff1 fs1 fc0 sc0 ls0 ws0">42.4.13<span class="_ _b"> </span>Noise detection mode</div><div class="t m0 x9 hf ya55 ff3 fs5 fc0 sc0 ls0 ws0">The noise detection mode change the circuit configuration as shown in the following</div><div class="t m0 x9 hf y45d1 ff3 fs5 fc0 sc0 ls0 ws0">figure. With this configuration, it is possible to detect touch with high levels of EMC</div><div class="t m0 x9 hf y45d2 ff3 fs5 fc0 sc0 ls0 ws0">noise present. To enter the test mode, see TSIx_GENCS[MODE] register field.</div><div class="t m0 x9 hf y45d3 ff3 fs5 fc0 sc0 ls0 ws0">In noise detection mode the reference oscillator has the same configuration except the</div><div class="t m0 x9 hf y45d4 ff3 fs5 fc0 sc0 ls0 ws0">output goes to Counter2 and this counter will have the it&apos;s maximum count set by NSCN.</div><div class="t m0 x9 hf y45d5 ff3 fs5 fc0 sc0 ls0 ws0">2^(PS). This means this oscillator will setup the noise detection mode sense duration.</div><div class="t m0 x9 hf y45d6 ff3 fs5 fc0 sc0 ls0 ws0">The blocks of external oscillator is changed and instead of an oscillator the circuit</div><div class="t m0 x9 hf y45d7 ff3 fs5 fc0 sc0 ls0 ws0">implements an RF amplitude detection. The thrshold for this amplitude detection is set by</div><div class="t m0 x9 hf y45d8 ff3 fs5 fc0 sc0 ls0 ws0">DVOLT register bits.</div><div class="t m0 x9 hf y45d9 ff3 fs5 fc0 sc0 ls0 ws0">Also the external voltage is biased by vmid voltage with a Rs series resistance.</div><div class="t m0 x9 h10 ydd ff1 fs4 fc0 sc0 ls0 ws0">Functional description</div><div class="t m0 x8 h6 y9 ff1 fs3 fc0 sc0 ls0 ws0">KL25 Sub-Family Reference Manual, Rev. 3, September 2012</div><div class="t m0 x9 h7 ya ff2 fs4 fc0 sc0 ls0 ws0">800<span class="_ _113"> </span>Freescale Semiconductor, Inc.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
